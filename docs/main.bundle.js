(()=>{"use strict";var e,t,n,i={3740:(e,t,n)=>{var i=n(93856);class o{_canvas;_engine;_scene;_onTick;constructor(e){this._canvas=e.canvas,this._engine=e.engine,this._scene=null,this._onTick=null}static async Create(e,t){const n=new o(e);return n._scene=await n._initialize(e.sceneBuilder,t),n._onTick=n._makeOnTick(),n}run(){const e=this._engine;window.addEventListener("resize",this._onResize),e.runRenderLoop(this._onTick)}dispose(){window.removeEventListener("resize",this._onResize),this._engine.dispose()}_onResize=()=>{this._engine.resize()};async _initialize(e,t){return await e.build(this._canvas,this._engine,t)}_makeOnTick(){const e=this._scene;return()=>e.render()}}n(19679),n(33832),n(28461),n(19837),n(7169),n(2380),n(2051),n(55218),n(28010),n(96524),n(42186),n(27696),n(37118);var a=n(13323),s=n(7839),r=n(17720),l=n(52046),d=n(71513),c=n(18595),u=n(15909),b=n(32033),g=n(28986),h=n(2093),p=n(7481),m=n(26041),f=n(79923),y=n(66423),x=n(97328),v=n(65202),w=n(87491),k=n(17159),O=n(60470),C=n(91111),P=n(8644),T=n(19269),I=n(70721),M=n(25736),E=n(58227),_=n(76562),A=n(10513);const L=JSON.parse('[{"id":10000000,"name":"Paimon","weaponType":"Others","element":"Universal","gender":"Others","rarity":5,"directory":"res/chars/Genshin/Paimon","image":"Genshin/Paimon.png","pmx":"派蒙1.0.pmx"},{"id":10000001,"name":"Pom-Pom","weaponType":"Others","element":"Universal","gender":"Others","rarity":5,"directory":"res/chars/HSR/Pom-Pom","image":"HSR/Pom-Pom.png","pmx":"Pom-Pom.pmx"},{"id":10000002,"name":"Bangboo","weaponType":"Others","element":"Universal","gender":"Others","rarity":5,"directory":"res/chars/ZZZ/Bangboo","image":"ZZZ/Bangboo.png","pmx":"邦布.pmx"},{"id":10000003,"name":"Abby","weaponType":"Others","element":"Universal","gender":"Others","rarity":5,"directory":"res/chars/WuWa/Abby","image":"WuWa/Abby.png","pmx":"Abby.pmx"}]'),R=JSON.parse('[{"name":"Specialist","audioPlayerFile":"res/cam_motion/Specialist (Never End ver.)/music001.mp3","camMotionFile":"res/cam_motion/Specialist (Never End ver.)/CameraMAIN2.bvmd","modelMotionFile":"res/cam_motion/Specialist (Never End ver.)/mmd_Specialist_motion.bvmd"},{"name":"Classic","audioPlayerFile":"res/cam_motion/Classic/MMDClassic.mp3","camMotionFile":"res/cam_motion/Classic/MMDClassicCamera.bvmd","modelMotionFile":"res/cam_motion/Classic/MMDClassicMotion.bvmd"},{"name":"Renai","audioPlayerFile":"res/cam_motion/恋サーFullモーションセット/恋愛サーキュレーション.mp3","camMotionFile":"res/cam_motion/恋サーFullモーションセット/Camera for 恋爱循环.bvmd","modelMotionFile":"res/cam_motion/恋サーFullモーションセット/恋爱循环+.bvmd"},{"name":"105","audioPlayerFile":"res/cam_motion/热爱105C的你/热爱105C的你.mp3","camMotionFile":"res/cam_motion/热爱105C的你/camera.bvmd","modelMotionFile":"res/cam_motion/热爱105C的你/热爱105℃的你.bvmd"}]');var S=n(32206);class N{loadingUIBackgroundColor;loadingUIText;constructor(e,t="Loading",n="black"){this._renderingCanvas=e,this._loadingText=t,this._loadingDivBackgroundColor=n,this._resizeLoadingUI=()=>{const e=this._renderingCanvas.getBoundingClientRect(),t=window.getComputedStyle(this._renderingCanvas).position;this._loadingDiv&&(this._loadingDiv.style.position="fixed"===t?"fixed":"absolute",this._loadingDiv.style.left=e.left+"px",this._loadingDiv.style.top=e.top+"px",this._loadingDiv.style.width=e.width+"px",this._loadingDiv.style.height=e.height+"px")}}displayLoadingUI(){if(this._loadingDiv)return;this._loadingDiv=document.createElement("div"),this._loadingDiv.id="babylonjsLoadingDiv",this._loadingDiv.style.opacity="0",this._loadingDiv.style.transition="opacity 1.5s ease",this._loadingDiv.style.pointerEvents="none",this._loadingDiv.style.display="grid",this._loadingDiv.style.gridTemplateRows="100%",this._loadingDiv.style.gridTemplateColumns="100%",this._loadingDiv.style.justifyItems="center",this._loadingDiv.style.alignItems="center",this.loadingTextDiv=document.createElement("div"),this.loadingTextDiv.style.position="absolute",this.loadingTextDiv.style.left="0",this.loadingTextDiv.style.top="50%",this.loadingTextDiv.style.marginTop="80px",this.loadingTextDiv.style.width="100%",this.loadingTextDiv.style.height="20px",this.loadingTextDiv.style.fontFamily="Arial",this.loadingTextDiv.style.fontSize="14px",this.loadingTextDiv.style.color="white",this.loadingTextDiv.style.textAlign="center",this.loadingTextDiv.style.zIndex="1",this.loadingTextDiv.innerHTML="Loading",this._loadingDiv.appendChild(this.loadingTextDiv),this.loadingTextDiv.innerHTML=this._loadingText,this._style=document.createElement("style"),this._style.type="text/css",this._style.innerHTML="@-webkit-keyframes spin1 {                    0% { -webkit-transform: rotate(0deg);}\n                    100% { -webkit-transform: rotate(360deg);}\n                }                @keyframes spin1 {                    0% { transform: rotate(0deg);}\n                    100% { transform: rotate(360deg);}\n                }",document.getElementsByTagName("head")[0].appendChild(this._style);const e=!!window.SVGSVGElement,t=new Image,n=["paimon_load","kururin","guinaifen","furina","bangboo"];t.src="res/assets/loads/"+n[Math.floor(Math.random()*n.length)]+".gif",t.style.width="150px",t.style.gridColumn="1",t.style.gridRow="1",t.style.top="50%",t.style.left="50%",t.style.transform="translate(-50%, -50%)",t.style.position="absolute";const i=document.createElement("div");i.style.width="300px",i.style.gridColumn="1",i.style.gridRow="1",i.style.top="50%",i.style.left="50%",i.style.transform="translate(-50%, -50%)",i.style.position="absolute";const o=new Image;if(o.src=N.DefaultSpinnerUrl?N.DefaultSpinnerUrl:e?"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzOTIgMzkyIj48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6I2UwNjg0Yjt9LmNscy0ye2ZpbGw6bm9uZTt9PC9zdHlsZT48L2RlZnM+PHRpdGxlPlNwaW5uZXJJY29uPC90aXRsZT48ZyBpZD0iTGF5ZXJfMiIgZGF0YS1uYW1lPSJMYXllciAyIj48ZyBpZD0iU3Bpbm5lciI+PHBhdGggY2xhc3M9ImNscy0xIiBkPSJNNDAuMjEsMTI2LjQzYzMuNy03LjMxLDcuNjctMTQuNDQsMTItMjEuMzJsMy4zNi01LjEsMy41Mi01YzEuMjMtMS42MywyLjQxLTMuMjksMy42NS00LjkxczIuNTMtMy4yMSwzLjgyLTQuNzlBMTg1LjIsMTg1LjIsMCwwLDEsODMuNCw2Ny40M2EyMDgsMjA4LDAsMCwxLDE5LTE1LjY2YzMuMzUtMi40MSw2Ljc0LTQuNzgsMTAuMjUtN3M3LjExLTQuMjgsMTAuNzUtNi4zMmM3LjI5LTQsMTQuNzMtOCwyMi41My0xMS40OSwzLjktMS43Miw3Ljg4LTMuMywxMi00LjY0YTEwNC4yMiwxMDQuMjIsMCwwLDEsMTIuNDQtMy4yMyw2Mi40NCw2Mi40NCwwLDAsMSwxMi43OC0xLjM5QTI1LjkyLDI1LjkyLDAsMCwxLDE5NiwyMS40NGE2LjU1LDYuNTUsMCwwLDEsMi4wNSw5LDYuNjYsNi42NiwwLDAsMS0xLjY0LDEuNzhsLS40MS4yOWEyMi4wNywyMi4wNywwLDAsMS01Ljc4LDMsMzAuNDIsMzAuNDIsMCwwLDEtNS42NywxLjYyLDM3LjgyLDM3LjgyLDAsMCwxLTUuNjkuNzFjLTEsMC0xLjkuMTgtMi44NS4yNmwtMi44NS4yNHEtNS43Mi41MS0xMS40OCwxLjFjLTMuODQuNC03LjcxLjgyLTExLjU4LDEuNGExMTIuMzQsMTEyLjM0LDAsMCwwLTIyLjk0LDUuNjFjLTMuNzIsMS4zNS03LjM0LDMtMTAuOTQsNC42NHMtNy4xNCwzLjUxLTEwLjYsNS41MUExNTEuNiwxNTEuNiwwLDAsMCw2OC41Niw4N0M2Ny4yMyw4OC40OCw2Niw5MCw2NC42NCw5MS41NnMtMi41MSwzLjE1LTMuNzUsNC43M2wtMy41NCw0LjljLTEuMTMsMS42Ni0yLjIzLDMuMzUtMy4zMyw1YTEyNywxMjcsMCwwLDAtMTAuOTMsMjEuNDksMS41OCwxLjU4LDAsMSwxLTMtMS4xNVM0MC4xOSwxMjYuNDcsNDAuMjEsMTI2LjQzWiIvPjxyZWN0IGNsYXNzPSJjbHMtMiIgd2lkdGg9IjM5MiIgaGVpZ2h0PSIzOTIiLz48L2c+PC9nPjwvc3ZnPg==":"https://cdn.babylonjs.com/Assets/loadingIcon.png",o.style.animation="spin1 0.75s infinite linear",o.style.webkitAnimation="spin1 0.75s infinite linear",o.style.transformOrigin="50% 50%",o.style.webkitTransformOrigin="50% 50%",!e){const e={w:16,h:18.5},n={w:30,h:30};t.style.width=`${e.w}vh`,t.style.height=`${e.h}vh`,t.style.left=`calc(50% - ${e.w/2}vh)`,t.style.top=`calc(50% - ${e.h/2}vh)`,o.style.width=`${n.w}vh`,o.style.height=`${n.h}vh`,o.style.left=`calc(50% - ${n.w/2}vh)`,o.style.top=`calc(50% - ${n.h/2}vh)`}i.appendChild(o),this._loadingDiv.appendChild(t),this._loadingDiv.appendChild(i),this._resizeLoadingUI(),window.addEventListener("resize",this._resizeLoadingUI),this._loadingDiv.style.backgroundColor=this._loadingDivBackgroundColor,document.body.appendChild(this._loadingDiv),this._loadingDiv.style.opacity="1"}hideLoadingUI(){this._loadingDiv&&(this._loadingDiv.style.opacity="0",this._loadingDiv.addEventListener("transitionend",(()=>{this.loadingTextDiv&&(this.loadingTextDiv.remove(),this.loadingTextDiv=null),this._loadingDiv&&(this._loadingDiv.remove(),this._loadingDiv=null),this._style&&(this._style.remove(),this._style=null),window.removeEventListener("resize",this._resizeLoadingUI)})))}set loadingUIText(e){this._loadingText=e,this.loadingTextDiv&&(this.loadingTextDiv.innerHTML=this._loadingText)}get loadingUIText(){return this._loadingText}get loadingUIBackgroundColor(){return this._loadingDivBackgroundColor}set loadingUIBackgroundColor(e){this._loadingDivBackgroundColor=e,this._loadingDiv&&(this._loadingDiv.style.backgroundColor=this._loadingDivBackgroundColor)}}S.$.DefaultLoadingScreenFactory=e=>new N(e);var V=n(70223),D=n(34769);class B{static _Instance;_app;_db;_closeTimer=null;_firebaseConfig={apiKey:"AIzaSyAdRgjvTfK_PhyVj6tBxyxDvduWkT2Mlsw",authDomain:"counter-13744.firebaseapp.com",databaseURL:"https://counter-13744-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"counter-13744",storageBucket:"counter-13744.firebasestorage.app",messagingSenderId:"377800074128",appId:"1:377800074128:web:5cf0541109ad7877d88915",measurementId:"G-ZDQ3JM7W1Z"};constructor(){this._app=(0,V.Wp)(this._firebaseConfig),this._db=(0,D.C3)(this._app)}static GetInstance(){return B._Instance&&B._Instance._app||(B._Instance=new B),B._Instance}async _closeInstance(){B._Instance=null}_resetCloseTimer(){this._closeTimer&&clearTimeout(this._closeTimer),this._closeTimer=setTimeout((()=>{this._closeInstance()}),5e3)}async countUp(e,t){try{const n=`${e}/${t}`,i=(0,D.KR)(this._db,`${n}/count`),o=await(0,D.Jt)(i),a=((o.exists()?o.val():0)||0)+1;await(0,D.hZ)(i,a);const s=new Date,r=s.getTime(),l=(0,D.KR)(this._db,`${n}/transactions/${r}`);await(0,D.hZ)(l,{datetime:s.toISOString(),change:"+1"}),console.log("Count: "+t+": "+a)}finally{this._resetCloseTimer()}}async countDown(e,t){try{const n=`${e}/${t}`,i=(0,D.KR)(this._db,n),o=(await(0,D.Jt)(i)).val()||{count:0,transactions:[]},a=Math.max((o.count||0)-1,0),s=new Date,r=s.getTime();await(0,D.hZ)(i,{count:a,transactions:{...o.transactions||{},[r]:{datetime:s.toISOString(),change:"-1"}}})}finally{this._resetCloseTimer()}}async setCount(e,t,n){try{if(n<0)return void console.error("Count value must be non-negative.");const i=`${e}/${t}`,o=(0,D.KR)(this._db,i),a=(await(0,D.Jt)(o)).val()||{transactions:[]},s=new Date,r=s.getTime();await(0,D.hZ)(o,{count:n,transactions:{...a.transactions||{},[r]:{datetime:s.toISOString(),change:`set ${n}`}}})}finally{this._resetCloseTimer()}}async deleteNamespaceName(e,t){try{const n=`${e}/${t}`,i=(0,D.KR)(this._db,n);await(0,D.TF)(i),console.log(`${e}/${t} has been deleted.`)}finally{this._resetCloseTimer()}}}var Z,$=n(24908);!function(e){e[e.Seconds=0]="Seconds",e[e.Frames=1]="Frames"}(Z||(Z={}));class z extends $.h{_isMobile;_speedlabel;constructor(e,t,n,i=!1){super(e,t,n),this._speedlabel=null,this._isMobile=i,this._mobileRemoval()}_mobileRemoval(){if(this._isMobile){const e=document.getElementById("plrc"),t=document.getElementById("sLa"),n=document.getElementById("sLi");e.removeChild(t),e.removeChild(n)}}_createPlayerControl(e,t,n){const i=e.ownerDocument,o=this._playerContainer=i.createElement("div");o.style.position="relative",o.style.bottom="120px",o.style.left="0",o.style.width="100%",o.style.height="120px",o.style.transform="translateY(50%)",o.style.transition="transform 0.5s",e.appendChild(o),o.onmouseenter=this._onPlayerControlMouseEnter,o.onmouseleave=this._onPlayerControlMouseLeave;{const a=i.createElement("div");a.style.position="absolute",a.style.bottom="0",a.style.left="0",a.style.width="100%",a.style.height="50%",a.style.boxSizing="border-box",a.style.background="linear-gradient(rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.6))",a.style.display="flex",a.style.flexDirection="column",o.appendChild(a);{const o=i.createElement("div");o.style.width="100%",o.style.boxSizing="border-box",o.style.display="flex",o.style.flexDirection="row",o.style.alignItems="center",a.appendChild(o);{const e=this._timeSlider=i.createElement("input");e.style.width="100%",e.style.height="4px",e.style.border="none",e.style.opacity="0.5",e.type="range",e.min="0",e.max=t.animationFrameTimeDuration.toString(),e.oninput=n=>{n.preventDefault(),t.seekAnimation(Number(e.value),!0)};{let n=!1;e.onmousedown=()=>{t.isAnimationPlaying&&(t.pauseAnimation(),n=!0)},e.onmouseup=()=>{n&&(t.playAnimation(),n=!1)}}o.appendChild(e)}const s=i.createElement("div");s.style.width="100%",s.style.flexGrow="1",s.style.padding="0 5px",s.style.boxSizing="border-box",s.style.display="flex",s.style.flexDirection="row",s.style.alignItems="space-between",a.appendChild(s);{const o=i.createElement("div");o.style.flex="1",o.style.display="flex",o.style.flexDirection="row",o.style.alignItems="center",s.appendChild(o);{const e=this._playButton=i.createElement("button");if(e.style.width="40px",e.style.border="none",e.style.backgroundColor="rgba(0, 0, 0, 0)",e.style.color="white",e.style.fontSize="18px",e.innerText=t.isAnimationPlaying?"❚❚":"▶",e.onclick=()=>{t.isAnimationPlaying?t.pauseAnimation():t.playAnimation()},o.appendChild(e),void 0!==n){const e=this._soundButton=i.createElement("button");e.style.width="35px",e.style.border="none",e.style.backgroundColor="rgba(0, 0, 0, 0)",e.style.color="white",e.style.fontSize="20px",e.innerText=n.muted?"🔇":"🔊",e.onclick=()=>{n.muted?n.unmute():n.mute()},o.appendChild(e);const t=this._volumeSlider=i.createElement("input");t.style.width="80px",t.style.height="4px",t.style.border="none",t.style.opacity="0.5",t.type="range",t.min="0",t.max="1",t.step="0.01",t.value=n.volume.toString(),t.oninput=()=>{n.volume=Number(t.value)},o.appendChild(t)}const a=this._currentFrameNumberSpan=i.createElement("span");a.style.width="40px",a.style.textAlign="right",a.style.color="white",a.innerText=this.displayTimeFormat===Z.Seconds?this._getFormattedTime(t.currentTime):Math.floor(t.currentFrameTime).toString(),o.appendChild(a);const s=this._endFrameNumberSpan=i.createElement("span");s.style.width="50px",s.style.textAlign="left",s.style.color="white",s.innerHTML="&nbsp;/&nbsp;"+(this.displayTimeFormat===Z.Seconds?this._getFormattedTime(t.animationDuration):Math.floor(t.animationFrameTimeDuration).toString()),o.appendChild(s)}const a=i.createElement("div");a.style.flex="1",a.style.display="flex",a.style.flexDirection="row",a.style.alignItems="center",a.style.justifyContent="flex-end",a.id="plrc",s.appendChild(a);{const n=this._speedlabel=i.createElement("label");n.style.width="40px",n.style.textAlign="center",n.style.color="white",n.innerText="1.00x",n.id="sLa",a.appendChild(n);const o=this._speedSlider=i.createElement("input");o.style.width="80px",o.style.height="4px",o.style.border="none",o.style.opacity="0.5",o.type="range",o.min="0.07",o.max="1",o.step="0.01",o.id="sLi",o.value=t.timeScale.toString(),o.oninput=()=>{t.timeScale=Number(o.value),n.innerText=t.timeScale.toFixed(2)+"x"},a.appendChild(o);const s=this._fullscreenButton=i.createElement("button");s.style.width="40px",s.style.border="none",s.style.color="white",s.style.backgroundColor="rgba(0, 0, 0, 0)",s.style.fontSize="20px",s.innerHTML='<img src="res/assets/maximise.png" alt="Fullscreen" style="width: 100%; height: 100%;">',s.onclick=()=>{i.fullscreenElement?i.exitFullscreen():e.requestFullscreen()},a.appendChild(s)}}}}}}const j="https://phoshco.github.io/";class H{async build(e,t,n){I.n.OverrideEngineCreateEffect(t);const i=window.location.hostname.includes("localhost"),o=B.GetInstance(),S=await(await fetch(`${j}gi/genshin.json`)).json(),V=await(await fetch(`${j}gi/skins.json`)).json(),D=await(await fetch(`${j}hsr/hsr.json`)).json(),Z=await(await fetch(`${j}hsr/skins.json`)).json(),$=await(await fetch(`${j}zzz/zzz.json`)).json(),H=await(await fetch(`${j}zzz/skins.json`)).json(),G=await(await fetch(`${j}ww/wuwa.json`)).json(),W=await(await fetch(`${j}ww/skins.json`)).json(),F=await(await fetch(`${j}hna/hna.json`)).json(),U=await(await fetch(`${j}hna/skins.json`)).json(),q=L,Y=S,Q=V,J=D,X=Z,K=$,ee=H,te=G,ne=W,ie=F,oe=U;Y.sort(((e,t)=>t.id-e.id)),Q.sort(((e,t)=>t.id-e.id)),X.sort(((e,t)=>t.id-e.id)),ee.sort(((e,t)=>t.id-e.id)),ne.sort(((e,t)=>t.id-e.id)),J.sort(((e,t)=>t.id-e.id)),K.sort(((e,t)=>t.id-e.id)),te.sort(((e,t)=>t.id-e.id)),ie.sort(((e,t)=>t.id-e.id)),oe.sort(((e,t)=>t.id-e.id));const ae=(e,t)=>e.find((e=>e.name===t)),se=[...Y,...J,...K,...te,...ie],re=[...Q,...X,...ee,...ne,...oe],le=new A.A({fields:["name"],storeFields:["id","name"],searchOptions:{fuzzy:.2,prefix:!0}});le.addAll(se);const de=e=>e.toLowerCase().replace(/[^a-z]/g,""),ce=e=>{const t=Math.abs(e).toString();return parseInt(t[0],10)},ue=(e,t)=>e.find((e=>e.id===t)),be=(e,t)=>he(e.filter((e=>e.name===t)),"name",!1);function ge(e,t){return e.filter((e=>t.every((t=>String(e[t.key]).includes(t.value)))))}function he(e,t,n=!0){return e.slice().sort(((e,i)=>{const o=e[t],a=i[t];if("number"==typeof o&&"number"==typeof a)return n?o-a:a-o;{const e=String(o),t=String(a);return n?t.localeCompare(e):e.localeCompare(t)}}))}const pe=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);(0,T.j)();const me=new C.c;me.renderMethod=C.L.DepthWriteAlphaBlending,me.afterBuildSingleMaterial=e=>{e.forceDepthWrite=!0;const t=e.diffuseTexture;t&&(t.hasAlpha=!0,e.useAlphaFromDiffuseTexture=!0),e.transparencyMode===g.i.MATERIAL_ALPHABLEND&&(e.transparencyMode=g.i.MATERIAL_ALPHATESTANDBLEND,e.alphaCutOff=.01)};const fe=new C.c;fe.renderMethod=C.L.DepthWriteAlphaBlending,fe.afterBuildSingleMaterial=e=>{e.forceDepthWrite=!0;const t=e.diffuseTexture;e.specularColor=m.v9.Black(),t&&(t.hasAlpha=!0,e.useAlphaFromDiffuseTexture=!0),e.transparencyMode===g.i.MATERIAL_ALPHABLEND&&(e.transparencyMode=g.i.MATERIAL_ALPHATESTANDBLEND,e.alphaCutOff=.01)};const ye=new w.Z(t);let xe=!0;window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?(xe=!0,ye.clearColor=new m.ov(.001,.001,.001,1)):ye.clearColor=new m.ov(1,1,1,1);const ve=k.vs.CreateFullscreenUI("UI");ve.layer.layerMask=268435456,ve.idealWidth=1e3,ve.idealHeight=1e3,ve.useSmallestIdeal=!0;const we=.09,ke=new x.V("mmdRoot",ye);ke.scaling.scaleInPlace(we),ke.position.z=1;const Oe=new x.V("mmdRoot",ye);Oe.scaling.scaleInPlace(we),Oe.position.z=1;const Ce=new E.A("mmdCamera",new f.Pq(0,10,0),ye);Ce.maxZ=5e3,Ce.minZ=.1,Ce.parent=ke,Ce.layerMask=1;const Pe=new f.Pq(0,10,-20).scaleInPlace(we),Te=new s.Lq("arcRotateCamera",0,0,2.25,new f.Pq(0,10*we,1),ye);Te.maxZ=100,Te.minZ=.1,Te.setPosition(Pe),Te.attachControl(e,!1),Te.inertia=.8,Te.speed=.36,Te.zoomToMouseLocation=!0,Te.wheelDeltaPercentage=.1,Te.upperRadiusLimit=9,Te.lowerRadiusLimit=.09,pe&&(Te.pinchDeltaPercentage=.002),Te.layerMask=1;const Ie=new s.Lq("stillCamera",0,0,2.25,new f.Pq(0,10*we,1),ye);Ie.maxZ=100,Ie.minZ=.1,Ie.setPosition(Pe),Ie.attachControl(e,!1),Ie.inertia=.8,Ie.speed=.36,Ie.zoomToMouseLocation=!0,Ie.wheelDeltaPercentage=.1,Ie.upperRadiusLimit=9,Ie.lowerRadiusLimit=.09,pe&&(Ie.pinchDeltaPercentage=.002),Ie.layerMask=1;const Me=new s.Lq("guiCamera",Math.PI/2+Math.PI/7,Math.PI/2,100,new f.Pq(0,20,0),ye);Me.layerMask=268435456;const Ee=new d.g("HemisphericLight",new f.Pq(0,1,0),ye);Ee.intensity=.4,Ee.specular=new m.v9(0,0,0),Ee.groundColor=new m.v9(1,1,1);const _e=new l.Z("DirectionalLight",new f.Pq(.5,-1,1),ye);_e.intensity=.8,_e.autoCalcShadowZBounds=!1,_e.autoUpdateExtends=!1,_e.shadowMaxZ=20*we,_e.shadowMinZ=-15*we,_e.orthoTop=18*we,_e.orthoBottom=-.27,_e.orthoLeft=-10*we,_e.orthoRight=10*we,_e.shadowOrthoScale=0;const Ae=new c.o(1024,_e,!0);Ae.usePercentageCloserFiltering=!0,Ae.forceBackFacesOnly=!0,Ae.filteringQuality=c.o.QUALITY_MEDIUM,Ae.frustumEdgeFalloff=.1;const Le=new a.okU("particles",2e3,ye);let Re;Le.particleTexture=new p.g("res/assets/flare.png",ye),Le.emitter=f.Pq.Zero(),Le.minEmitBox=new f.Pq(-25,-15,-25),Le.maxEmitBox=new f.Pq(25,10,25),Le.color1=new m.ov(1,1,1,.9),Le.color2=new m.ov(.5,.5,.5,.9),Le.colorDead=new m.ov(.1,.1,.1,0),Le.minSize=.1,Le.maxSize=.4,Le.minLifeTime=.3,Le.maxLifeTime=1.5,Le.emitRate=40,Le.blendMode=a.okU.BLENDMODE_ONEONE,Le.gravity=new f.Pq(0,-9.81,0),Le.direction1=new f.Pq(-7,8,3),Le.direction2=new f.Pq(7,8,-3),Le.minAngularSpeed=0,Le.maxAngularSpeed=Math.PI,Le.minEmitPower=1,Le.maxEmitPower=3,Le.updateSpeed=.005,Le.renderingGroupId=1,Re=new _.j(ye),Re.loggingEnabled=!0,Re.register(ye);let Se=R[Math.floor(Math.random()*R.length)].name,Ne=R.find((e=>e.name===Se)).audioPlayerFile,Ve=R.find((e=>e.name===Se)).camMotionFile,De=R.find((e=>e.name===Se)).modelMotionFile,Be=new M.A(ye);Be.preservesPitch=!1,Be.source=Ne,Re.setAudioPlayer(Be);let Ze=new z(ye,Re,Be,pe);Ze.showPlayerControl();const $e=new N(e);t.loadingScreen=$e,t.displayLoadingUI();let ze=[];const je=(e,t)=>{ze[e]=t,$e.loadingTextDiv.innerHTML="<br/><br/><br/><br/>"+ze.join("<br/><br/>")};let He=[];const Ge=new P.P(ye);Ge.loggingEnabled=!0,He.push(Ge.loadAsync("motion",Ve,(e=>je(0,`Loading camera... ${e.loaded}/${e.total} (${Math.floor(100*e.loaded/e.total)}%)`)))),He.push(Ge.loadAsync("motion",De,(e=>je(1,`Loading motion... ${e.loaded}/${e.total} (${Math.floor(100*e.loaded/e.total)}%)`))));let We,Fe,Ue,qe=!0,Ye="Pyro",Qe=n,Je="Genshin",Xe=Je;if([Ue,Xe]=(e=>{const t=de(e),n=le.search(t);let a,s;if(console.log(n),n.length>0){const e=ce(n[0].id);if(1==e?(a=ae(Y,n[0].name),s="Genshin"):2==e?(a=ae(J,n[0].name),s="HSR"):3==e?(a=ae(K,n[0].name),s="ZZZ"):4==e?(a=ae(te,n[0].name),s="WuWa"):(a=ae(ie,n[0].name),s="HNA"),!i)try{o.countUp("phoshco",a.name.replace(/\./g,"")).catch((e=>{console.error("Failed count: ",e)}))}catch(e){console.error("Unexpected error during count: ",e)}}else a=ae(Y,"Hu Tao"),s="Genshin";return[a,s]})(Qe),Qe=Ue.name,Fe=Ue.id,Ye=Ue.element,"HSR"==Xe?Ye="HSR":"Genshin"!=Xe&&(Ye="Universal"),!(Ue&&Ue.directory&&Ue.pmx))throw new Error("Chosen character or its properties are undefined");He.push((0,u.kS)(j+Ue.directory+"/"+Ue.pmx,ye,{onProgress:e=>je(2,`Loading model... ${e.loaded}/${e.total} (${Math.floor(100*e.loaded/e.total)}%)`),pluginOptions:{mmdmodel:{loggingEnabled:!0,materialBuilder:me}}})),He.push((async()=>{je(3,"Loading physics engine..."),je(3,"Loading physics engine... Done")})()),qe&&(pe||Le.start(),He.push((0,u.kS)("res/stages/GenshinCharacterSphere/CharacterSphere_"+Ye+"V.pmx",ye,{onProgress:e=>je(4,`Loading stage... ${e.loaded}/${e.total} (${Math.floor(100*e.loaded/e.total)}%)`),pluginOptions:{mmdmodel:{loggingEnabled:!0,materialBuilder:fe}}})));let Ke=await Promise.all(He);ye.onAfterRenderObservable.addOnce((()=>t.hideLoadingUI())),ye.activeCameras=[Ie,Me];let et=1.66,tt=69,nt=new f.uq,it=Ke[2];it.addAllToScene();let ot,at=it.rootNodes[0];if(at.parent=ke,qe){const e=Ke[4];e.addAllToScene(),ot=e.rootNodes[0],ot.parent=ke}Ae.addShadowCaster(at);for(const e of at.metadata.meshes)e.receiveShadows=!0;const st=(0,y.km)("ground1",{width:50,height:50,subdivisions:2,updatable:!1},ye);st.receiveShadows=!0;const rt=new h.F("GroundMaterial",ye);rt.diffuseColor=new m.v9(.14,.14,.14),rt.specularPower=128;const lt=rt.reflectionTexture=new a.B2G("MirrorTexture",50,ye,!0);lt.mirrorPlane=a.Zcv.FromPositionAndNormal(st.position,st.getFacetNormal(0).scale(-1)),lt.renderList=[...at.metadata.meshes],lt.level=.45,lt.adaptiveBlurKernel=16;const dt=new O.w("shadowOnly",ye);dt.activeLight=_e,dt.alpha=.4,st.material=dt,st.receiveShadows=!0,st.parent=ke;let ct=Re.createMmdModel(at),ut=Ke[1],bt=ct.runtimeBones.find((e=>"頭"===e.name)),gt=ct.runtimeBones.find((e=>"センター"===e.name)),ht=new f.uq;null!=bt&&null!=gt&&(ct.addAnimation(ut),ct.setAnimation("motion"),ye.onBeforeDrawPhaseObservable.addOnce((()=>{bt.getWorldMatrixToRef(nt).multiplyToRef(at.getWorldMatrix(),nt),nt.getTranslationToRef(Oe.position),et-=Oe.position.y,tt=Oe.position.y})),ye.onBeforeRenderObservable.addOnce((()=>{gt.getWorldMatrixToRef(ht).multiplyToRef(at.getWorldMatrix(),ht),ht.getTranslationToRef(_e.position),_e.position.y-=10*we}))),Ce.addAnimation(Ke[0]),Ce.storeState(),Re.setCamera(Ce),Ce.setAnimation("motion"),ye.onAfterRenderObservable.addOnce((()=>{ye.freezeMaterials(),null!=Pt&&(Pt.isEnabled=!0);const e=ye.meshes;for(let t=0,n=e.length;t<n;++t){const n=e[t];n.freezeWorldMatrix(),n.doNotSyncBoundingInfo=!0,n.isPickable=!1,n.doNotSyncBoundingInfo=!0,n.alwaysSelectAsActiveMesh=!0}if(ye.skipPointerMovePicking=!0,ye.skipPointerDownPicking=!0,ye.skipPointerUpPicking=!0,ye.skipFrustumClipping=!0,ye.blockMaterialDirtyMechanism=!0,Be.mute(),!i)try{o.countUp("phoshco","hoyo").catch((e=>{console.error("Failed count: ",e)}))}catch(e){console.error("Unexpected error during count: ",e)}}));const pt=new v.e("default",!0,ye,[Ce,Te,Ie]);pt.samples=4,pt.chromaticAberrationEnabled=!0,pt.chromaticAberration.aberrationAmount=1,pt.fxaaEnabled=!0,pt.imageProcessing.toneMappingEnabled=!1,pt.imageProcessing.toneMappingType=b.p.TONEMAPPING_ACES,pt.imageProcessing.vignetteWeight=.5,pt.imageProcessing.vignetteStretch=.5,pt.imageProcessing.vignetteColor=new m.ov(0,0,0,0),pt.imageProcessing.vignetteEnabled=!0,pt.depthOfFieldEnabled=!1;let mt=69;const ft=new r.Wd("","res/stages/hoyo.png",ye,!0,new m.ov(1,1,1,1)),yt=new p.g("res/stages/hoyo.png",ye,!0),xt=new p.g("res/stages/hoyo_dark.png",ye,!0);xe&&(ft.texture=xt),new ResizeObserver((()=>{const t=e.width/e.height;t>1?(ft.scale.y=t,ft.scale.x=1,yt.uScale=1,yt.vScale=1/ft.scale.y,yt.uOffset=0,yt.vOffset=.5*(1-yt.vScale),xt.uScale=1,xt.vScale=1/ft.scale.y,xt.uOffset=0,xt.vOffset=.5*(1-xt.vScale)):(ft.scale.y=1,ft.scale.x=1/t,yt.uScale=1/ft.scale.x,yt.vScale=1,yt.uOffset=.5*(1-yt.uScale),yt.vOffset=0,xt.uScale=1/ft.scale.x,xt.vScale=1,xt.uOffset=.5*(1-xt.uScale),xt.vOffset=0)})).observe(e),ft.render;const vt=new k.VJ;vt.widthInPixels=100,vt.heightInPixels=50,vt.left=0,vt.text="lol",vt.fontSize=16,vt.textHorizontalAlignment=k.Ec.HORIZONTAL_ALIGNMENT_LEFT,vt.horizontalAlignment=k.Ec.HORIZONTAL_ALIGNMENT_RIGHT,vt.verticalAlignment=k.Ec.VERTICAL_ALIGNMENT_BOTTOM,vt.color="black",ve.addControl(vt),vt.isVisible=!1;const wt=new k.VJ;wt.widthInPixels=100,wt.heightInPixels=50,wt.left=0,wt.text=`${ye.activeCameras[0].name}`,wt.fontSize=16,wt.textHorizontalAlignment=k.Ec.HORIZONTAL_ALIGNMENT_LEFT,wt.horizontalAlignment=k.Ec.HORIZONTAL_ALIGNMENT_RIGHT,wt.verticalAlignment=k.Ec.VERTICAL_ALIGNMENT_TOP,wt.color="black",ve.addControl(wt),wt.isVisible=!1;const kt=new k.VJ;kt.resizeToFit=!0,kt.top=0,kt.left=0,kt.paddingTop=10,kt.paddingRight=10,kt.text="Double click / tap to change camera mode.",kt.fontSize=pe?25:16,kt.textHorizontalAlignment=k.Ec.HORIZONTAL_ALIGNMENT_CENTER,kt.horizontalAlignment=k.Ec.HORIZONTAL_ALIGNMENT_RIGHT,kt.verticalAlignment=k.Ec.VERTICAL_ALIGNMENT_TOP,kt.color="grey",ve.addControl(kt),kt.isVisible=!0;const Ot=pe?"100px":"50px",Ct=k.$n.CreateImageOnlyButton("but","res/assets/menu.png");let Pt;function Tt(e=!1,t,n){null!=Pt&&Pt.dispose(),Pt=new k.$n,Pt=k.$n.CreateImageOnlyButton("but","res/assets/alter.png"),xe&&(Pt.image.source="res/assets/alter_light.png"),Pt.horizontalAlignment=k.Ec.HORIZONTAL_ALIGNMENT_LEFT,Pt.left=pe?"110px":"60px",Pt.verticalAlignment=k.Ec.VERTICAL_ALIGNMENT_TOP,Pt.top=pe?"110px":"60px",Pt.width=Ot,Pt.height=Ot,Pt.thickness=0,ve.addControl(Pt),Pt.isVisible=e,null!=t&&n&&(Pt.isEnabled=!1,Pt.onPointerClickObservable.addOnce((async function(){Zi(n),It=t,St.isVisible&&(St.isVisible=!1)})))}Ct.horizontalAlignment=k.Ec.HORIZONTAL_ALIGNMENT_LEFT,Ct.left="10px",Ct.verticalAlignment=k.Ec.VERTICAL_ALIGNMENT_TOP,Ct.top="10px",Ct.width=Ot,Ct.height=Ot,Ct.thickness=0,ve.addControl(Ct),Ct.onPointerClickObservable.add((function(){St.isVisible=!St.isVisible,Ct.isVisible&&Ze.hidePlayerControl()}));let It=!1;const Mt=k.$n.CreateImageOnlyButton("but","res/assets/dark_mode.png");function Et(){xe?(ye.clearColor=new m.ov(1,1,1,1),ft.texture=yt,Mt.image.source="res/assets/dark_mode.png",At.image.source="res/assets/note.png",null!=Pt&&(Pt.image.source="res/assets/alter.png"),Lt.color="black"):(ft.texture=xt,Mt.image.source="res/assets/light_mode.png",At.image.source="res/assets/note_light.png",null!=Pt&&(Pt.image.source="res/assets/alter_light.png"),Lt.color="white"),ft.render,xe=!xe}xe&&(Mt.image.source="res/assets/light_mode.png"),Mt.horizontalAlignment=k.Ec.HORIZONTAL_ALIGNMENT_LEFT,Mt.left=pe?"110px":"60px",Mt.verticalAlignment=k.Ec.VERTICAL_ALIGNMENT_TOP,Mt.top="10px",Mt.width=Ot,Mt.height=Ot,Mt.thickness=0,qe&&(Mt.isEnabled=!1),ve.addControl(Mt),Mt.onPointerClickObservable.add(Et);const _t=k.$n.CreateImageOnlyButton("but","res/assets/paimon.png");_t.horizontalAlignment=k.Ec.HORIZONTAL_ALIGNMENT_LEFT,_t.left="10px",_t.verticalAlignment=k.Ec.VERTICAL_ALIGNMENT_TOP,_t.top=pe?"110px":"60px",_t.width=Ot,_t.height=Ot,_t.thickness=0,ve.addControl(_t),"WuWa"==Xe&&(_t.isVisible=!1),_t.onPointerClickObservable.add((function(){qe?(ot.setEnabled(!1),pe||Le.stop(),Mt.isEnabled=!0):"Genshin"!=Je&&"HSR"!=Je&&"ZZZ"!=Je&&"HNA"!=Je||qe||(ot.setEnabled(!0),pe||Le.start(),Mt.isEnabled=!1,xe||Et()),qe=!qe}));const At=k.$n.CreateImageOnlyButton("but","res/assets/note.png");At.horizontalAlignment=k.Ec.HORIZONTAL_ALIGNMENT_LEFT,At.left="10px",At.verticalAlignment=k.Ec.VERTICAL_ALIGNMENT_TOP,At.top=pe?"210px":"110px",At.width=Ot,At.height=Ot,At.thickness=0,ve.addControl(At),xe&&(At.image.source="res/assets/note_light.png"),At.onPointerClickObservable.add((function(){const e=R.findIndex((e=>e.name===Se)),n=(e+1)%R.length;Se=R[n].name,Ne=R.find((e=>e.name===Se)).audioPlayerFile,Ve=R.find((e=>e.name===Se)).camMotionFile,De=R.find((e=>e.name===Se)).modelMotionFile,async function(){Re.pauseAnimation(),Ce.storeState(),Re.seekAnimation(0,!0);const e=Be.volume;Be.dispose(),Be=new M.A(ye),Be.preservesPitch=!1,Be.source=Ne,Re.setAudioPlayer(Be),Ze.dispose(),Be.volume=e,Ze=new z(ye,Re,Be,pe),Ze.showPlayerControl(),ze=[],t.displayLoadingUI(),He=[],He.push(Ge.loadAsync("motion",Ve,(e=>je(0,`Loading camera... ${e.loaded}/${e.total} (${Math.floor(100*e.loaded/e.total)}%)`)))),He.push(Ge.loadAsync("motion",De,(e=>je(1,`Loading motion... ${e.loaded}/${e.total} (${Math.floor(100*e.loaded/e.total)}%)`)))),Ke=await Promise.all(He),ut=Ke[1],ct.addAnimation(ut),ct.setAnimation("motion"),Ce.addAnimation(Ke[0]),Ce.restoreState(),Ce.position.addToRef(f.Pq.TransformCoordinatesFromFloatsToRef(0,0,Ce.distance,zi,Hi),Hi),Re.setCamera(Ce),Ce.setAnimation("motion"),t.hideLoadingUI()}()}));const Lt=new k.VJ;Lt.heightInPixels=pe?100:50,Lt.left=pe?"220px":"120px",Lt.top="10px",Lt.text=Qe,Lt.fontSize=pe?40:20,Lt.textHorizontalAlignment=k.Ec.HORIZONTAL_ALIGNMENT_LEFT,Lt.horizontalAlignment=k.Ec.HORIZONTAL_ALIGNMENT_LEFT,Lt.verticalAlignment=k.Ec.VERTICAL_ALIGNMENT_TOP,Lt.color=xe?"white":"black",ve.addControl(Lt),Lt.isVisible=!0;let Rt=!1;const St=new k.tN("charPanel");St.width="720px",St.height="920px",St.background="rgb(44,48,50)",St.cornerRadius=20,St.thickness=3,St.color="black",ve.addControl(St),St.isVisible=!1,St.onIsVisibleChangedObservable.add((()=>{St.isVisible||(Rt=!1,Ie.attachControl(e,!1),Te.attachControl(e,!1))})),St.onPointerEnterObservable.add((function(){Ie.detachControl(),Te.detachControl(),Rt=!0})),St.onPointerOutObservable.add((function(){Ie.attachControl(e,!1),Te.attachControl(e,!1),Rt=!1}));let Nt,Vt=!1;St.onPointerDownObservable.add((()=>{Vt=!0})),St.onPointerUpObservable.add((()=>{setTimeout((()=>{Vt=!1}),100)}));let Dt=!0;const Bt=new k.tN;Bt.width="700px",Bt.height="900px",Bt.thickness=0,Bt.cornerRadius=15,Bt.background=St.background,St.addControl(Bt);const Zt=new k.Pc;Zt.width="700px",Zt.height="900px",Bt.addControl(Zt);const $t=new k.tN;$t.width="700px",$t.height="150px",$t.thickness=0,Zt.addControl($t);const zt=k.$n.CreateSimpleButton("but","Genshin Impact");zt.fontSize=10,zt.width="175px",zt.height="50px",zt.color="white",zt.background="rgb(64,68,70)",zt.disabledColor=St.background,zt.thickness=0,zt.left=-262.5,zt.top=-50,zt.cornerRadiusX=zt.cornerRadiusY=15,$t.addControl(zt);const jt=k.$n.CreateSimpleButton("but","Honkai: Star Rail");jt.fontSize=10,jt.width="175px",jt.height="50px",jt.color="white",jt.background=St.background,jt.disabledColor=St.background,jt.thickness=0,jt.left=-87.5,jt.top=-50,jt.cornerRadiusX=jt.cornerRadiusY=15,$t.addControl(jt);const Ht=k.$n.CreateSimpleButton("but","Zenless Zone Zero");Ht.fontSize=10,Ht.width="175px",Ht.height="50px",Ht.color="white",Ht.background=St.background,Ht.disabledColor=St.background,Ht.thickness=0,Ht.left=87.5,Ht.top=-50,Ht.cornerRadiusX=Ht.cornerRadiusY=15,$t.addControl(Ht);const Gt=k.$n.CreateSimpleButton("but","Honkai: Nexus Anima");Gt.fontSize=10,Gt.width="175px",Gt.height="50px",Gt.color="white",Gt.background=St.background,Gt.disabledColor=St.background,Gt.thickness=0,Gt.left=262.5,Gt.top=-50,Gt.cornerRadiusX=Gt.cornerRadiusY=15,$t.addControl(Gt);let Wt,Ft=!1;const Ut=[{key:"id",value:"1000"}],qt=[{key:"id",value:"2000"}],Yt=[{key:"id",value:"3000"}],Qt=[{key:"id",value:"4000"}],Jt=[{key:"id",value:"5000"}];let Xt;function Kt(){"Genshin"!=Je&&(zt.background="rgb(64,68,70)","HSR"==Je?(jt.background=St.background,Wn()):"ZZZ"==Je?(Ht.background=St.background,fi()):"WuWa"==Je?Ei():(Gt.background=St.background,ai()),Je="Genshin",Xt=ge(Y,Ut),Xt=he(Xt,Wt,Ft),fn.isVisible=!0,yn.isVisible=!0,Fn.isVisible=!0,Un.isVisible=!0,qn.isVisible=!0,Yn.isVisible=!0,Qn.isVisible=!0,Jn.isVisible=!0,Xn.isVisible=!0,Kn.isVisible=!0,ei.isVisible=!0,ti.isVisible=!0,ni.isVisible=!0,ii.isVisible=!0,pn.isVisible=!0,Vi(Xt))}function en(){"HSR"!=Je&&(jt.background="rgb(64,68,70)","Genshin"==Je?(zt.background=St.background,oi()):"ZZZ"==Je?(Ht.background=St.background,fi()):"WuWa"==Je?Ei():(Gt.background=St.background,ai()),Je="HSR","id"==Wt?mn.image.source="res/assets/release.png":"name"==Wt&&(mn.image.source="res/assets/alphabet.png"),Xt=ge(J,qt),Xt=he(Xt,Wt,Ft),_n.isVisible=!0,An.isVisible=!0,Ln.isVisible=!0,Rn.isVisible=!0,Sn.isVisible=!0,Nn.isVisible=!0,Vn.isVisible=!0,Dn.isVisible=!0,Bn.isVisible=!0,Zn.isVisible=!0,$n.isVisible=!0,zn.isVisible=!0,jn.isVisible=!0,Hn.isVisible=!0,Gn.isVisible=!0,mn.isVisible=!0,xn.isVisible=!0,Vi(Xt))}function tn(){"ZZZ"!=Je&&(Ht.background="rgb(64,68,70)","Genshin"==Je?(zt.background=St.background,oi()):"HSR"==Je?(Wn(),jt.background=St.background):"WuWa"==Je?Ei():(Gt.background=St.background,ai()),Je="ZZZ",Xt=ge(K,Yt),Xt=he(Xt,Wt,Ft),vn.isVisible=!0,wn.isVisible=!0,si.isVisible=!0,ri.isVisible=!0,li.isVisible=!0,di.isVisible=!0,ci.isVisible=!0,ui.isVisible=!0,bi.isVisible=!0,gi.isVisible=!0,hi.isVisible=!0,pi.isVisible=!0,mi.isVisible=!0,pn.isVisible=!0,Vi(Xt))}function nn(){"HNA"!=Je&&(Gt.background="rgb(64,68,70)","Genshin"==Je?(zt.background=St.background,oi()):"HSR"==Je?(Wn(),jt.background=St.background):"ZZZ"==Je?(Ht.background=St.background,fi()):"WuWa"==Je&&Ei(),Je="HNA",Xt=ge(ie,Jt),Xt=he(Xt,Wt,Ft),Cn.isVisible=!0,Pn.isVisible=!0,pn.isVisible=!0,Vi(Xt))}Xt=ge(Y,Ut),Wt="id",zt.onPointerClickObservable.add((function(){Kt()})),jt.onPointerClickObservable.add((function(){en()})),Ht.onPointerClickObservable.add((function(){tn()})),Gt.onPointerClickObservable.add((function(){nn()}));const on=new k.tN;on.width="700px",on.height="50px",on.thickness=0,on.top=0,on.background="rgb(64,68,70)",$t.addControl(on);const an=new k.tN;an.width="700px",an.height="50px",an.thickness=0,an.top=50,an.background="rgb(64,68,70)",an.cornerRadiusW=an.cornerRadiusZ=15,$t.addControl(an);const sn=new k.VJ;sn.width="150px",sn.height="40px",sn.color="white",sn.left=-48,sn.text="",sn.textHorizontalAlignment=k.Ec.HORIZONTAL_ALIGNMENT_LEFT,on.addControl(sn);const rn=new k.tN;rn.width="300px",rn.height="40px",rn.background=St.background,rn.cornerRadius=15,rn.left=-190,rn.thickness=0,an.addControl(rn);const ln=k.$n.CreateImageOnlyButton("but","res/assets/search.png");function dn(){"WuWa"!=Je&&("Genshin"==Je?(zt.background=St.background,oi()):"HSR"==Je?(Wn(),jt.background=St.background):"ZZZ"==Je?(Ht.background=St.background,fi()):"HNA"==Je&&(Gt.background=St.background,ai()),Je="WuWa",Xt=ge(te,Qt),Xt=he(Xt,Wt,Ft),kn.isVisible=!0,On.isVisible=!0,yi.isVisible=!0,xi.isVisible=!0,vi.isVisible=!0,wi.isVisible=!0,ki.isVisible=!0,Oi.isVisible=!0,Ci.isVisible=!0,Pi.isVisible=!0,Ti.isVisible=!0,Ii.isVisible=!0,Mi.isVisible=!0,pn.isVisible=!0,Vi(Xt))}ln.height="40px",ln.width="40px",ln.left=-130,ln.thickness=0,ln.cornerRadius=5,rn.addControl(ln),ln.onPointerClickObservable.add((function(){dn()})),ln.onPointerEnterObservable.add((function(){ln.image.source="res/assets/tacet.png"})),ln.onPointerOutObservable.add((function(){ln.image.source="res/assets/search.png"})),ln.onPointerEnterObservable.add((function(){sn.text="Wuthering Waves"})),ln.onPointerOutObservable.add((function(){sn.text=""}));const cn=new k.Sm;cn.placeholderText="Search all characters...",cn.placeholderColor="rgb(64,68,70)",cn.thickness=0,cn.background=rn.background,cn.width="220px",cn.color="white",cn.focusedBackground=cn.background,cn.promptMessage="Search for character:",rn.addControl(cn);let un,bn="None";cn.onTextChangedObservable.add((function(){""==cn.text?(zt.isEnabled=!0,jt.isEnabled=!0,Ht.isEnabled=!0,hn.isVisible=!0,"Genshin"==bn?Kt():"HSR"==bn?en():"ZZZ"==bn?tn():"WuWa"==bn?dn():"HNA"==bn&&nn(),bn="None"):("None"==bn&&(bn=Je,hn.isVisible=!1,zt.background=St.background,zt.isEnabled=!1,jt.background=St.background,jt.isEnabled=!1,Ht.background=St.background,Ht.isEnabled=!1,oi(),Wn(),fi(),Ei(),ai()),Je="None",un=(e=>{const t=de(e),n=le.search(t),i=[];for(let e=0;e<n.length;e++){const t=ce(n[e].id);1==t?i.push(ae(Y,n[e].name)):2==t?i.push(ae(J,n[e].name)):3==t?i.push(ae(K,n[e].name)):4==t?i.push(ae(te,n[e].name)):i.push(ae(ie,n[e].name))}return i})(cn.text),Vi(un))}));const gn=k.$n.CreateImageOnlyButton("but","res/assets/clear.png");gn.height="40px",gn.width="40px",gn.left=130,gn.thickness=0,gn.cornerRadius=5,rn.addControl(gn),gn.onPointerClickObservable.add((function(){cn.text=""}));const hn=k.$n.CreateImageOnlyButton("but","res/assets/descending.png");hn.height="40px",hn.width="40px",hn.left=-328,hn.thickness=0,on.addControl(hn),hn.onPointerClickObservable.add((()=>{Ft?(hn.image.source="res/assets/descending.png",Xt=he(Xt,Wt,!1),Vi(Xt)):(hn.image.source="res/assets/ascending.png",Xt=he(Xt,Wt,!0),Vi(Xt)),Ft=!Ft}));const pn=k.$n.CreateSimpleButton("but"," Release ");pn.height="40px",pn.width="90px",pn.left=-258,pn.background=St.background,pn.color="white",pn.cornerRadius=15,pn.thickness=0,on.addControl(pn),pn.onPointerClickObservable.add((()=>{null!=pn.textBlock&&("id"==Wt?(Wt="name",mn.image.source="res/assets/release.png",pn.textBlock.text=" Name "):(Wt="id",mn.image.source="res/assets/alphabet.png",pn.textBlock.text=" Release "),Xt=he(Xt,Wt,Ft),Vi(Xt))}));const mn=k.$n.CreateImageOnlyButton("but","res/assets/release.png");mn.height="40px",mn.width="40px",mn.left=-278,mn.thickness=0,on.addControl(mn),mn.onPointerClickObservable.add((()=>{"id"==Wt?(Wt="name",mn.image.source="res/assets/alphabet.png",pn.textBlock.text=" Name "):(Wt="id",mn.image.source="res/assets/release.png",pn.textBlock.text=" Release "),Xt=he(Xt,Wt,Ft),Vi(Xt)})),mn.isVisible=!1;const fn=k.$n.CreateImageOnlyButton("but","res/assets/Genshin/rarity_4.png");fn.height="40px",fn.width="40px",fn.left=-188,fn.thickness=0,fn.cornerRadius=5,on.addControl(fn),fn.onPointerClickObservable.add((function(){const e=Ut.findIndex((e=>"rarity"===e.key));if(-1!==e)"4"==Ut[e].value?(Ut.splice(e,1),fn.background="rgba(0,0,0,0)"):(Ut[e].value="4",yn.background="rgba(0,0,0,0)",fn.background=St.background);else{const e={key:"rarity",value:"4"};Ut.push(e),fn.background=St.background}Xt=ge(Y,Ut),Xt=he(Xt,Wt,Ft),Vi(Xt)}));const yn=k.$n.CreateImageOnlyButton("but","res/assets/Genshin/rarity_5.png");yn.height="40px",yn.width="40px",yn.left=-148,yn.thickness=0,yn.cornerRadius=5,on.addControl(yn),yn.onPointerClickObservable.add((function(){const e=Ut.findIndex((e=>"rarity"===e.key));if(-1!==e)"5"==Ut[e].value?(Ut.splice(e,1),yn.background="rgba(0,0,0,0)"):(Ut[e].value="5",fn.background="rgba(0,0,0,0)",yn.background=St.background);else{const e={key:"rarity",value:"5"};Ut.push(e),yn.background=St.background}Xt=ge(Y,Ut),Xt=he(Xt,Wt,Ft),Vi(Xt)}));const xn=k.$n.CreateImageOnlyButton("but","res/assets/HSR/rarity_5.png");xn.height="40px",xn.width="40px",xn.left=-238,xn.thickness=0,xn.cornerRadius=5,on.addControl(xn),xn.isVisible=!1,xn.onPointerClickObservable.add((function(){const e=qt.findIndex((e=>"rarity"===e.key));if(-1!==e)"4"==qt[e].value?(qt.splice(e,1),xn.background="rgba(0,0,0,0)",xn.image.source="res/assets/HSR/rarity_5.png"):(qt[e].value="4",xn.background=St.background,xn.image.source="res/assets/HSR/rarity_4.png");else{const e={key:"rarity",value:"5"};qt.push(e),xn.background=St.background}Xt=ge(J,qt),Xt=he(Xt,Wt,Ft),Vi(Xt)}));const vn=k.$n.CreateImageOnlyButton("but","res/assets/ZZZ/Icon_AgentRank_A.png");vn.height="40px",vn.width="40px",vn.left=-188,vn.thickness=0,vn.cornerRadius=5,on.addControl(vn),vn.isVisible=!1,vn.onPointerClickObservable.add((function(){const e=Yt.findIndex((e=>"rarity"===e.key));if(-1!==e)"4"==Yt[e].value?(Yt.splice(e,1),vn.background="rgba(0,0,0,0)"):(Yt[e].value="4",wn.background="rgba(0,0,0,0)",vn.background=St.background);else{const e={key:"rarity",value:"4"};Yt.push(e),vn.background=St.background}Xt=ge(K,Yt),Xt=he(Xt,Wt,Ft),Vi(Xt)}));const wn=k.$n.CreateImageOnlyButton("but","res/assets/ZZZ/Icon_AgentRank_S.png");wn.height="40px",wn.width="40px",wn.left=-148,wn.thickness=0,wn.cornerRadius=5,on.addControl(wn),wn.isVisible=!1,wn.onPointerClickObservable.add((function(){const e=Yt.findIndex((e=>"rarity"===e.key));if(-1!==e)"5"==Yt[e].value?(Yt.splice(e,1),wn.background="rgba(0,0,0,0)"):(Yt[e].value="5",vn.background="rgba(0,0,0,0)",wn.background=St.background);else{const e={key:"rarity",value:"5"};Yt.push(e),wn.background=St.background}Xt=ge(K,Yt),Xt=he(Xt,Wt,Ft),Vi(Xt)}));const kn=k.$n.CreateImageOnlyButton("but","res/assets/WuWa/rarity_4.png");kn.height="40px",kn.width="40px",kn.left=-188,kn.thickness=0,kn.cornerRadius=5,on.addControl(kn),kn.isVisible=!1,kn.onPointerClickObservable.add((function(){const e=Qt.findIndex((e=>"rarity"===e.key));if(-1!==e)"4"==Qt[e].value?(Qt.splice(e,1),kn.background="rgba(0,0,0,0)"):(Qt[e].value="4",On.background="rgba(0,0,0,0)",kn.background=St.background);else{const e={key:"rarity",value:"4"};Qt.push(e),kn.background=St.background}Xt=ge(te,Qt),Xt=he(Xt,Wt,Ft),Vi(Xt)}));const On=k.$n.CreateImageOnlyButton("but","res/assets/WuWa/rarity_5.png");On.height="40px",On.width="40px",On.left=-148,On.thickness=0,On.cornerRadius=5,on.addControl(On),On.isVisible=!1,On.onPointerClickObservable.add((function(){const e=Qt.findIndex((e=>"rarity"===e.key));if(-1!==e)"5"==Qt[e].value?(Qt.splice(e,1),On.background="rgba(0,0,0,0)"):(Qt[e].value="5",kn.background="rgba(0,0,0,0)",On.background=St.background);else{const e={key:"rarity",value:"5"};Qt.push(e),On.background=St.background}Xt=ge(te,Qt),Xt=he(Xt,Wt,Ft),Vi(Xt)}));const Cn=k.$n.CreateImageOnlyButton("but","res/assets/HNA/rarity_4.png");Cn.height="40px",Cn.width="40px",Cn.left=-188,Cn.thickness=0,Cn.cornerRadius=5,on.addControl(Cn),Cn.isVisible=!1,Cn.onPointerClickObservable.add((function(){const e=Jt.findIndex((e=>"rarity"===e.key));if(-1!==e)"4"==Jt[e].value?(Jt.splice(e,1),Cn.background="rgba(0,0,0,0)"):(Jt[e].value="4",Pn.background="rgba(0,0,0,0)",Cn.background=St.background);else{const e={key:"rarity",value:"4"};Jt.push(e),Cn.background=St.background}Xt=ge(ie,Jt),Xt=he(Xt,Wt,Ft),Vi(Xt)}));const Pn=k.$n.CreateImageOnlyButton("but","res/assets/HNA/rarity_5.png");function Tn(e,t,n){const i=Ut.findIndex((e=>e.key===n));if(-1!==i)Ut[i].value==t?(Ut.splice(i,1),e.background="rgba(0,0,0,0)"):(Ut[i].value=t,"element"==n.toString()?(Fn.background="rgba(0,0,0,0)",Un.background="rgba(0,0,0,0)",qn.background="rgba(0,0,0,0)",Yn.background="rgba(0,0,0,0)",Qn.background="rgba(0,0,0,0)",Jn.background="rgba(0,0,0,0)",Xn.background="rgba(0,0,0,0)"):(Kn.background="rgba(0,0,0,0)",ei.background="rgba(0,0,0,0)",ti.background="rgba(0,0,0,0)",ni.background="rgba(0,0,0,0)",ii.background="rgba(0,0,0,0)"),e.background=St.background);else{const i={key:n,value:t};Ut.push(i),e.background=St.background}Xt=ge(Y,Ut),Xt=he(Xt,Wt,Ft),Vi(Xt)}function In(e,t,n){const i=qt.findIndex((e=>e.key===n));if(-1!==i)qt[i].value==t?(qt.splice(i,1),e.background="rgba(0,0,0,0)"):(qt[i].value=t,"element"==n.toString()?(_n.background="rgba(0,0,0,0)",An.background="rgba(0,0,0,0)",Ln.background="rgba(0,0,0,0)",Rn.background="rgba(0,0,0,0)",Sn.background="rgba(0,0,0,0)",Nn.background="rgba(0,0,0,0)",Vn.background="rgba(0,0,0,0)"):(Dn.background="rgba(0,0,0,0)",Bn.background="rgba(0,0,0,0)",Zn.background="rgba(0,0,0,0)",$n.background="rgba(0,0,0,0)",zn.background="rgba(0,0,0,0)",jn.background="rgba(0,0,0,0)",Hn.background="rgba(0,0,0,0)",Gn.background="rgba(0,0,0,0)"),e.background=St.background);else{const i={key:n,value:t};qt.push(i),e.background=St.background}Xt=ge(J,qt),Xt=he(Xt,Wt,Ft),Vi(Xt)}function Mn(e,t,n){const i=Yt.findIndex((e=>e.key===n));if(-1!==i)Yt[i].value==t?(Yt.splice(i,1),e.background="rgba(0,0,0,0)"):(Yt[i].value=t,"element"==n.toString()?(si.background="rgba(0,0,0,0)",ri.background="rgba(0,0,0,0)",li.background="rgba(0,0,0,0)",di.background="rgba(0,0,0,0)",ci.background="rgba(0,0,0,0)"):(ui.background="rgba(0,0,0,0)",bi.background="rgba(0,0,0,0)",gi.background="rgba(0,0,0,0)",hi.background="rgba(0,0,0,0)",pi.background="rgba(0,0,0,0)",mi.background="rgba(0,0,0,0)"),e.background=St.background);else{const i={key:n,value:t};Yt.push(i),e.background=St.background}Xt=ge(K,Yt),Xt=he(Xt,Wt,Ft),Vi(Xt)}function En(e,t,n){const i=Qt.findIndex((e=>e.key===n));if(-1!==i)Qt[i].value==t?(Qt.splice(i,1),e.background="rgba(0,0,0,0)"):(Qt[i].value=t,"element"==n.toString()?(yi.background="rgba(0,0,0,0)",xi.background="rgba(0,0,0,0)",vi.background="rgba(0,0,0,0)",wi.background="rgba(0,0,0,0)",ki.background="rgba(0,0,0,0)",Oi.background="rgba(0,0,0,0)"):(Ci.background="rgba(0,0,0,0)",Pi.background="rgba(0,0,0,0)",Ti.background="rgba(0,0,0,0)",Ii.background="rgba(0,0,0,0)",Mi.background="rgba(0,0,0,0)"),e.background=St.background);else{const i={key:n,value:t};Qt.push(i),e.background=St.background}Xt=ge(te,Qt),Xt=he(Xt,Wt,Ft),Vi(Xt)}Pn.height="40px",Pn.width="40px",Pn.left=-148,Pn.thickness=0,Pn.cornerRadius=5,on.addControl(Pn),Pn.isVisible=!1,Pn.onPointerClickObservable.add((function(){const e=Jt.findIndex((e=>"rarity"===e.key));if(-1!==e)"5"==Jt[e].value?(Jt.splice(e,1),Pn.background="rgba(0,0,0,0)"):(Jt[e].value="5",Cn.background="rgba(0,0,0,0)",Pn.background=St.background);else{const e={key:"rarity",value:"5"};Jt.push(e),Pn.background=St.background}Xt=ge(ie,Jt),Xt=he(Xt,Wt,Ft),Vi(Xt)}));const _n=k.$n.CreateImageOnlyButton("but","res/assets/HSR/element_fire.png");_n.height="40px",_n.width="40px",_n.left=52,_n.thickness=0,_n.cornerRadius=5,_n.isVisible=!1,on.addControl(_n),_n.onPointerClickObservable.add((function(){In(_n,"Fire","element")})),_n.onPointerEnterObservable.add((function(){sn.text="Fire"})),_n.onPointerOutObservable.add((function(){sn.text=""}));const An=k.$n.CreateImageOnlyButton("but","res/assets/HSR/element_ice.png");An.height="40px",An.width="40px",An.left=92,An.thickness=0,An.cornerRadius=5,An.isVisible=!1,on.addControl(An),An.onPointerClickObservable.add((function(){In(An,"Ice","element")})),An.onPointerEnterObservable.add((function(){sn.text="Ice"})),An.onPointerOutObservable.add((function(){sn.text=""}));const Ln=k.$n.CreateImageOnlyButton("but","res/assets/HSR/element_imaginary.png");Ln.height="40px",Ln.width="40px",Ln.left=132,Ln.thickness=0,Ln.cornerRadius=5,Ln.isVisible=!1,on.addControl(Ln),Ln.onPointerClickObservable.add((function(){In(Ln,"Imaginary","element")})),Ln.onPointerEnterObservable.add((function(){sn.text="Imaginary"})),Ln.onPointerOutObservable.add((function(){sn.text=""}));const Rn=k.$n.CreateImageOnlyButton("but","res/assets/HSR/element_lightning.png");Rn.height="40px",Rn.width="40px",Rn.left=172,Rn.thickness=0,Rn.cornerRadius=5,Rn.isVisible=!1,on.addControl(Rn),Rn.onPointerClickObservable.add((function(){In(Rn,"Lightning","element")})),Rn.onPointerEnterObservable.add((function(){sn.text="Lightning"})),Rn.onPointerOutObservable.add((function(){sn.text=""}));const Sn=k.$n.CreateImageOnlyButton("but","res/assets/HSR/element_physical.png");Sn.height="40px",Sn.width="40px",Sn.left=212,Sn.thickness=0,Sn.cornerRadius=5,Sn.isVisible=!1,on.addControl(Sn),Sn.onPointerClickObservable.add((function(){In(Sn,"Physical","element")})),Sn.onPointerEnterObservable.add((function(){sn.text="Physical"})),Sn.onPointerOutObservable.add((function(){sn.text=""}));const Nn=k.$n.CreateImageOnlyButton("but","res/assets/HSR/element_quantum.png");Nn.height="40px",Nn.width="40px",Nn.left=252,Nn.thickness=0,Nn.cornerRadius=5,Nn.isVisible=!1,on.addControl(Nn),Nn.onPointerClickObservable.add((function(){In(Nn,"Quantum","element")})),Nn.onPointerEnterObservable.add((function(){sn.text="Quantum"})),Nn.onPointerOutObservable.add((function(){sn.text=""}));const Vn=k.$n.CreateImageOnlyButton("but","res/assets/HSR/element_wind.png");Vn.height="40px",Vn.width="40px",Vn.left=292,Vn.thickness=0,Vn.cornerRadius=5,Vn.isVisible=!1,on.addControl(Vn),Vn.onPointerClickObservable.add((function(){In(Vn,"Wind","element")})),Vn.onPointerEnterObservable.add((function(){sn.text="Wind"})),Vn.onPointerOutObservable.add((function(){sn.text=""}));const Dn=k.$n.CreateImageOnlyButton("but","res/assets/HSR/path_the_abundance.png");Dn.height="40px",Dn.width="40px",Dn.left=12,Dn.thickness=0,Dn.cornerRadius=5,Dn.isVisible=!1,an.addControl(Dn),Dn.onPointerClickObservable.add((function(){In(Dn,"Abundance","weaponType")})),Dn.onPointerEnterObservable.add((function(){sn.text="Abundance"})),Dn.onPointerOutObservable.add((function(){sn.text=""}));const Bn=k.$n.CreateImageOnlyButton("but","res/assets/HSR/path_the_destruction.png");Bn.height="40px",Bn.width="40px",Bn.left=52,Bn.thickness=0,Bn.cornerRadius=5,Bn.isVisible=!1,an.addControl(Bn),Bn.onPointerClickObservable.add((function(){In(Bn,"Destruction","weaponType")})),Bn.onPointerEnterObservable.add((function(){sn.text="Destruction"})),Bn.onPointerOutObservable.add((function(){sn.text=""}));const Zn=k.$n.CreateImageOnlyButton("but","res/assets/HSR/path_the_erudition.png");Zn.height="40px",Zn.width="40px",Zn.left=92,Zn.thickness=0,Zn.cornerRadius=5,Zn.isVisible=!1,an.addControl(Zn),Zn.onPointerClickObservable.add((function(){In(Zn,"Erudition","weaponType")})),Zn.onPointerEnterObservable.add((function(){sn.text="Erudition"})),Zn.onPointerOutObservable.add((function(){sn.text=""}));const $n=k.$n.CreateImageOnlyButton("but","res/assets/HSR/path_the_harmony.png");$n.height="40px",$n.width="40px",$n.left=132,$n.thickness=0,$n.cornerRadius=5,$n.isVisible=!1,an.addControl($n),$n.onPointerClickObservable.add((function(){In($n,"Harmony","weaponType")})),$n.onPointerEnterObservable.add((function(){sn.text="Harmony"})),$n.onPointerOutObservable.add((function(){sn.text=""}));const zn=k.$n.CreateImageOnlyButton("but","res/assets/HSR/path_the_hunt.png");zn.height="40px",zn.width="40px",zn.left=172,zn.thickness=0,zn.cornerRadius=5,zn.isVisible=!1,an.addControl(zn),zn.onPointerClickObservable.add((function(){In(zn,"Hunt","weaponType")})),zn.onPointerEnterObservable.add((function(){sn.text="Hunt"})),zn.onPointerOutObservable.add((function(){sn.text=""}));const jn=k.$n.CreateImageOnlyButton("but","res/assets/HSR/path_the_nihility.png");jn.height="40px",jn.width="40px",jn.left=212,jn.thickness=0,jn.cornerRadius=5,jn.isVisible=!1,an.addControl(jn),jn.onPointerClickObservable.add((function(){In(jn,"Nihility","weaponType")})),jn.onPointerEnterObservable.add((function(){sn.text="Nihility"})),jn.onPointerOutObservable.add((function(){sn.text=""}));const Hn=k.$n.CreateImageOnlyButton("but","res/assets/HSR/path_the_preservation.png");Hn.height="40px",Hn.width="40px",Hn.left=252,Hn.thickness=0,Hn.cornerRadius=5,Hn.isVisible=!1,an.addControl(Hn),Hn.onPointerClickObservable.add((function(){In(Hn,"Preservation","weaponType")})),Hn.onPointerEnterObservable.add((function(){sn.text="Preservation"})),Hn.onPointerOutObservable.add((function(){sn.text=""}));const Gn=k.$n.CreateImageOnlyButton("but","res/assets/HSR/path_the_remembrance.png");function Wn(){_n.isVisible=!1,An.isVisible=!1,Ln.isVisible=!1,Rn.isVisible=!1,Sn.isVisible=!1,Nn.isVisible=!1,Vn.isVisible=!1,Dn.isVisible=!1,Bn.isVisible=!1,Zn.isVisible=!1,$n.isVisible=!1,zn.isVisible=!1,jn.isVisible=!1,Hn.isVisible=!1,Gn.isVisible=!1,mn.isVisible=!1,xn.isVisible=!1}Gn.height="40px",Gn.width="40px",Gn.left=292,Gn.thickness=0,Gn.cornerRadius=5,Gn.isVisible=!1,an.addControl(Gn),Gn.onPointerClickObservable.add((function(){In(Gn,"Remembrance","weaponType")})),Gn.onPointerEnterObservable.add((function(){sn.text="Remembrance"})),Gn.onPointerOutObservable.add((function(){sn.text=""}));const Fn=k.$n.CreateImageOnlyButton("but","res/assets/Genshin/element_anemo.png");Fn.height="40px",Fn.width="40px",Fn.left=52,Fn.thickness=0,Fn.cornerRadius=5,on.addControl(Fn),Fn.onPointerClickObservable.add((function(){Tn(Fn,"Anemo","element")})),Fn.onPointerEnterObservable.add((function(){sn.text="Anemo"})),Fn.onPointerOutObservable.add((function(){sn.text=""}));const Un=k.$n.CreateImageOnlyButton("but","res/assets/Genshin/element_geo.png");Un.height="40px",Un.width="40px",Un.left=92,Un.thickness=0,Un.cornerRadius=5,on.addControl(Un),Un.onPointerClickObservable.add((function(){Tn(Un,"Geo","element")})),Un.onPointerEnterObservable.add((function(){sn.text="Geo"})),Un.onPointerOutObservable.add((function(){sn.text=""}));const qn=k.$n.CreateImageOnlyButton("but","res/assets/Genshin/element_electro.png");qn.height="40px",qn.width="40px",qn.left=132,qn.thickness=0,qn.cornerRadius=5,on.addControl(qn),qn.onPointerClickObservable.add((function(){Tn(qn,"Electro","element")})),qn.onPointerEnterObservable.add((function(){sn.text="Electro"})),qn.onPointerOutObservable.add((function(){sn.text=""}));const Yn=k.$n.CreateImageOnlyButton("but","res/assets/Genshin/element_dendro.png");Yn.height="40px",Yn.width="40px",Yn.left=172,Yn.thickness=0,Yn.cornerRadius=5,on.addControl(Yn),Yn.onPointerClickObservable.add((function(){Tn(Yn,"Dendro","element")})),Yn.onPointerEnterObservable.add((function(){sn.text="Dendro"})),Yn.onPointerOutObservable.add((function(){sn.text=""}));const Qn=k.$n.CreateImageOnlyButton("but","res/assets/Genshin/element_hydro.png");Qn.height="40px",Qn.width="40px",Qn.left=212,Qn.thickness=0,Qn.cornerRadius=5,on.addControl(Qn),Qn.onPointerClickObservable.add((function(){Tn(Qn,"Hydro","element")})),Qn.onPointerEnterObservable.add((function(){sn.text="Hydro"})),Qn.onPointerOutObservable.add((function(){sn.text=""}));const Jn=k.$n.CreateImageOnlyButton("but","res/assets/Genshin/element_pyro.png");Jn.height="40px",Jn.width="40px",Jn.left=252,Jn.thickness=0,Jn.cornerRadius=5,on.addControl(Jn),Jn.onPointerClickObservable.add((function(){Tn(Jn,"Pyro","element")})),Jn.onPointerEnterObservable.add((function(){sn.text="Pyro"})),Jn.onPointerOutObservable.add((function(){sn.text=""}));const Xn=k.$n.CreateImageOnlyButton("but","res/assets/Genshin/element_cryo.png");Xn.height="40px",Xn.width="40px",Xn.left=292,Xn.thickness=0,Xn.cornerRadius=5,on.addControl(Xn),Xn.onPointerClickObservable.add((function(){Tn(Xn,"Cryo","element")})),Xn.onPointerEnterObservable.add((function(){sn.text="Cryo"})),Xn.onPointerOutObservable.add((function(){sn.text=""}));const Kn=k.$n.CreateImageOnlyButton("but","res/assets/Genshin/Sword.png");Kn.height="40px",Kn.width="40px",Kn.left=92,Kn.thickness=0,Kn.cornerRadius=5,an.addControl(Kn),Kn.onPointerClickObservable.add((function(){Tn(Kn,"Sword","weaponType")})),Kn.onPointerEnterObservable.add((function(){sn.text="Sword"})),Kn.onPointerOutObservable.add((function(){sn.text=""}));const ei=k.$n.CreateImageOnlyButton("but","res/assets/Genshin/Catalyst.png");ei.height="40px",ei.width="40px",ei.left=132,ei.thickness=0,ei.cornerRadius=5,an.addControl(ei),ei.onPointerClickObservable.add((function(){Tn(ei,"Catalyst","weaponType")})),ei.onPointerEnterObservable.add((function(){sn.text="Catalyst"})),ei.onPointerOutObservable.add((function(){sn.text=""}));const ti=k.$n.CreateImageOnlyButton("but","res/assets/Genshin/Bow.png");ti.height="40px",ti.width="40px",ti.left=172,ti.thickness=0,ti.cornerRadius=5,an.addControl(ti),ti.onPointerClickObservable.add((function(){Tn(ti,"Bow","weaponType")})),ti.onPointerEnterObservable.add((function(){sn.text="Bow"})),ti.onPointerOutObservable.add((function(){sn.text=""}));const ni=k.$n.CreateImageOnlyButton("but","res/assets/Genshin/Claymore.png");ni.height="40px",ni.width="40px",ni.left=212,ni.thickness=0,ni.cornerRadius=5,an.addControl(ni),ni.onPointerClickObservable.add((function(){Tn(ni,"Claymore","weaponType")})),ni.onPointerEnterObservable.add((function(){sn.text="Claymore"})),ni.onPointerOutObservable.add((function(){sn.text=""}));const ii=k.$n.CreateImageOnlyButton("but","res/assets/Genshin/Pole.png");function oi(){fn.isVisible=!1,yn.isVisible=!1,Fn.isVisible=!1,Un.isVisible=!1,qn.isVisible=!1,Yn.isVisible=!1,Qn.isVisible=!1,Jn.isVisible=!1,Xn.isVisible=!1,Kn.isVisible=!1,ei.isVisible=!1,ti.isVisible=!1,ni.isVisible=!1,ii.isVisible=!1,pn.isVisible=!1}function ai(){Cn.isVisible=!1,Pn.isVisible=!1,pn.isVisible=!1}ii.height="40px",ii.width="40px",ii.left=252,ii.thickness=0,ii.cornerRadius=5,an.addControl(ii),ii.onPointerClickObservable.add((function(){Tn(ii,"Polearm","weaponType")})),ii.onPointerEnterObservable.add((function(){sn.text="Polearm"})),ii.onPointerOutObservable.add((function(){sn.text=""}));const si=k.$n.CreateImageOnlyButton("but","res/assets/ZZZ/Icon_Electric.png");si.height="40px",si.width="40px",si.left=92,si.thickness=0,si.cornerRadius=5,si.isVisible=!1,on.addControl(si),si.onPointerClickObservable.add((function(){Mn(si,"Electric","element")})),si.onPointerEnterObservable.add((function(){sn.text="Electric"})),si.onPointerOutObservable.add((function(){sn.text=""}));const ri=k.$n.CreateImageOnlyButton("but","res/assets/ZZZ/Icon_Ether.png");ri.height="40px",ri.width="40px",ri.left=132,ri.thickness=0,ri.cornerRadius=5,ri.isVisible=!1,on.addControl(ri),ri.onPointerClickObservable.add((function(){Mn(ri,"Ether","element")})),ri.onPointerEnterObservable.add((function(){sn.text="Ether"})),ri.onPointerOutObservable.add((function(){sn.text=""}));const li=k.$n.CreateImageOnlyButton("but","res/assets/ZZZ/Icon_Fire.png");li.height="40px",li.width="40px",li.left=172,li.thickness=0,li.cornerRadius=5,li.isVisible=!1,on.addControl(li),li.onPointerClickObservable.add((function(){Mn(li,"Fire","element")})),li.onPointerEnterObservable.add((function(){sn.text="Fire"})),li.onPointerOutObservable.add((function(){sn.text=""}));const di=k.$n.CreateImageOnlyButton("but","res/assets/ZZZ/Icon_Ice.png");di.height="40px",di.width="40px",di.left=212,di.thickness=0,di.cornerRadius=5,di.isVisible=!1,on.addControl(di),di.onPointerClickObservable.add((function(){Mn(di,"Ice","element")})),di.onPointerEnterObservable.add((function(){sn.text="Ice"})),di.onPointerOutObservable.add((function(){sn.text=""}));const ci=k.$n.CreateImageOnlyButton("but","res/assets/ZZZ/Icon_Physical.png");ci.height="40px",ci.width="40px",ci.left=252,ci.thickness=0,ci.cornerRadius=5,ci.isVisible=!1,on.addControl(ci),ci.onPointerClickObservable.add((function(){Mn(ci,"Physical","element")})),ci.onPointerEnterObservable.add((function(){sn.text="Physical"})),ci.onPointerOutObservable.add((function(){sn.text=""}));const ui=k.$n.CreateImageOnlyButton("but","res/assets/ZZZ/Icon_Anomaly.png");ui.height="40px",ui.width="40px",ui.left=92,ui.thickness=0,ui.cornerRadius=5,ui.isVisible=!1,an.addControl(ui),ui.onPointerClickObservable.add((function(){Mn(ui,"Anomaly","weaponType")})),ui.onPointerEnterObservable.add((function(){sn.text="Anomaly"})),ui.onPointerOutObservable.add((function(){sn.text=""}));const bi=k.$n.CreateImageOnlyButton("but","res/assets/ZZZ/Icon_Attack.png");bi.height="40px",bi.width="40px",bi.left=132,bi.thickness=0,bi.cornerRadius=5,bi.isVisible=!1,an.addControl(bi),bi.onPointerClickObservable.add((function(){Mn(bi,"Attack","weaponType")})),bi.onPointerEnterObservable.add((function(){sn.text="Attack"})),bi.onPointerOutObservable.add((function(){sn.text=""}));const gi=k.$n.CreateImageOnlyButton("but","res/assets/ZZZ/Icon_Defense.png");gi.height="40px",gi.width="40px",gi.left=172,gi.thickness=0,gi.cornerRadius=5,gi.isVisible=!1,an.addControl(gi),gi.onPointerClickObservable.add((function(){Mn(gi,"Defense","weaponType")})),gi.onPointerEnterObservable.add((function(){sn.text="Defense"})),gi.onPointerOutObservable.add((function(){sn.text=""}));const hi=k.$n.CreateImageOnlyButton("but","res/assets/ZZZ/Icon_Stun.png");hi.height="40px",hi.width="40px",hi.left=212,hi.thickness=0,hi.cornerRadius=5,hi.isVisible=!1,an.addControl(hi),hi.onPointerClickObservable.add((function(){Mn(hi,"Stun","weaponType")})),hi.onPointerEnterObservable.add((function(){sn.text="Stun"})),hi.onPointerOutObservable.add((function(){sn.text=""}));const pi=k.$n.CreateImageOnlyButton("but","res/assets/ZZZ/Icon_Support.png");pi.height="40px",pi.width="40px",pi.left=252,pi.thickness=0,pi.cornerRadius=5,pi.isVisible=!1,an.addControl(pi),pi.onPointerClickObservable.add((function(){Mn(pi,"Support","weaponType")})),pi.onPointerEnterObservable.add((function(){sn.text="Support"})),pi.onPointerOutObservable.add((function(){sn.text=""}));const mi=k.$n.CreateImageOnlyButton("but","res/assets/ZZZ/Icon_Rupture.png");function fi(){vn.isVisible=!1,wn.isVisible=!1,si.isVisible=!1,ri.isVisible=!1,li.isVisible=!1,di.isVisible=!1,ci.isVisible=!1,ui.isVisible=!1,bi.isVisible=!1,gi.isVisible=!1,hi.isVisible=!1,pi.isVisible=!1,mi.isVisible=!1,pn.isVisible=!1}mi.height="40px",mi.width="40px",mi.left=292,mi.thickness=0,mi.cornerRadius=5,mi.isVisible=!1,an.addControl(mi),mi.onPointerClickObservable.add((function(){Mn(mi,"Rupture","weaponType")})),mi.onPointerEnterObservable.add((function(){sn.text="Rupture"})),mi.onPointerOutObservable.add((function(){sn.text=""}));const yi=k.$n.CreateImageOnlyButton("but","res/assets/WuWa/Aero.png");yi.height="40px",yi.width="40px",yi.left=52,yi.thickness=0,yi.cornerRadius=5,on.addControl(yi),yi.onPointerClickObservable.add((function(){En(yi,"Aero","element")})),yi.onPointerEnterObservable.add((function(){sn.text="Aero"})),yi.onPointerOutObservable.add((function(){sn.text=""}));const xi=k.$n.CreateImageOnlyButton("but","res/assets/WuWa/Spectro.png");xi.height="40px",xi.width="40px",xi.left=92,xi.thickness=0,xi.cornerRadius=5,on.addControl(xi),xi.onPointerClickObservable.add((function(){En(xi,"Spectro","element")})),xi.onPointerEnterObservable.add((function(){sn.text="Spectro"})),xi.onPointerOutObservable.add((function(){sn.text=""}));const vi=k.$n.CreateImageOnlyButton("but","res/assets/WuWa/Electro.png");vi.height="40px",vi.width="40px",vi.left=132,vi.thickness=0,vi.cornerRadius=5,on.addControl(vi),vi.onPointerClickObservable.add((function(){En(vi,"Electro","element")})),vi.onPointerEnterObservable.add((function(){sn.text="Electro"})),vi.onPointerOutObservable.add((function(){sn.text=""}));const wi=k.$n.CreateImageOnlyButton("but","res/assets/WuWa/Havoc.png");wi.height="40px",wi.width="40px",wi.left=172,wi.thickness=0,wi.cornerRadius=5,on.addControl(wi),wi.onPointerClickObservable.add((function(){En(wi,"Havoc","element")})),wi.onPointerEnterObservable.add((function(){sn.text="Havoc"})),wi.onPointerOutObservable.add((function(){sn.text=""}));const ki=k.$n.CreateImageOnlyButton("but","res/assets/WuWa/Glacio.png");ki.height="40px",ki.width="40px",ki.left=212,ki.thickness=0,ki.cornerRadius=5,on.addControl(ki),ki.onPointerClickObservable.add((function(){En(ki,"Glacio","element")})),ki.onPointerEnterObservable.add((function(){sn.text="Glacio"})),ki.onPointerOutObservable.add((function(){sn.text=""}));const Oi=k.$n.CreateImageOnlyButton("but","res/assets/WuWa/Fusion.png");Oi.height="40px",Oi.width="40px",Oi.left=252,Oi.thickness=0,Oi.cornerRadius=5,on.addControl(Oi),Oi.onPointerClickObservable.add((function(){En(Oi,"Fusion","element")})),Oi.onPointerEnterObservable.add((function(){sn.text="Fusion"})),Oi.onPointerOutObservable.add((function(){sn.text=""}));const Ci=k.$n.CreateImageOnlyButton("but","res/assets/WuWa/Sword_Icon.png");Ci.height="40px",Ci.width="40px",Ci.left=92,Ci.thickness=0,Ci.cornerRadius=5,an.addControl(Ci),Ci.onPointerClickObservable.add((function(){En(Ci,"Sword","weaponType")})),Ci.onPointerEnterObservable.add((function(){sn.text="Sword"})),Ci.onPointerOutObservable.add((function(){sn.text=""}));const Pi=k.$n.CreateImageOnlyButton("but","res/assets/WuWa/Rectifier_Icon.png");Pi.height="40px",Pi.width="40px",Pi.left=132,Pi.thickness=0,Pi.cornerRadius=5,an.addControl(Pi),Pi.onPointerClickObservable.add((function(){En(Pi,"Rectifier","weaponType")})),Pi.onPointerEnterObservable.add((function(){sn.text="Rectifier"})),Pi.onPointerOutObservable.add((function(){sn.text=""}));const Ti=k.$n.CreateImageOnlyButton("but","res/assets/WuWa/Pistols_Icon.png");Ti.height="40px",Ti.width="40px",Ti.left=172,Ti.thickness=0,Ti.cornerRadius=5,an.addControl(Ti),Ti.onPointerClickObservable.add((function(){En(Ti,"Pistols","weaponType")})),Ti.onPointerEnterObservable.add((function(){sn.text="Pistols"})),Ti.onPointerOutObservable.add((function(){sn.text=""}));const Ii=k.$n.CreateImageOnlyButton("but","res/assets/WuWa/Gauntlets_Icon.png");Ii.height="40px",Ii.width="40px",Ii.left=212,Ii.thickness=0,Ii.cornerRadius=5,an.addControl(Ii),Ii.onPointerClickObservable.add((function(){En(Ii,"Gauntlets","weaponType")})),Ii.onPointerEnterObservable.add((function(){sn.text="Gauntlets"})),Ii.onPointerOutObservable.add((function(){sn.text=""}));const Mi=k.$n.CreateImageOnlyButton("but","res/assets/WuWa/Broadblade_Icon.png");function Ei(){kn.isVisible=!1,On.isVisible=!1,yi.isVisible=!1,xi.isVisible=!1,vi.isVisible=!1,wi.isVisible=!1,ki.isVisible=!1,Oi.isVisible=!1,Ci.isVisible=!1,Pi.isVisible=!1,Ti.isVisible=!1,Ii.isVisible=!1,Mi.isVisible=!1,pn.isVisible=!1,ln.image.source="res/assets/search.png"}Mi.height="40px",Mi.width="40px",Mi.left=252,Mi.thickness=0,Mi.cornerRadius=5,an.addControl(Mi),Mi.onPointerClickObservable.add((function(){En(Mi,"Broadblade","weaponType")})),Mi.onPointerEnterObservable.add((function(){sn.text="Broadblade"})),Mi.onPointerOutObservable.add((function(){sn.text=""})),Ei(),pn.isVisible=!0;const _i=new k.oE("scrollName");_i.cornerRadiusX=15,_i.cornerRadiusY=15,_i.thickness=0,Zt.addControl(_i);let Ai,Li,Ri=!1;_i.onPointerDownObservable.add((()=>{Ri=!0})),_i.onPointerUpObservable.add((()=>{Ri=!1}));let Si=new k.xA,Ni=10;function Vi(e){Si.dispose(),Si=new k.xA,Ni=Math.ceil(e.length/5)+1,Si.removeRowDefinition,Si.color="black",Si.width="680px",Si.heightInPixels=Ni*Si.widthInPixels/5,Si.addColumnDefinition(.2),Si.addColumnDefinition(.2),Si.addColumnDefinition(.2),Si.addColumnDefinition(.2),Si.addColumnDefinition(.2);for(let e=0;e<Ni;e++)Si.addRowDefinition(1/Ni);_i.addControl(Si);let t=0;for(let n=0;n<Ni;n++)for(let i=0;i<5;i++)if(t>e.length-1){let e;"Genshin"==Je||"None"==Je?(e=k.$n.CreateImageOnlyButton("but",j+"gi/Genshin/Paimon.png"),e.onPointerEnterObservable.add((function(){sn.text="Paimon"})),e.onPointerClickObservable.add((async function(){St.isVisible=!St.isVisible,"Paimon"!=Qe&&await Zi("Paimon")}))):"HSR"==Je?(e=k.$n.CreateImageOnlyButton("but",j+"hsr/HSR/Pom-Pom.png"),e.onPointerEnterObservable.add((function(){sn.text="Pom-Pom"})),e.onPointerClickObservable.add((async function(){St.isVisible=!St.isVisible,"Pom-Pom"!=Qe&&await Zi("Pom-Pom")}))):"ZZZ"==Je?(e=k.$n.CreateImageOnlyButton("but",j+"zzz/ZZZ/Bangboo.png"),e.onPointerEnterObservable.add((function(){sn.text="Bangboo"})),e.onPointerClickObservable.add((async function(){St.isVisible=!St.isVisible,"Bangboo"!=Qe&&await Zi("Bangboo")}))):"WuWa"==Je?(e=k.$n.CreateImageOnlyButton("but",j+"ww/WuWa/Abby.png"),e.onPointerEnterObservable.add((function(){sn.text="Abby"})),e.onPointerClickObservable.add((async function(){St.isVisible=!St.isVisible,"Abby"!=Qe&&await Zi("Abby")}))):(e=k.$n.CreateImageOnlyButton("but","res/assets/HNA/Puddlipup.png"),e.onPointerEnterObservable.add((function(){sn.text="Puddlipup"})),e.onPointerClickObservable.add((async function(){}))),e.onPointerOutObservable.add((function(){sn.text=""})),e.thickness=0,e.paddingBottom=e.paddingLeft=e.paddingRight=e.paddingTop=5,e.cornerRadius=10,Si.addControl(e,n,i)}else{const o=e[t],a=new k.tN;a.cornerRadius=10,a.thickness=0,a.paddingBottom=a.paddingTop=a.paddingRight=a.paddingLeft=5,a.background="rgb(123,92,144)",5==o.rarity?a.background="rgb(146,109,69)":6==o.rarity&&(a.background="rgb(192,79,85)"),Si.addControl(a,n,i);const s=k.$n.CreateImageOnlyButton("but",`${j}/${o.image}`);if(s.thickness=0,s.cornerRadius=10,s.paddingBottom=s.paddingTop=s.paddingRight=s.paddingLeft=5,Si.addControl(s,n,i),s.onPointerEnterObservable.add((function(){sn.text=o.name})),s.onPointerOutObservable.add((function(){sn.text=""})),s.onPointerClickObservable.add((async function(){St.isVisible=!St.isVisible,(Qe!=o.name||Fe!=o.id&&1!=It)&&await Zi(o.name,o.id)})),ae(re,o.name)){const e=new k._V("but","res/assets/skin_icon.png");e.verticalAlignment=k.Ec.VERTICAL_ALIGNMENT_TOP,e.horizontalAlignment=k.Ec.HORIZONTAL_ALIGNMENT_RIGHT,e.paddingRight=e.paddingTop=10,e.widthInPixels=e.heightInPixels=Si.widthInPixels/30,Si.addControl(e,n,i)}t+=1}}Vi(Xt);const Di={wasAnimationPlaying:!1,previousSeekTimeFrame:0,wasMuted:!1};let Bi=0;async function Zi(e,t){if(!e)return;Re.isAnimationPlaying&&(Di.wasAnimationPlaying=!0),Re.pauseAnimation(),Di.previousSeekTimeFrame=Re.currentFrameTime,We=Qe,Qe=e,Lt.text=Qe,null!=Pt&&(Pt.isVisible=!1),pe||Le.stop(),at.dispose(!1,!0),ot&&ot.dispose(!1,!0),Ze.dispose(),Ce.restoreState(),Re.unregister(ye),Re=new _.j(ye),Re.loggingEnabled=!0,Re.register(ye),Re.setAudioPlayer(Be),Ze=new z(ye,Re,Be,pe),Ze.showPlayerControl();let n=0;if("None"==Je&&(n=ce(t),Bi=n),"Paimon"==Qe||"Pom-Pom"==Qe||"Bangboo"==Qe||"Abby"==Qe)It=!1,Ue=ae(q,Qe),await $i(Ue);else if("Genshin"==Je||1==n){const e=be(Q,Qe);if(We==Qe)if(e.length>0&&!It){Ue=e[0],It=!0,await $i(Ue);let t=!1;e.length>1&&(t=!0),Tt(!0,t,Ue.name)}else if(e.length>0&&It&&e.length>1){let t=!0,n=0;for(let t=0;t<e.length;t++)Ue.id===e[t].id&&(n=t);const i=(n+1)%e.length;i==e.length-1&&(t=!1),n==e.length-1?(Ue=ae(Y,Qe),It=!1):(Ue=e[i],It=!0),await $i(Ue),Tt(!0,t,Ue.name)}else e.length>0&&It&&(It=!1,Ue=ae(Y,Qe),await $i(Ue),Tt(!0,!0,Ue.name));else It=!1,Ue=ae(Y,Qe),await $i(Ue),e.length>0&&Tt(!0,!0,Ue.name)}else if("HSR"==Je||2==n){const e=be(X,Qe);if(We==Qe&&Fe==Ue?.id)if(e.length>0&&!It){Ue=e[0],It=!0,await $i(Ue);let t=!1;e.length>1&&(t=!0),Tt(!0,t,Ue.name)}else if(e.length>0&&It&&e.length>1){let t=!0,n=0;for(let t=0;t<e.length;t++)Ue.id===e[t].id&&(n=t);const i=(n+1)%e.length;i==e.length-1&&(t=!1),n==e.length-1?(Ue=ae(J,Qe),It=!1):(Ue=e[i],It=!0),await $i(Ue),Tt(!0,t,Ue.name)}else e.length>0&&It&&(It=!1,Ue=ae(J,Qe),await $i(Ue),Tt(!0,!0,Ue.name));else It=!1,Ue=ue(J,t),await $i(Ue),e.length>0&&Tt(!0,!0,Ue.name)}else if("ZZZ"==Je||3==n){const e=be(ee,Qe);if(We==Qe&&Fe==Ue?.id)if(e.length>0&&!It){Ue=e[0],It=!0,await $i(Ue);let t=!1;e.length>1&&(t=!0),Tt(!0,t,Ue.name)}else if(e.length>0&&It&&e.length>1){let t=!0,n=0;for(let t=0;t<e.length;t++)Ue.id===e[t].id&&(n=t);const i=(n+1)%e.length;i==e.length-1&&(t=!1),n==e.length-1?(Ue=ae(K,Qe),It=!1):(Ue=e[i],It=!0),await $i(Ue),Tt(!0,t,Ue.name)}else e.length>0&&It&&(It=!1,Ue=ae(K,Qe),await $i(Ue),Tt(!0,!0,Ue.name));else It=!1,Ue=ue(K,t),await $i(Ue),e.length>0&&Tt(!0,!0,Ue.name)}else if("WuWa"==Je||4==n){const e=be(ne,Qe);if(We==Qe&&Fe==Ue?.id)if(e.length>0&&!It){Ue=e[0],It=!0,await $i(Ue);let t=!1;e.length>1&&(t=!0),Tt(!0,t,Ue.name)}else if(e.length>0&&It&&e.length>1){let t=!0,n=0;for(let t=0;t<e.length;t++)Ue.id===e[t].id&&(n=t);const i=(n+1)%e.length;i==e.length-1&&(t=!1),n==e.length-1?(Ue=ae(te,Qe),It=!1):(Ue=e[i],It=!0),await $i(Ue),Tt(!0,t,Ue.name)}else e.length>0&&It&&(It=!1,Ue=ae(te,Qe),await $i(Ue),Tt(!0,!0,Ue.name));else It=!1,Ue=ue(te,t),await $i(Ue),e.length>0&&Tt(!0,!0,Ue.name)}else if("HNA"==Je||5==n){const e=be(oe,Qe);if(We==Qe&&Fe==Ue?.id)if(e.length>0&&!It){Ue=e[0],It=!0,await $i(Ue);let t=!1;e.length>1&&(t=!0),Tt(!0,t,Ue.name)}else if(e.length>0&&It&&e.length>1){let t=!0,n=0;for(let t=0;t<e.length;t++)Ue.id===e[t].id&&(n=t);const i=(n+1)%e.length;i==e.length-1&&(t=!1),n==e.length-1?(Ue=ae(oe,Qe),It=!1):(Ue=e[i],It=!0),await $i(Ue),Tt(!0,t,Ue.name)}else e.length>0&&It&&(It=!1,Ue=ae(ie,Qe),await $i(Ue),Tt(!0,!0,Ue.name));else It=!1,Ue=ue(ie,t),await $i(Ue),e.length>0&&Tt(!0,!0,Ue.name)}else It=!1,Ue=ae("Genshin"===Je||1===n?Y:"HSR"===Je||2===n?J:"ZZZ"===Je||3===n?K:"WuWa"===Je||4===n?te:"HNA"===Je||5===n?ie:[],Qe),await $i(Ue);Di.wasAnimationPlaying?(Re.seekAnimation(Di.previousSeekTimeFrame,!0),Di.wasAnimationPlaying=!1,Re.isAnimationPlaying||Re.playAnimation()):(Ie.target=new f.Pq(0,10*we,1),Ie.setPosition(Pe),ye.activeCameras[0]=Ie)}async function $i(e){if(t.displayLoadingUI(),null!=Pt&&(Pt.isEnabled=!1),Ct.isEnabled=!1,He=[],ze=[],Fe=e.id,!(e&&e.directory&&e.pmx))throw new Error("Chosen character or its properties are undefined");if(He.push((0,u.kS)(j+e.directory+"/"+e.pmx,ye,{onProgress:e=>je(2,`Loading model... ${e.loaded}/${e.total} (${Math.floor(100*e.loaded/e.total)}%)`),pluginOptions:{mmdmodel:{loggingEnabled:!0,materialBuilder:me}}})),"WuWa"==Je?(qe=!1,_t.isVisible=!1):(qe=!0,_t.isVisible=!0),"WuWa"==Je||"ZZZ"==Je||"None"==Je&&(4==Bi||3==Bi)?(qe=!0,Ye="Universal"):"HSR"==Je||"HNA"==Je||"None"==Je&&(2==Bi||5==Bi)?(qe=!0,Ye="HSR"):("Genshin"==Je||"None"==Je&&1==Bi)&&(qe=!0,Ye=e.element),qe&&(pe||Le.start(),He.push((0,u.kS)("res/stages/GenshinCharacterSphere/CharacterSphere_"+Ye+"V.pmx",ye,{onProgress:e=>je(3,`Loading stage... ${e.loaded}/${e.total} (${Math.floor(100*e.loaded/e.total)}%)`),pluginOptions:{mmdmodel:{loggingEnabled:!0,materialBuilder:fe}}}))),Ke=await Promise.all(He),ye.onAfterRenderObservable.addOnce((()=>{t.hideLoadingUI(),setTimeout((()=>{null!=Pt&&(Pt.isEnabled=!0),Ct.isEnabled=!0}),1500)})),qe){const e=Ke[1];e.addAllToScene(),ot=e.rootNodes[0],ot.parent=ke}et=1.66,tt=69,nt=new f.uq,it=Ke[0],it.addAllToScene(),at=it.rootNodes[0],at.parent=ke,Ae.addShadowCaster(at);for(const e of at.metadata.meshes)e.receiveShadows=!0;ct=Re.createMmdModel(at),bt=ct.runtimeBones.find((e=>"頭"===e.name)),gt=ct.runtimeBones.find((e=>"センター"===e.name)),ht=new f.uq,null!=bt&&null!=gt&&(ct.addAnimation(ut),ct.setAnimation("motion"),ye.onBeforeDrawPhaseObservable.addOnce((()=>{bt.getWorldMatrixToRef(nt).multiplyToRef(at.getWorldMatrix(),nt),nt.getTranslationToRef(Oe.position),Oe.position.z=1,Oe.position.x=0,et-=Oe.position.y,tt=Oe.position.y})),ye.onBeforeRenderObservable.addOnce((()=>{gt.getWorldMatrixToRef(ht).multiplyToRef(at.getWorldMatrix(),ht),ht.getTranslationToRef(_e.position),_e.position.y-=10*we}))),Re.setCamera(Ce),Ce.setAnimation("motion"),ye.onAfterRenderObservable.addOnce((()=>{ye.freezeMaterials();const t=ye.meshes;for(let e=0,n=t.length;e<n;++e){const n=t[e];n.freezeWorldMatrix(),n.doNotSyncBoundingInfo=!0,n.isPickable=!1,n.doNotSyncBoundingInfo=!0,n.alwaysSelectAsActiveMesh=!0}if(ye.skipPointerMovePicking=!0,ye.skipPointerDownPicking=!0,ye.skipPointerUpPicking=!0,ye.skipFrustumClipping=!0,ye.blockMaterialDirtyMechanism=!0,!i)try{o.countUp("phoshco",e.name.replace(/\./g,"")).catch((e=>{console.error("Failed count: ",e)}))}catch(e){console.error("Unexpected error during count: ",e)}}))}Oe.position.x=ke.position.x,Oe.position.y=ke.position.y,Oe.position.z=ke.position.z,ye.onBeforeAnimationsObservable.add((()=>{mt=Ce.position.y/10,wt.text=`${ye.activeCameras[0].name}`,Oe.position.y=mt<tt&&0<mt?0-et*(mt/tt):mt<=0?0:0-et,Ce.parent=Oe}));const zi=new f.uq,ji=new f.Pq;let Hi=new f.Pq;const Gi=new f.Pq;ye.onBeforeRenderObservable.add((()=>{const e=Ce.rotation;f.uq.RotationYawPitchRollToRef(-e.y,-e.x,-e.z,zi),f.Pq.TransformNormalFromFloatsToRef(0,0,1,zi,ji),Hi=Ce.position.addToRef(f.Pq.TransformCoordinatesFromFloatsToRef(0,0,Ce.distance,zi,Hi),Hi),null!=bt&&null!=gt&&bt.getWorldMatrixToRef(nt).getTranslationToRef(Gi).subtractToRef(Hi,Gi)}));let Wi=-1/0;if(e.onclick=()=>{if(Rt)return;const e=performance.now();300<e-Wi?Wi=e:(Wi=-1/0,ye.activeCameras[0]===Ce?(pt.depthOfFieldEnabled=!1,Te.setTarget(new f.Pq(0,10*we,1)),Te.setPosition(Pe),ye.activeCameras[0]=Te):(pt.depthOfFieldEnabled=!1,ye.activeCameras[0]=Ce),wt.text=`${ye.activeCameras[0].name}`)},document.body.addEventListener("keydown",(function(e){"Space"!==e.code||St.isVisible||(e.preventDefault(),ye.activeCameras[0]===Ie&&(pt.depthOfFieldEnabled=!1,Re.isAnimationPlaying||(ye.activeCameras[0]=Ce),wt.text=`${ye.activeCameras[0].name}`),Re.isAnimationPlaying?Re.pauseAnimation():Re.playAnimation())})),ye.onPointerDown=function(e){Vt||(Nt=window.setTimeout((()=>{Dt=!1}),100)),function(e){Ri&&(Ai=e.offsetY,Li=_i.verticalBar.value)}(e)},ye.onPointerUp=function(e){Vt||(window.clearTimeout(Nt),Dt&&(St.isVisible=!1),Dt=!0),Ri&&(Ai=void 0)},ye.onPointerMove=function(e){!function(e){if(!Ri)return;if(void 0===Ai)return;if(void 0===Li)return;let t=e.offsetY-Ai;pe&&(t*=3);const n=t/(Si.heightInPixels-_i.heightInPixels);_i.verticalBar.value=Li-n}(e)},"Genshin"==Xe){const e=be(Q,Qe);if(e.length>0){const t=e[0];It=!1,Tt(!0,!0,t.name)}}else if("HSR"==Xe){en();const e=be(X,Qe);if(e.length>0){const t=e[0];It=!1,Tt(!0,!0,t.name)}}else if("ZZZ"==Xe){tn();const e=be(ee,Qe);if(e.length>0){const t=e[0];It=!1,Tt(!0,!0,t.name)}}else if("WuWa"==Xe){dn();const e=be(ne,Qe);if(e.length>0){const t=e[0];It=!1,Tt(!0,!0,t.name)}}else if("HNA"==Xe){nn();const e=be(oe,Qe);if(e.length>0){const t=e[0];It=!1,Tt(!0,!0,t.name)}}return ye}}window.onload=()=>{const e=document.createElement("canvas");e.style.width="100%",e.style.height="100%",e.style.display="block",e.style.border="none",e.style.outline="none",document.body.appendChild(e);const t=new i.N(e,!1,{preserveDrawingBuffer:!1,stencil:!1,antialias:!0,alpha:!1,premultipliedAlpha:!1,powerPreference:"high-performance",doNotHandleTouchAction:!1,doNotHandleContextLost:!0,audioEngine:!1},!0);let n=window.location.pathname;console.log(n),n.endsWith("/")&&(n=n.slice(0,-1));const a=window.location.hostname.includes("localhost"),s=window.location.hostname.includes("github.io"),r=["model-viewer","docs"];let l="",d="";if(a)l="/",d=n.slice(1).replace(/\/$/,"")||"",console.log("Local: "+d);else if(s)for(const e of r)if(n.includes(e)){const t=n.indexOf(e)+e.length;l=n.substring(0,n.lastIndexOf("/")),d=n.slice(t+1).replace(/\/$/,"")||"",console.log("Online: "+d);break}d&&window.history.replaceState(null,"",l),o.Create({canvas:e,engine:t,sceneBuilder:new H},d).then((e=>e.run()))}}},o={};function a(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={exports:{}};return i[e](n,n.exports,a),n.exports}a.m=i,e=[],a.O=(t,n,i,o)=>{if(!n){var s=1/0;for(c=0;c<e.length;c++){for(var[n,i,o]=e[c],r=!0,l=0;l<n.length;l++)(!1&o||s>=o)&&Object.keys(a.O).every((e=>a.O[e](n[l])))?n.splice(l--,1):(r=!1,o<s&&(s=o));if(r){e.splice(c--,1);var d=i();void 0!==d&&(t=d)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[n,i,o]},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,n)=>(a.f[n](e,t),t)),[])),a.u=e=>(({71:"glslShaders",126:"wgslShaders"}[e]||e)+".bundle.js"),a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),t={},n="model-viewer:",a.l=(e,i,o,s)=>{if(t[e])t[e].push(i);else{var r,l;if(void 0!==o)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var u=d[c];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==n+o){r=u;break}}r||(l=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,a.nc&&r.setAttribute("nonce",a.nc),r.setAttribute("data-webpack",n+o),r.src=e),t[e]=[i];var b=(n,i)=>{r.onerror=r.onload=null,clearTimeout(g);var o=t[e];if(delete t[e],r.parentNode&&r.parentNode.removeChild(r),o&&o.forEach((e=>e(i))),n)return n(i)},g=setTimeout(b.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=b.bind(null,r.onerror),r.onload=b.bind(null,r.onload),l&&document.head.appendChild(r)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="",(()=>{var e={792:0};a.f.j=(t,n)=>{var i=a.o(e,t)?e[t]:void 0;if(0!==i)if(i)n.push(i[2]);else{var o=new Promise(((n,o)=>i=e[t]=[n,o]));n.push(i[2]=o);var s=a.p+a.u(t),r=new Error;a.l(s,(n=>{if(a.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;r.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",r.name="ChunkLoadError",r.type=o,r.request=s,i[1](r)}}),"chunk-"+t,t)}},a.O.j=t=>0===e[t];var t=(t,n)=>{var i,o,[s,r,l]=n,d=0;if(s.some((t=>0!==e[t]))){for(i in r)a.o(r,i)&&(a.m[i]=r[i]);if(l)var c=l(a)}for(t&&t(n);d<s.length;d++)o=s[d],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(c)},n=self.webpackChunkmodel_viewer=self.webpackChunkmodel_viewer||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var s=a.O(void 0,[903],(()=>a(3740)));s=a.O(s)})();