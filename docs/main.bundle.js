(()=>{"use strict";var e,t,n,i={3740:(e,t,n)=>{var i=n(93856);class o{_canvas;_engine;_scene;_onTick;constructor(e){this._canvas=e.canvas,this._engine=e.engine,this._scene=null,this._onTick=null}static async Create(e,t){const n=new o(e);return n._scene=await n._initialize(e.sceneBuilder,t),n._onTick=n._makeOnTick(),n}run(){const e=this._engine;window.addEventListener("resize",this._onResize),e.runRenderLoop(this._onTick)}dispose(){window.removeEventListener("resize",this._onResize),this._engine.dispose()}_onResize=()=>{this._engine.resize()};async _initialize(e,t){return await e.build(this._canvas,this._engine,t)}_makeOnTick(){const e=this._scene;return()=>e.render()}}n(19679),n(33832),n(28461),n(19837),n(7169),n(2380),n(2051),n(55218),n(28010),n(96524),n(42186),n(27696),n(37118);var a=n(13323),s=n(7839),r=n(17720),l=n(52046),d=n(71513),c=n(18595),u=n(15909),b=n(32033),g=n(28986),h=n(2093),p=n(7481),m=n(26041),f=n(79923),y=n(66423),x=n(97328),v=n(65202),w=n(87491),k=n(17159),O=n(60470),C=n(91111),P=n(8644),T=n(19269),M=n(70721),I=n(25736),E=n(58227),_=n(76562),L=n(10513);const A=JSON.parse('[{"id":10000000,"name":"Paimon","weaponType":"Others","element":"Universal","gender":"Others","rarity":5,"directory":"res/chars/Genshin/Paimon","image":"Genshin/Paimon.png","pmx":"派蒙1.0.pmx"},{"id":10000001,"name":"Pom-Pom","weaponType":"Others","element":"Universal","gender":"Others","rarity":5,"directory":"res/chars/HSR/Pom-Pom","image":"HSR/Pom-Pom.png","pmx":"Pom-Pom.pmx"},{"id":10000002,"name":"Bangboo","weaponType":"Others","element":"Universal","gender":"Others","rarity":5,"directory":"res/chars/ZZZ/Bangboo","image":"ZZZ/Bangboo.png","pmx":"邦布.pmx"},{"id":10000003,"name":"Abby","weaponType":"Others","element":"Universal","gender":"Others","rarity":5,"directory":"res/chars/WuWa/Abby","image":"WuWa/Abby.png","pmx":"Abby.pmx"}]'),R=JSON.parse('[{"name":"Specialist","audioPlayerFile":"res/cam_motion/Specialist (Never End ver.)/music001.mp3","camMotionFile":"res/cam_motion/Specialist (Never End ver.)/CameraMAIN2.bvmd","modelMotionFile":"res/cam_motion/Specialist (Never End ver.)/mmd_Specialist_motion.bvmd"},{"name":"Classic","audioPlayerFile":"res/cam_motion/Classic/MMDClassic.mp3","camMotionFile":"res/cam_motion/Classic/MMDClassicCamera.bvmd","modelMotionFile":"res/cam_motion/Classic/MMDClassicMotion.bvmd"},{"name":"Renai","audioPlayerFile":"res/cam_motion/恋サーFullモーションセット/恋愛サーキュレーション.mp3","camMotionFile":"res/cam_motion/恋サーFullモーションセット/Camera for 恋爱循环.bvmd","modelMotionFile":"res/cam_motion/恋サーFullモーションセット/恋爱循环+.bvmd"},{"name":"105","audioPlayerFile":"res/cam_motion/热爱105C的你/热爱105C的你.mp3","camMotionFile":"res/cam_motion/热爱105C的你/camera.bvmd","modelMotionFile":"res/cam_motion/热爱105C的你/热爱105℃的你.bvmd"}]');var S=n(32206);class V{loadingUIBackgroundColor;loadingUIText;constructor(e,t="Loading",n="black"){this._renderingCanvas=e,this._loadingText=t,this._loadingDivBackgroundColor=n,this._resizeLoadingUI=()=>{const e=this._renderingCanvas.getBoundingClientRect(),t=window.getComputedStyle(this._renderingCanvas).position;this._loadingDiv&&(this._loadingDiv.style.position="fixed"===t?"fixed":"absolute",this._loadingDiv.style.left=e.left+"px",this._loadingDiv.style.top=e.top+"px",this._loadingDiv.style.width=e.width+"px",this._loadingDiv.style.height=e.height+"px")}}displayLoadingUI(){if(this._loadingDiv)return;this._loadingDiv=document.createElement("div"),this._loadingDiv.id="babylonjsLoadingDiv",this._loadingDiv.style.opacity="0",this._loadingDiv.style.transition="opacity 1.5s ease",this._loadingDiv.style.pointerEvents="none",this._loadingDiv.style.display="grid",this._loadingDiv.style.gridTemplateRows="100%",this._loadingDiv.style.gridTemplateColumns="100%",this._loadingDiv.style.justifyItems="center",this._loadingDiv.style.alignItems="center",this.loadingTextDiv=document.createElement("div"),this.loadingTextDiv.style.position="absolute",this.loadingTextDiv.style.left="0",this.loadingTextDiv.style.top="50%",this.loadingTextDiv.style.marginTop="80px",this.loadingTextDiv.style.width="100%",this.loadingTextDiv.style.height="20px",this.loadingTextDiv.style.fontFamily="Arial",this.loadingTextDiv.style.fontSize="14px",this.loadingTextDiv.style.color="white",this.loadingTextDiv.style.textAlign="center",this.loadingTextDiv.style.zIndex="1",this.loadingTextDiv.innerHTML="Loading",this._loadingDiv.appendChild(this.loadingTextDiv),this.loadingTextDiv.innerHTML=this._loadingText,this._style=document.createElement("style"),this._style.type="text/css",this._style.innerHTML="@-webkit-keyframes spin1 {                    0% { -webkit-transform: rotate(0deg);}\n                    100% { -webkit-transform: rotate(360deg);}\n                }                @keyframes spin1 {                    0% { transform: rotate(0deg);}\n                    100% { transform: rotate(360deg);}\n                }",document.getElementsByTagName("head")[0].appendChild(this._style);const e=!!window.SVGSVGElement,t=new Image,n=["paimon_load","kururin","guinaifen","furina","bangboo"];t.src="res/assets/loads/"+n[Math.floor(Math.random()*n.length)]+".gif",t.style.width="150px",t.style.gridColumn="1",t.style.gridRow="1",t.style.top="50%",t.style.left="50%",t.style.transform="translate(-50%, -50%)",t.style.position="absolute";const i=document.createElement("div");i.style.width="300px",i.style.gridColumn="1",i.style.gridRow="1",i.style.top="50%",i.style.left="50%",i.style.transform="translate(-50%, -50%)",i.style.position="absolute";const o=new Image;if(o.src=V.DefaultSpinnerUrl?V.DefaultSpinnerUrl:e?"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzOTIgMzkyIj48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6I2UwNjg0Yjt9LmNscy0ye2ZpbGw6bm9uZTt9PC9zdHlsZT48L2RlZnM+PHRpdGxlPlNwaW5uZXJJY29uPC90aXRsZT48ZyBpZD0iTGF5ZXJfMiIgZGF0YS1uYW1lPSJMYXllciAyIj48ZyBpZD0iU3Bpbm5lciI+PHBhdGggY2xhc3M9ImNscy0xIiBkPSJNNDAuMjEsMTI2LjQzYzMuNy03LjMxLDcuNjctMTQuNDQsMTItMjEuMzJsMy4zNi01LjEsMy41Mi01YzEuMjMtMS42MywyLjQxLTMuMjksMy42NS00LjkxczIuNTMtMy4yMSwzLjgyLTQuNzlBMTg1LjIsMTg1LjIsMCwwLDEsODMuNCw2Ny40M2EyMDgsMjA4LDAsMCwxLDE5LTE1LjY2YzMuMzUtMi40MSw2Ljc0LTQuNzgsMTAuMjUtN3M3LjExLTQuMjgsMTAuNzUtNi4zMmM3LjI5LTQsMTQuNzMtOCwyMi41My0xMS40OSwzLjktMS43Miw3Ljg4LTMuMywxMi00LjY0YTEwNC4yMiwxMDQuMjIsMCwwLDEsMTIuNDQtMy4yMyw2Mi40NCw2Mi40NCwwLDAsMSwxMi43OC0xLjM5QTI1LjkyLDI1LjkyLDAsMCwxLDE5NiwyMS40NGE2LjU1LDYuNTUsMCwwLDEsMi4wNSw5LDYuNjYsNi42NiwwLDAsMS0xLjY0LDEuNzhsLS40MS4yOWEyMi4wNywyMi4wNywwLDAsMS01Ljc4LDMsMzAuNDIsMzAuNDIsMCwwLDEtNS42NywxLjYyLDM3LjgyLDM3LjgyLDAsMCwxLTUuNjkuNzFjLTEsMC0xLjkuMTgtMi44NS4yNmwtMi44NS4yNHEtNS43Mi41MS0xMS40OCwxLjFjLTMuODQuNC03LjcxLjgyLTExLjU4LDEuNGExMTIuMzQsMTEyLjM0LDAsMCwwLTIyLjk0LDUuNjFjLTMuNzIsMS4zNS03LjM0LDMtMTAuOTQsNC42NHMtNy4xNCwzLjUxLTEwLjYsNS41MUExNTEuNiwxNTEuNiwwLDAsMCw2OC41Niw4N0M2Ny4yMyw4OC40OCw2Niw5MCw2NC42NCw5MS41NnMtMi41MSwzLjE1LTMuNzUsNC43M2wtMy41NCw0LjljLTEuMTMsMS42Ni0yLjIzLDMuMzUtMy4zMyw1YTEyNywxMjcsMCwwLDAtMTAuOTMsMjEuNDksMS41OCwxLjU4LDAsMSwxLTMtMS4xNVM0MC4xOSwxMjYuNDcsNDAuMjEsMTI2LjQzWiIvPjxyZWN0IGNsYXNzPSJjbHMtMiIgd2lkdGg9IjM5MiIgaGVpZ2h0PSIzOTIiLz48L2c+PC9nPjwvc3ZnPg==":"https://cdn.babylonjs.com/Assets/loadingIcon.png",o.style.animation="spin1 0.75s infinite linear",o.style.webkitAnimation="spin1 0.75s infinite linear",o.style.transformOrigin="50% 50%",o.style.webkitTransformOrigin="50% 50%",!e){const e={w:16,h:18.5},n={w:30,h:30};t.style.width=`${e.w}vh`,t.style.height=`${e.h}vh`,t.style.left=`calc(50% - ${e.w/2}vh)`,t.style.top=`calc(50% - ${e.h/2}vh)`,o.style.width=`${n.w}vh`,o.style.height=`${n.h}vh`,o.style.left=`calc(50% - ${n.w/2}vh)`,o.style.top=`calc(50% - ${n.h/2}vh)`}i.appendChild(o),this._loadingDiv.appendChild(t),this._loadingDiv.appendChild(i),this._resizeLoadingUI(),window.addEventListener("resize",this._resizeLoadingUI),this._loadingDiv.style.backgroundColor=this._loadingDivBackgroundColor,document.body.appendChild(this._loadingDiv),this._loadingDiv.style.opacity="1"}hideLoadingUI(){this._loadingDiv&&(this._loadingDiv.style.opacity="0",this._loadingDiv.addEventListener("transitionend",(()=>{this.loadingTextDiv&&(this.loadingTextDiv.remove(),this.loadingTextDiv=null),this._loadingDiv&&(this._loadingDiv.remove(),this._loadingDiv=null),this._style&&(this._style.remove(),this._style=null),window.removeEventListener("resize",this._resizeLoadingUI)})))}set loadingUIText(e){this._loadingText=e,this.loadingTextDiv&&(this.loadingTextDiv.innerHTML=this._loadingText)}get loadingUIText(){return this._loadingText}get loadingUIBackgroundColor(){return this._loadingDivBackgroundColor}set loadingUIBackgroundColor(e){this._loadingDivBackgroundColor=e,this._loadingDiv&&(this._loadingDiv.style.backgroundColor=this._loadingDivBackgroundColor)}}S.$.DefaultLoadingScreenFactory=e=>new V(e);var N=n(70223),D=n(34769);class B{static _Instance;_app;_db;_closeTimer=null;_firebaseConfig={apiKey:"AIzaSyAdRgjvTfK_PhyVj6tBxyxDvduWkT2Mlsw",authDomain:"counter-13744.firebaseapp.com",databaseURL:"https://counter-13744-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"counter-13744",storageBucket:"counter-13744.firebasestorage.app",messagingSenderId:"377800074128",appId:"1:377800074128:web:5cf0541109ad7877d88915",measurementId:"G-ZDQ3JM7W1Z"};constructor(){this._app=(0,N.Wp)(this._firebaseConfig),this._db=(0,D.C3)(this._app)}static GetInstance(){return B._Instance&&B._Instance._app||(B._Instance=new B),B._Instance}async _closeInstance(){B._Instance=null}_resetCloseTimer(){this._closeTimer&&clearTimeout(this._closeTimer),this._closeTimer=setTimeout((()=>{this._closeInstance()}),5e3)}async countUp(e,t){try{const n=`${e}/${t}`,i=(0,D.KR)(this._db,`${n}/count`),o=await(0,D.Jt)(i),a=((o.exists()?o.val():0)||0)+1;await(0,D.hZ)(i,a);const s=new Date,r=s.getTime(),l=(0,D.KR)(this._db,`${n}/transactions/${r}`);await(0,D.hZ)(l,{datetime:s.toISOString(),change:"+1"}),console.log("Count: "+t+": "+a)}finally{this._resetCloseTimer()}}async countDown(e,t){try{const n=`${e}/${t}`,i=(0,D.KR)(this._db,n),o=(await(0,D.Jt)(i)).val()||{count:0,transactions:[]},a=Math.max((o.count||0)-1,0),s=new Date,r=s.getTime();await(0,D.hZ)(i,{count:a,transactions:{...o.transactions||{},[r]:{datetime:s.toISOString(),change:"-1"}}})}finally{this._resetCloseTimer()}}async setCount(e,t,n){try{if(n<0)return void console.error("Count value must be non-negative.");const i=`${e}/${t}`,o=(0,D.KR)(this._db,i),a=(await(0,D.Jt)(o)).val()||{transactions:[]},s=new Date,r=s.getTime();await(0,D.hZ)(o,{count:n,transactions:{...a.transactions||{},[r]:{datetime:s.toISOString(),change:`set ${n}`}}})}finally{this._resetCloseTimer()}}async deleteNamespaceName(e,t){try{const n=`${e}/${t}`,i=(0,D.KR)(this._db,n);await(0,D.TF)(i),console.log(`${e}/${t} has been deleted.`)}finally{this._resetCloseTimer()}}}var Z,$=n(24908);!function(e){e[e.Seconds=0]="Seconds",e[e.Frames=1]="Frames"}(Z||(Z={}));class z extends $.h{_isMobile;_speedlabel;constructor(e,t,n,i=!1){super(e,t,n),this._speedlabel=null,this._isMobile=i,this._mobileRemoval()}_mobileRemoval(){if(this._isMobile){const e=document.getElementById("plrc"),t=document.getElementById("sLa"),n=document.getElementById("sLi");e.removeChild(t),e.removeChild(n)}}_createPlayerControl(e,t,n){const i=e.ownerDocument,o=this._playerContainer=i.createElement("div");o.style.position="relative",o.style.bottom="120px",o.style.left="0",o.style.width="100%",o.style.height="120px",o.style.transform="translateY(50%)",o.style.transition="transform 0.5s",e.appendChild(o),o.onmouseenter=this._onPlayerControlMouseEnter,o.onmouseleave=this._onPlayerControlMouseLeave;{const a=i.createElement("div");a.style.position="absolute",a.style.bottom="0",a.style.left="0",a.style.width="100%",a.style.height="50%",a.style.boxSizing="border-box",a.style.background="linear-gradient(rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.6))",a.style.display="flex",a.style.flexDirection="column",o.appendChild(a);{const o=i.createElement("div");o.style.width="100%",o.style.boxSizing="border-box",o.style.display="flex",o.style.flexDirection="row",o.style.alignItems="center",a.appendChild(o);{const e=this._timeSlider=i.createElement("input");e.style.width="100%",e.style.height="4px",e.style.border="none",e.style.opacity="0.5",e.type="range",e.min="0",e.max=t.animationFrameTimeDuration.toString(),e.oninput=n=>{n.preventDefault(),t.seekAnimation(Number(e.value),!0)};{let n=!1;e.onmousedown=()=>{t.isAnimationPlaying&&(t.pauseAnimation(),n=!0)},e.onmouseup=()=>{n&&(t.playAnimation(),n=!1)}}o.appendChild(e)}const s=i.createElement("div");s.style.width="100%",s.style.flexGrow="1",s.style.padding="0 5px",s.style.boxSizing="border-box",s.style.display="flex",s.style.flexDirection="row",s.style.alignItems="space-between",a.appendChild(s);{const o=i.createElement("div");o.style.flex="1",o.style.display="flex",o.style.flexDirection="row",o.style.alignItems="center",s.appendChild(o);{const e=this._playButton=i.createElement("button");if(e.style.width="40px",e.style.border="none",e.style.backgroundColor="rgba(0, 0, 0, 0)",e.style.color="white",e.style.fontSize="18px",e.innerText=t.isAnimationPlaying?"❚❚":"▶",e.onclick=()=>{t.isAnimationPlaying?t.pauseAnimation():t.playAnimation()},o.appendChild(e),void 0!==n){const e=this._soundButton=i.createElement("button");e.style.width="35px",e.style.border="none",e.style.backgroundColor="rgba(0, 0, 0, 0)",e.style.color="white",e.style.fontSize="20px",e.innerText=n.muted?"🔇":"🔊",e.onclick=()=>{n.muted?n.unmute():n.mute()},o.appendChild(e);const t=this._volumeSlider=i.createElement("input");t.style.width="80px",t.style.height="4px",t.style.border="none",t.style.opacity="0.5",t.type="range",t.min="0",t.max="1",t.step="0.01",t.value=n.volume.toString(),t.oninput=()=>{n.volume=Number(t.value)},o.appendChild(t)}const a=this._currentFrameNumberSpan=i.createElement("span");a.style.width="40px",a.style.textAlign="right",a.style.color="white",a.innerText=this.displayTimeFormat===Z.Seconds?this._getFormattedTime(t.currentTime):Math.floor(t.currentFrameTime).toString(),o.appendChild(a);const s=this._endFrameNumberSpan=i.createElement("span");s.style.width="50px",s.style.textAlign="left",s.style.color="white",s.innerHTML="&nbsp;/&nbsp;"+(this.displayTimeFormat===Z.Seconds?this._getFormattedTime(t.animationDuration):Math.floor(t.animationFrameTimeDuration).toString()),o.appendChild(s)}const a=i.createElement("div");a.style.flex="1",a.style.display="flex",a.style.flexDirection="row",a.style.alignItems="center",a.style.justifyContent="flex-end",a.id="plrc",s.appendChild(a);{const n=this._speedlabel=i.createElement("label");n.style.width="40px",n.style.textAlign="center",n.style.color="white",n.innerText="1.00x",n.id="sLa",a.appendChild(n);const o=this._speedSlider=i.createElement("input");o.style.width="80px",o.style.height="4px",o.style.border="none",o.style.opacity="0.5",o.type="range",o.min="0.07",o.max="1",o.step="0.01",o.id="sLi",o.value=t.timeScale.toString(),o.oninput=()=>{t.timeScale=Number(o.value),n.innerText=t.timeScale.toFixed(2)+"x"},a.appendChild(o);const s=this._fullscreenButton=i.createElement("button");s.style.width="40px",s.style.border="none",s.style.color="white",s.style.backgroundColor="rgba(0, 0, 0, 0)",s.style.fontSize="20px",s.innerHTML='<img src="res/assets/maximise.png" alt="Fullscreen" style="width: 100%; height: 100%;">',s.onclick=()=>{i.fullscreenElement?i.exitFullscreen():e.requestFullscreen()},a.appendChild(s)}}}}}}const j="https://phoshco.github.io/";class G{async build(e,t,n){M.n.OverrideEngineCreateEffect(t);const i=window.location.hostname.includes("localhost"),o=B.GetInstance(),S=await(await fetch(`${j}gi/genshin.json`)).json(),N=await(await fetch(`${j}gi/skins.json`)).json(),D=await(await fetch(`${j}hsr/hsr.json`)).json(),Z=await(await fetch(`${j}hsr/skins.json`)).json(),$=await(await fetch(`${j}zzz/zzz.json`)).json(),G=await(await fetch(`${j}zzz/skins.json`)).json(),H=await(await fetch(`${j}ww/wuwa.json`)).json(),F=await(await fetch(`${j}ww/skins.json`)).json(),W=A,U=S,q=N,Y=D,Q=Z,J=$,X=G,K=H,ee=F;U.sort(((e,t)=>t.id-e.id)),q.sort(((e,t)=>t.id-e.id)),Q.sort(((e,t)=>t.id-e.id)),X.sort(((e,t)=>t.id-e.id)),ee.sort(((e,t)=>t.id-e.id)),Y.sort(((e,t)=>t.id-e.id)),J.sort(((e,t)=>t.id-e.id)),K.sort(((e,t)=>t.id-e.id));const te=(e,t)=>e.find((e=>e.name===t)),ne=[...U,...Y,...J,...K],ie=[...q,...Q,...X,...ee],oe=new L.A({fields:["name"],storeFields:["id","name"],searchOptions:{fuzzy:.2,prefix:!0}});oe.addAll(ne);const ae=e=>e.toLowerCase().replace(/[^a-z]/g,""),se=e=>{const t=Math.abs(e).toString();return parseInt(t[0],10)},re=(e,t)=>e.find((e=>e.id===t)),le=(e,t)=>ce(e.filter((e=>e.name===t)),"name",!1);function de(e,t){return e.filter((e=>t.every((t=>String(e[t.key]).includes(t.value)))))}function ce(e,t,n=!0){return e.slice().sort(((e,i)=>{const o=e[t],a=i[t];if("number"==typeof o&&"number"==typeof a)return n?o-a:a-o;{const e=String(o),t=String(a);return n?t.localeCompare(e):e.localeCompare(t)}}))}const ue=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);(0,T.j)();const be=new C.c;be.renderMethod=C.L.DepthWriteAlphaBlending,be.afterBuildSingleMaterial=e=>{e.forceDepthWrite=!0;const t=e.diffuseTexture;t&&(t.hasAlpha=!0,e.useAlphaFromDiffuseTexture=!0),e.transparencyMode===g.i.MATERIAL_ALPHABLEND&&(e.transparencyMode=g.i.MATERIAL_ALPHATESTANDBLEND,e.alphaCutOff=.01)};const ge=new C.c;ge.renderMethod=C.L.DepthWriteAlphaBlending,ge.afterBuildSingleMaterial=e=>{e.forceDepthWrite=!0;const t=e.diffuseTexture;e.specularColor=m.v9.Black(),t&&(t.hasAlpha=!0,e.useAlphaFromDiffuseTexture=!0),e.transparencyMode===g.i.MATERIAL_ALPHABLEND&&(e.transparencyMode=g.i.MATERIAL_ALPHATESTANDBLEND,e.alphaCutOff=.01)};const he=new w.Z(t);let pe=!0;window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?(pe=!0,he.clearColor=new m.ov(.001,.001,.001,1)):he.clearColor=new m.ov(1,1,1,1);const me=k.vs.CreateFullscreenUI("UI");me.layer.layerMask=268435456,me.idealWidth=1e3,me.idealHeight=1e3,me.useSmallestIdeal=!0;const fe=.09,ye=new x.V("mmdRoot",he);ye.scaling.scaleInPlace(fe),ye.position.z=1;const xe=new x.V("mmdRoot",he);xe.scaling.scaleInPlace(fe),xe.position.z=1;const ve=new E.A("mmdCamera",new f.Pq(0,10,0),he);ve.maxZ=5e3,ve.minZ=.1,ve.parent=ye,ve.layerMask=1;const we=new f.Pq(0,10,-20).scaleInPlace(fe),ke=new s.Lq("arcRotateCamera",0,0,2.25,new f.Pq(0,10*fe,1),he);ke.maxZ=100,ke.minZ=.1,ke.setPosition(we),ke.attachControl(e,!1),ke.inertia=.8,ke.speed=.36,ke.zoomToMouseLocation=!0,ke.wheelDeltaPercentage=.1,ke.upperRadiusLimit=9,ke.lowerRadiusLimit=.09,ue&&(ke.pinchDeltaPercentage=.002),ke.layerMask=1;const Oe=new s.Lq("stillCamera",0,0,2.25,new f.Pq(0,10*fe,1),he);Oe.maxZ=100,Oe.minZ=.1,Oe.setPosition(we),Oe.attachControl(e,!1),Oe.inertia=.8,Oe.speed=.36,Oe.zoomToMouseLocation=!0,Oe.wheelDeltaPercentage=.1,Oe.upperRadiusLimit=9,Oe.lowerRadiusLimit=.09,ue&&(Oe.pinchDeltaPercentage=.002),Oe.layerMask=1;const Ce=new s.Lq("guiCamera",Math.PI/2+Math.PI/7,Math.PI/2,100,new f.Pq(0,20,0),he);Ce.layerMask=268435456;const Pe=new d.g("HemisphericLight",new f.Pq(0,1,0),he);Pe.intensity=.4,Pe.specular=new m.v9(0,0,0),Pe.groundColor=new m.v9(1,1,1);const Te=new l.Z("DirectionalLight",new f.Pq(.5,-1,1),he);Te.intensity=.8,Te.autoCalcShadowZBounds=!1,Te.autoUpdateExtends=!1,Te.shadowMaxZ=20*fe,Te.shadowMinZ=-15*fe,Te.orthoTop=18*fe,Te.orthoBottom=-.27,Te.orthoLeft=-10*fe,Te.orthoRight=10*fe,Te.shadowOrthoScale=0;const Me=new c.o(1024,Te,!0);Me.usePercentageCloserFiltering=!0,Me.forceBackFacesOnly=!0,Me.filteringQuality=c.o.QUALITY_MEDIUM,Me.frustumEdgeFalloff=.1;const Ie=new a.okU("particles",2e3,he);let Ee;Ie.particleTexture=new p.g("res/assets/flare.png",he),Ie.emitter=f.Pq.Zero(),Ie.minEmitBox=new f.Pq(-25,-15,-25),Ie.maxEmitBox=new f.Pq(25,10,25),Ie.color1=new m.ov(1,1,1,.9),Ie.color2=new m.ov(.5,.5,.5,.9),Ie.colorDead=new m.ov(.1,.1,.1,0),Ie.minSize=.1,Ie.maxSize=.4,Ie.minLifeTime=.3,Ie.maxLifeTime=1.5,Ie.emitRate=40,Ie.blendMode=a.okU.BLENDMODE_ONEONE,Ie.gravity=new f.Pq(0,-9.81,0),Ie.direction1=new f.Pq(-7,8,3),Ie.direction2=new f.Pq(7,8,-3),Ie.minAngularSpeed=0,Ie.maxAngularSpeed=Math.PI,Ie.minEmitPower=1,Ie.maxEmitPower=3,Ie.updateSpeed=.005,Ie.renderingGroupId=1,Ee=new _.j(he),Ee.loggingEnabled=!0,Ee.register(he);let _e=R[Math.floor(Math.random()*R.length)].name,Le=R.find((e=>e.name===_e)).audioPlayerFile,Ae=R.find((e=>e.name===_e)).camMotionFile,Re=R.find((e=>e.name===_e)).modelMotionFile,Se=new I.A(he);Se.preservesPitch=!1,Se.source=Le,Ee.setAudioPlayer(Se);let Ve=new z(he,Ee,Se,ue);Ve.showPlayerControl();const Ne=new V(e);t.loadingScreen=Ne,t.displayLoadingUI();let De=[];const Be=(e,t)=>{De[e]=t,Ne.loadingTextDiv.innerHTML="<br/><br/><br/><br/>"+De.join("<br/><br/>")};let Ze=[];const $e=new P.P(he);$e.loggingEnabled=!0,Ze.push($e.loadAsync("motion",Ae,(e=>Be(0,`Loading camera... ${e.loaded}/${e.total} (${Math.floor(100*e.loaded/e.total)}%)`)))),Ze.push($e.loadAsync("motion",Re,(e=>Be(1,`Loading motion... ${e.loaded}/${e.total} (${Math.floor(100*e.loaded/e.total)}%)`))));let ze,je,Ge,He=!0,Fe="Pyro",We=n,Ue="Genshin",qe=Ue;if([Ge,qe]=(e=>{const t=ae(e),n=oe.search(t);let a,s;if(console.log(n),n.length>0){const e=se(n[0].id);if(1==e?(a=te(U,n[0].name),s="Genshin"):2==e?(a=te(Y,n[0].name),s="HSR"):3==e?(a=te(J,n[0].name),s="ZZZ"):(a=te(K,n[0].name),s="WuWa"),!i)try{o.countUp("phoshco",a.name.replace(/\./g,"")).catch((e=>{console.error("Failed count: ",e)}))}catch(e){console.error("Unexpected error during count: ",e)}}else a=te(U,"Hu Tao"),s="Genshin";return[a,s]})(We),We=Ge.name,je=Ge.id,Fe=Ge.element,"HSR"==qe?Fe="HSR":"Genshin"!=qe&&(Fe="Universal"),!(Ge&&Ge.directory&&Ge.pmx))throw new Error("Chosen character or its properties are undefined");Ze.push((0,u.kS)(j+Ge.directory+"/"+Ge.pmx,he,{onProgress:e=>Be(2,`Loading model... ${e.loaded}/${e.total} (${Math.floor(100*e.loaded/e.total)}%)`),pluginOptions:{mmdmodel:{loggingEnabled:!0,materialBuilder:be}}})),Ze.push((async()=>{Be(3,"Loading physics engine..."),Be(3,"Loading physics engine... Done")})()),He&&(ue||Ie.start(),Ze.push((0,u.kS)("res/stages/GenshinCharacterSphere/CharacterSphere_"+Fe+"V.pmx",he,{onProgress:e=>Be(4,`Loading stage... ${e.loaded}/${e.total} (${Math.floor(100*e.loaded/e.total)}%)`),pluginOptions:{mmdmodel:{loggingEnabled:!0,materialBuilder:ge}}})));let Ye=await Promise.all(Ze);he.onAfterRenderObservable.addOnce((()=>t.hideLoadingUI())),he.activeCameras=[Oe,Ce];let Qe=1.66,Je=69,Xe=new f.uq,Ke=Ye[2];Ke.addAllToScene();let et,tt=Ke.rootNodes[0];if(tt.parent=ye,He){const e=Ye[4];e.addAllToScene(),et=e.rootNodes[0],et.parent=ye}Me.addShadowCaster(tt);for(const e of tt.metadata.meshes)e.receiveShadows=!0;const nt=(0,y.km)("ground1",{width:50,height:50,subdivisions:2,updatable:!1},he);nt.receiveShadows=!0;const it=new h.F("GroundMaterial",he);it.diffuseColor=new m.v9(.14,.14,.14),it.specularPower=128;const ot=it.reflectionTexture=new a.B2G("MirrorTexture",50,he,!0);ot.mirrorPlane=a.Zcv.FromPositionAndNormal(nt.position,nt.getFacetNormal(0).scale(-1)),ot.renderList=[...tt.metadata.meshes],ot.level=.45,ot.adaptiveBlurKernel=16;const at=new O.w("shadowOnly",he);at.activeLight=Te,at.alpha=.4,nt.material=at,nt.receiveShadows=!0,nt.parent=ye;let st=Ee.createMmdModel(tt),rt=Ye[1],lt=st.runtimeBones.find((e=>"頭"===e.name)),dt=st.runtimeBones.find((e=>"センター"===e.name)),ct=new f.uq;null!=lt&&null!=dt&&(st.addAnimation(rt),st.setAnimation("motion"),he.onBeforeDrawPhaseObservable.addOnce((()=>{lt.getWorldMatrixToRef(Xe).multiplyToRef(tt.getWorldMatrix(),Xe),Xe.getTranslationToRef(xe.position),Qe-=xe.position.y,Je=xe.position.y})),he.onBeforeRenderObservable.addOnce((()=>{dt.getWorldMatrixToRef(ct).multiplyToRef(tt.getWorldMatrix(),ct),ct.getTranslationToRef(Te.position),Te.position.y-=10*fe}))),ve.addAnimation(Ye[0]),ve.storeState(),Ee.setCamera(ve),ve.setAnimation("motion"),he.onAfterRenderObservable.addOnce((()=>{he.freezeMaterials(),null!=wt&&(wt.isEnabled=!0);const e=he.meshes;for(let t=0,n=e.length;t<n;++t){const n=e[t];n.freezeWorldMatrix(),n.doNotSyncBoundingInfo=!0,n.isPickable=!1,n.doNotSyncBoundingInfo=!0,n.alwaysSelectAsActiveMesh=!0}if(he.skipPointerMovePicking=!0,he.skipPointerDownPicking=!0,he.skipPointerUpPicking=!0,he.skipFrustumClipping=!0,he.blockMaterialDirtyMechanism=!0,Se.mute(),!i)try{o.countUp("phoshco","hoyo").catch((e=>{console.error("Failed count: ",e)}))}catch(e){console.error("Unexpected error during count: ",e)}}));const ut=new v.e("default",!0,he,[ve,ke,Oe]);ut.samples=4,ut.chromaticAberrationEnabled=!0,ut.chromaticAberration.aberrationAmount=1,ut.fxaaEnabled=!0,ut.imageProcessing.toneMappingEnabled=!1,ut.imageProcessing.toneMappingType=b.p.TONEMAPPING_ACES,ut.imageProcessing.vignetteWeight=.5,ut.imageProcessing.vignetteStretch=.5,ut.imageProcessing.vignetteColor=new m.ov(0,0,0,0),ut.imageProcessing.vignetteEnabled=!0,ut.depthOfFieldEnabled=!1;let bt=69;const gt=new r.Wd("","res/stages/hoyo.png",he,!0,new m.ov(1,1,1,1)),ht=new p.g("res/stages/hoyo.png",he,!0),pt=new p.g("res/stages/hoyo_dark.png",he,!0);pe&&(gt.texture=pt),new ResizeObserver((()=>{const t=e.width/e.height;t>1?(gt.scale.y=t,gt.scale.x=1,ht.uScale=1,ht.vScale=1/gt.scale.y,ht.uOffset=0,ht.vOffset=.5*(1-ht.vScale),pt.uScale=1,pt.vScale=1/gt.scale.y,pt.uOffset=0,pt.vOffset=.5*(1-pt.vScale)):(gt.scale.y=1,gt.scale.x=1/t,ht.uScale=1/gt.scale.x,ht.vScale=1,ht.uOffset=.5*(1-ht.uScale),ht.vOffset=0,pt.uScale=1/gt.scale.x,pt.vScale=1,pt.uOffset=.5*(1-pt.uScale),pt.vOffset=0)})).observe(e),gt.render;const mt=new k.VJ;mt.widthInPixels=100,mt.heightInPixels=50,mt.left=0,mt.text="lol",mt.fontSize=16,mt.textHorizontalAlignment=k.Ec.HORIZONTAL_ALIGNMENT_LEFT,mt.horizontalAlignment=k.Ec.HORIZONTAL_ALIGNMENT_RIGHT,mt.verticalAlignment=k.Ec.VERTICAL_ALIGNMENT_BOTTOM,mt.color="black",me.addControl(mt),mt.isVisible=!1;const ft=new k.VJ;ft.widthInPixels=100,ft.heightInPixels=50,ft.left=0,ft.text=`${he.activeCameras[0].name}`,ft.fontSize=16,ft.textHorizontalAlignment=k.Ec.HORIZONTAL_ALIGNMENT_LEFT,ft.horizontalAlignment=k.Ec.HORIZONTAL_ALIGNMENT_RIGHT,ft.verticalAlignment=k.Ec.VERTICAL_ALIGNMENT_TOP,ft.color="black",me.addControl(ft),ft.isVisible=!1;const yt=new k.VJ;yt.resizeToFit=!0,yt.top=0,yt.left=0,yt.paddingTop=10,yt.paddingRight=10,yt.text="Double click / tap to change camera mode.",yt.fontSize=ue?25:16,yt.textHorizontalAlignment=k.Ec.HORIZONTAL_ALIGNMENT_CENTER,yt.horizontalAlignment=k.Ec.HORIZONTAL_ALIGNMENT_RIGHT,yt.verticalAlignment=k.Ec.VERTICAL_ALIGNMENT_TOP,yt.color="grey",me.addControl(yt),yt.isVisible=!0;const xt=ue?"100px":"50px",vt=k.$n.CreateImageOnlyButton("but","res/assets/menu.png");let wt;function kt(e=!1,t,n){null!=wt&&wt.dispose(),wt=new k.$n,wt=k.$n.CreateImageOnlyButton("but","res/assets/alter.png"),pe&&(wt.image.source="res/assets/alter_light.png"),wt.horizontalAlignment=k.Ec.HORIZONTAL_ALIGNMENT_LEFT,wt.left=ue?"110px":"60px",wt.verticalAlignment=k.Ec.VERTICAL_ALIGNMENT_TOP,wt.top=ue?"110px":"60px",wt.width=xt,wt.height=xt,wt.thickness=0,me.addControl(wt),wt.isVisible=e,null!=t&&n&&(wt.isEnabled=!1,wt.onPointerClickObservable.addOnce((async function(){Ei(n),Ot=t,_t.isVisible&&(_t.isVisible=!1)})))}vt.horizontalAlignment=k.Ec.HORIZONTAL_ALIGNMENT_LEFT,vt.left="10px",vt.verticalAlignment=k.Ec.VERTICAL_ALIGNMENT_TOP,vt.top="10px",vt.width=xt,vt.height=xt,vt.thickness=0,me.addControl(vt),vt.onPointerClickObservable.add((function(){_t.isVisible=!_t.isVisible,vt.isVisible&&Ve.hidePlayerControl()}));let Ot=!1;const Ct=k.$n.CreateImageOnlyButton("but","res/assets/dark_mode.png");function Pt(){pe?(he.clearColor=new m.ov(1,1,1,1),gt.texture=ht,Ct.image.source="res/assets/dark_mode.png",Mt.image.source="res/assets/note.png",null!=wt&&(wt.image.source="res/assets/alter.png"),It.color="black"):(gt.texture=pt,Ct.image.source="res/assets/light_mode.png",Mt.image.source="res/assets/note_light.png",null!=wt&&(wt.image.source="res/assets/alter_light.png"),It.color="white"),gt.render,pe=!pe}pe&&(Ct.image.source="res/assets/light_mode.png"),Ct.horizontalAlignment=k.Ec.HORIZONTAL_ALIGNMENT_LEFT,Ct.left=ue?"110px":"60px",Ct.verticalAlignment=k.Ec.VERTICAL_ALIGNMENT_TOP,Ct.top="10px",Ct.width=xt,Ct.height=xt,Ct.thickness=0,He&&(Ct.isEnabled=!1),me.addControl(Ct),Ct.onPointerClickObservable.add(Pt);const Tt=k.$n.CreateImageOnlyButton("but","res/assets/paimon.png");Tt.horizontalAlignment=k.Ec.HORIZONTAL_ALIGNMENT_LEFT,Tt.left="10px",Tt.verticalAlignment=k.Ec.VERTICAL_ALIGNMENT_TOP,Tt.top=ue?"110px":"60px",Tt.width=xt,Tt.height=xt,Tt.thickness=0,me.addControl(Tt),"WuWa"==qe&&(Tt.isVisible=!1),Tt.onPointerClickObservable.add((function(){He?(et.setEnabled(!1),ue||Ie.stop(),Ct.isEnabled=!0):"Genshin"!=Ue&&"HSR"!=Ue&&"ZZZ"!=Ue||He||(et.setEnabled(!0),ue||Ie.start(),Ct.isEnabled=!1,pe||Pt()),He=!He}));const Mt=k.$n.CreateImageOnlyButton("but","res/assets/note.png");Mt.horizontalAlignment=k.Ec.HORIZONTAL_ALIGNMENT_LEFT,Mt.left="10px",Mt.verticalAlignment=k.Ec.VERTICAL_ALIGNMENT_TOP,Mt.top=ue?"210px":"110px",Mt.width=xt,Mt.height=xt,Mt.thickness=0,me.addControl(Mt),pe&&(Mt.image.source="res/assets/note_light.png"),Mt.onPointerClickObservable.add((function(){const e=R.findIndex((e=>e.name===_e)),n=(e+1)%R.length;_e=R[n].name,Le=R.find((e=>e.name===_e)).audioPlayerFile,Ae=R.find((e=>e.name===_e)).camMotionFile,Re=R.find((e=>e.name===_e)).modelMotionFile,async function(){Ee.pauseAnimation(),ve.storeState(),Ee.seekAnimation(0,!0);const e=Se.volume;Se.dispose(),Se=new I.A(he),Se.preservesPitch=!1,Se.source=Le,Ee.setAudioPlayer(Se),Ve.dispose(),Se.volume=e,Ve=new z(he,Ee,Se,ue),Ve.showPlayerControl(),De=[],t.displayLoadingUI(),Ze=[],Ze.push($e.loadAsync("motion",Ae,(e=>Be(0,`Loading camera... ${e.loaded}/${e.total} (${Math.floor(100*e.loaded/e.total)}%)`)))),Ze.push($e.loadAsync("motion",Re,(e=>Be(1,`Loading motion... ${e.loaded}/${e.total} (${Math.floor(100*e.loaded/e.total)}%)`)))),Ye=await Promise.all(Ze),rt=Ye[1],st.addAnimation(rt),st.setAnimation("motion"),ve.addAnimation(Ye[0]),ve.restoreState(),ve.position.addToRef(f.Pq.TransformCoordinatesFromFloatsToRef(0,0,ve.distance,Li,Ri),Ri),Ee.setCamera(ve),ve.setAnimation("motion"),t.hideLoadingUI()}()}));const It=new k.VJ;It.heightInPixels=ue?100:50,It.left=ue?"220px":"120px",It.top="10px",It.text=We,It.fontSize=ue?40:20,It.textHorizontalAlignment=k.Ec.HORIZONTAL_ALIGNMENT_LEFT,It.horizontalAlignment=k.Ec.HORIZONTAL_ALIGNMENT_LEFT,It.verticalAlignment=k.Ec.VERTICAL_ALIGNMENT_TOP,It.color=pe?"white":"black",me.addControl(It),It.isVisible=!0;let Et=!1;const _t=new k.tN("charPanel");_t.width="720px",_t.height="920px",_t.background="rgb(44,48,50)",_t.cornerRadius=20,_t.thickness=3,_t.color="black",me.addControl(_t),_t.isVisible=!1,_t.onIsVisibleChangedObservable.add((()=>{_t.isVisible||(Et=!1,Oe.attachControl(e,!1),ke.attachControl(e,!1))})),_t.onPointerEnterObservable.add((function(){Oe.detachControl(),ke.detachControl(),Et=!0})),_t.onPointerOutObservable.add((function(){Oe.attachControl(e,!1),ke.attachControl(e,!1),Et=!1}));let Lt,At=!1;_t.onPointerDownObservable.add((()=>{At=!0})),_t.onPointerUpObservable.add((()=>{setTimeout((()=>{At=!1}),100)}));let Rt=!0;const St=new k.tN;St.width="700px",St.height="900px",St.thickness=0,St.cornerRadius=15,St.background=_t.background,_t.addControl(St);const Vt=new k.Pc;Vt.width="700px",Vt.height="900px",St.addControl(Vt);const Nt=new k.tN;Nt.width="700px",Nt.height="150px",Nt.thickness=0,Vt.addControl(Nt);const Dt=k.$n.CreateSimpleButton("but","Genshin Impact");Dt.width="233px",Dt.height="50px",Dt.color="white",Dt.background="rgb(64,68,70)",Dt.disabledColor=_t.background,Dt.thickness=0,Dt.left=-233,Dt.top=-50,Dt.cornerRadiusX=Dt.cornerRadiusY=15,Nt.addControl(Dt);const Bt=k.$n.CreateSimpleButton("but","Honkai: Star Rail");Bt.width="233px",Bt.height="50px",Bt.color="white",Bt.background=_t.background,Bt.disabledColor=_t.background,Bt.thickness=0,Bt.left=0,Bt.top=-50,Bt.cornerRadiusX=Bt.cornerRadiusY=15,Nt.addControl(Bt);const Zt=k.$n.CreateSimpleButton("but","Zenless Zone Zero");Zt.width="233px",Zt.height="50px",Zt.color="white",Zt.background=_t.background,Zt.disabledColor=_t.background,Zt.thickness=0,Zt.left=233,Zt.top=-50,Zt.cornerRadiusX=Zt.cornerRadiusY=15,Nt.addControl(Zt);let $t,zt=!1;const jt=[{key:"id",value:"1000"}],Gt=[{key:"id",value:"2000"}],Ht=[{key:"id",value:"3000"}],Ft=[{key:"id",value:"4000"}];let Wt;function Ut(){"Genshin"!=Ue&&(Dt.background="rgb(64,68,70)","HSR"==Ue?(Bt.background=_t.background,Nn()):"ZZZ"==Ue?(Zt.background=_t.background,ri()):xi(),Ue="Genshin",Wt=de(U,jt),Wt=ce(Wt,$t,zt),cn.isVisible=!0,un.isVisible=!0,Dn.isVisible=!0,Bn.isVisible=!0,Zn.isVisible=!0,$n.isVisible=!0,zn.isVisible=!0,jn.isVisible=!0,Gn.isVisible=!0,Hn.isVisible=!0,Fn.isVisible=!0,Wn.isVisible=!0,Un.isVisible=!0,qn.isVisible=!0,ln.isVisible=!0,Ti(Wt))}function qt(){"HSR"!=Ue&&(Bt.background="rgb(64,68,70)","Genshin"==Ue?(Dt.background=_t.background,Yn()):"ZZZ"==Ue?(Zt.background=_t.background,ri()):xi(),Ue="HSR","id"==$t?dn.image.source="res/assets/release.png":"name"==$t&&(dn.image.source="res/assets/alphabet.png"),Wt=de(Y,Gt),Wt=ce(Wt,$t,zt),wn.isVisible=!0,kn.isVisible=!0,On.isVisible=!0,Cn.isVisible=!0,Pn.isVisible=!0,Tn.isVisible=!0,Mn.isVisible=!0,In.isVisible=!0,En.isVisible=!0,_n.isVisible=!0,Ln.isVisible=!0,An.isVisible=!0,Rn.isVisible=!0,Sn.isVisible=!0,Vn.isVisible=!0,dn.isVisible=!0,bn.isVisible=!0,Ti(Wt))}function Yt(){"ZZZ"!=Ue&&(Zt.background="rgb(64,68,70)","Genshin"==Ue?(Dt.background=_t.background,Yn()):"HSR"==Ue?(Nn(),Bt.background=_t.background):xi(),Ue="ZZZ",Wt=de(J,Ht),Wt=ce(Wt,$t,zt),gn.isVisible=!0,hn.isVisible=!0,Qn.isVisible=!0,Jn.isVisible=!0,Xn.isVisible=!0,Kn.isVisible=!0,ei.isVisible=!0,ti.isVisible=!0,ni.isVisible=!0,ii.isVisible=!0,oi.isVisible=!0,ai.isVisible=!0,si.isVisible=!0,ln.isVisible=!0,Ti(Wt))}Wt=de(U,jt),$t="id",Dt.onPointerClickObservable.add((function(){Ut()})),Bt.onPointerClickObservable.add((function(){qt()})),Zt.onPointerClickObservable.add((function(){Yt()}));const Qt=new k.tN;Qt.width="700px",Qt.height="50px",Qt.thickness=0,Qt.top=0,Qt.background="rgb(64,68,70)",Nt.addControl(Qt);const Jt=new k.tN;Jt.width="700px",Jt.height="50px",Jt.thickness=0,Jt.top=50,Jt.background="rgb(64,68,70)",Jt.cornerRadiusW=Jt.cornerRadiusZ=15,Nt.addControl(Jt);const Xt=new k.VJ;Xt.width="150px",Xt.height="40px",Xt.color="white",Xt.left=-48,Xt.text="",Xt.textHorizontalAlignment=k.Ec.HORIZONTAL_ALIGNMENT_LEFT,Qt.addControl(Xt);const Kt=new k.tN;Kt.width="300px",Kt.height="40px",Kt.background=_t.background,Kt.cornerRadius=15,Kt.left=-190,Kt.thickness=0,Jt.addControl(Kt);const en=k.$n.CreateImageOnlyButton("but","res/assets/search.png");function tn(){"WuWa"!=Ue&&("Genshin"==Ue?(Dt.background=_t.background,Yn()):"HSR"==Ue?(Nn(),Bt.background=_t.background):"ZZZ"==Ue&&(Zt.background=_t.background,ri()),Ue="WuWa",Wt=de(K,Ft),Wt=ce(Wt,$t,zt),pn.isVisible=!0,mn.isVisible=!0,li.isVisible=!0,di.isVisible=!0,ci.isVisible=!0,ui.isVisible=!0,bi.isVisible=!0,gi.isVisible=!0,hi.isVisible=!0,pi.isVisible=!0,mi.isVisible=!0,fi.isVisible=!0,yi.isVisible=!0,ln.isVisible=!0,Ti(Wt))}en.height="40px",en.width="40px",en.left=-130,en.thickness=0,en.cornerRadius=5,Kt.addControl(en),en.onPointerClickObservable.add((function(){tn()})),en.onPointerEnterObservable.add((function(){en.image.source="res/assets/tacet.png"})),en.onPointerOutObservable.add((function(){en.image.source="res/assets/search.png"})),en.onPointerEnterObservable.add((function(){Xt.text="Wuthering Waves"})),en.onPointerOutObservable.add((function(){Xt.text=""}));const nn=new k.Sm;nn.placeholderText="Search all characters...",nn.placeholderColor="rgb(64,68,70)",nn.thickness=0,nn.background=Kt.background,nn.width="220px",nn.color="white",nn.focusedBackground=nn.background,nn.promptMessage="Search for character:",Kt.addControl(nn);let on,an="None";nn.onTextChangedObservable.add((function(){""==nn.text?(Dt.isEnabled=!0,Bt.isEnabled=!0,Zt.isEnabled=!0,rn.isVisible=!0,"Genshin"==an?Ut():"HSR"==an?qt():"ZZZ"==an?Yt():"WuWa"==an&&tn(),an="None"):("None"==an&&(an=Ue,rn.isVisible=!1,Dt.background=_t.background,Dt.isEnabled=!1,Bt.background=_t.background,Bt.isEnabled=!1,Zt.background=_t.background,Zt.isEnabled=!1,Yn(),Nn(),ri(),xi()),Ue="None",on=(e=>{const t=ae(e),n=oe.search(t),i=[];for(let e=0;e<n.length;e++){const t=se(n[e].id);1==t?i.push(te(U,n[e].name)):2==t?i.push(te(Y,n[e].name)):3==t?i.push(te(J,n[e].name)):i.push(te(K,n[e].name))}return i})(nn.text),Ti(on))}));const sn=k.$n.CreateImageOnlyButton("but","res/assets/clear.png");sn.height="40px",sn.width="40px",sn.left=130,sn.thickness=0,sn.cornerRadius=5,Kt.addControl(sn),sn.onPointerClickObservable.add((function(){nn.text=""}));const rn=k.$n.CreateImageOnlyButton("but","res/assets/descending.png");rn.height="40px",rn.width="40px",rn.left=-328,rn.thickness=0,Qt.addControl(rn),rn.onPointerClickObservable.add((()=>{zt?(rn.image.source="res/assets/descending.png",Wt=ce(Wt,$t,!1),Ti(Wt)):(rn.image.source="res/assets/ascending.png",Wt=ce(Wt,$t,!0),Ti(Wt)),zt=!zt}));const ln=k.$n.CreateSimpleButton("but"," Release ");ln.height="40px",ln.width="90px",ln.left=-258,ln.background=_t.background,ln.color="white",ln.cornerRadius=15,ln.thickness=0,Qt.addControl(ln),ln.onPointerClickObservable.add((()=>{null!=ln.textBlock&&("id"==$t?($t="name",dn.image.source="res/assets/release.png",ln.textBlock.text=" Name "):($t="id",dn.image.source="res/assets/alphabet.png",ln.textBlock.text=" Release "),Wt=ce(Wt,$t,zt),Ti(Wt))}));const dn=k.$n.CreateImageOnlyButton("but","res/assets/release.png");dn.height="40px",dn.width="40px",dn.left=-278,dn.thickness=0,Qt.addControl(dn),dn.onPointerClickObservable.add((()=>{"id"==$t?($t="name",dn.image.source="res/assets/alphabet.png",ln.textBlock.text=" Name "):($t="id",dn.image.source="res/assets/release.png",ln.textBlock.text=" Release "),Wt=ce(Wt,$t,zt),Ti(Wt)})),dn.isVisible=!1;const cn=k.$n.CreateImageOnlyButton("but","res/assets/Genshin/rarity_4.png");cn.height="40px",cn.width="40px",cn.left=-188,cn.thickness=0,cn.cornerRadius=5,Qt.addControl(cn),cn.onPointerClickObservable.add((function(){const e=jt.findIndex((e=>"rarity"===e.key));if(-1!==e)"4"==jt[e].value?(jt.splice(e,1),cn.background="rgba(0,0,0,0)"):(jt[e].value="4",un.background="rgba(0,0,0,0)",cn.background=_t.background);else{const e={key:"rarity",value:"4"};jt.push(e),cn.background=_t.background}Wt=de(U,jt),Wt=ce(Wt,$t,zt),Ti(Wt)}));const un=k.$n.CreateImageOnlyButton("but","res/assets/Genshin/rarity_5.png");un.height="40px",un.width="40px",un.left=-148,un.thickness=0,un.cornerRadius=5,Qt.addControl(un),un.onPointerClickObservable.add((function(){const e=jt.findIndex((e=>"rarity"===e.key));if(-1!==e)"5"==jt[e].value?(jt.splice(e,1),un.background="rgba(0,0,0,0)"):(jt[e].value="5",cn.background="rgba(0,0,0,0)",un.background=_t.background);else{const e={key:"rarity",value:"5"};jt.push(e),un.background=_t.background}Wt=de(U,jt),Wt=ce(Wt,$t,zt),Ti(Wt)}));const bn=k.$n.CreateImageOnlyButton("but","res/assets/HSR/rarity_5.png");bn.height="40px",bn.width="40px",bn.left=-238,bn.thickness=0,bn.cornerRadius=5,Qt.addControl(bn),bn.isVisible=!1,bn.onPointerClickObservable.add((function(){const e=Gt.findIndex((e=>"rarity"===e.key));if(-1!==e)"4"==Gt[e].value?(Gt.splice(e,1),bn.background="rgba(0,0,0,0)",bn.image.source="res/assets/HSR/rarity_5.png"):(Gt[e].value="4",bn.background=_t.background,bn.image.source="res/assets/HSR/rarity_4.png");else{const e={key:"rarity",value:"5"};Gt.push(e),bn.background=_t.background}Wt=de(Y,Gt),Wt=ce(Wt,$t,zt),Ti(Wt)}));const gn=k.$n.CreateImageOnlyButton("but","res/assets/ZZZ/Icon_AgentRank_A.png");gn.height="40px",gn.width="40px",gn.left=-188,gn.thickness=0,gn.cornerRadius=5,Qt.addControl(gn),gn.isVisible=!1,gn.onPointerClickObservable.add((function(){const e=Ht.findIndex((e=>"rarity"===e.key));if(-1!==e)"4"==Ht[e].value?(Ht.splice(e,1),gn.background="rgba(0,0,0,0)"):(Ht[e].value="4",hn.background="rgba(0,0,0,0)",gn.background=_t.background);else{const e={key:"rarity",value:"4"};Ht.push(e),gn.background=_t.background}Wt=de(J,Ht),Wt=ce(Wt,$t,zt),Ti(Wt)}));const hn=k.$n.CreateImageOnlyButton("but","res/assets/ZZZ/Icon_AgentRank_S.png");hn.height="40px",hn.width="40px",hn.left=-148,hn.thickness=0,hn.cornerRadius=5,Qt.addControl(hn),hn.isVisible=!1,hn.onPointerClickObservable.add((function(){const e=Ht.findIndex((e=>"rarity"===e.key));if(-1!==e)"5"==Ht[e].value?(Ht.splice(e,1),hn.background="rgba(0,0,0,0)"):(Ht[e].value="5",gn.background="rgba(0,0,0,0)",hn.background=_t.background);else{const e={key:"rarity",value:"5"};Ht.push(e),hn.background=_t.background}Wt=de(J,Ht),Wt=ce(Wt,$t,zt),Ti(Wt)}));const pn=k.$n.CreateImageOnlyButton("but","res/assets/WuWa/rarity_4.png");pn.height="40px",pn.width="40px",pn.left=-188,pn.thickness=0,pn.cornerRadius=5,Qt.addControl(pn),pn.isVisible=!1,pn.onPointerClickObservable.add((function(){const e=Ft.findIndex((e=>"rarity"===e.key));if(-1!==e)"4"==Ft[e].value?(Ft.splice(e,1),pn.background="rgba(0,0,0,0)"):(Ft[e].value="4",mn.background="rgba(0,0,0,0)",pn.background=_t.background);else{const e={key:"rarity",value:"4"};Ft.push(e),pn.background=_t.background}Wt=de(K,Ft),Wt=ce(Wt,$t,zt),Ti(Wt)}));const mn=k.$n.CreateImageOnlyButton("but","res/assets/WuWa/rarity_5.png");function fn(e,t,n){const i=jt.findIndex((e=>e.key===n));if(-1!==i)jt[i].value==t?(jt.splice(i,1),e.background="rgba(0,0,0,0)"):(jt[i].value=t,"element"==n.toString()?(Dn.background="rgba(0,0,0,0)",Bn.background="rgba(0,0,0,0)",Zn.background="rgba(0,0,0,0)",$n.background="rgba(0,0,0,0)",zn.background="rgba(0,0,0,0)",jn.background="rgba(0,0,0,0)",Gn.background="rgba(0,0,0,0)"):(Hn.background="rgba(0,0,0,0)",Fn.background="rgba(0,0,0,0)",Wn.background="rgba(0,0,0,0)",Un.background="rgba(0,0,0,0)",qn.background="rgba(0,0,0,0)"),e.background=_t.background);else{const i={key:n,value:t};jt.push(i),e.background=_t.background}Wt=de(U,jt),Wt=ce(Wt,$t,zt),Ti(Wt)}function yn(e,t,n){const i=Gt.findIndex((e=>e.key===n));if(-1!==i)Gt[i].value==t?(Gt.splice(i,1),e.background="rgba(0,0,0,0)"):(Gt[i].value=t,"element"==n.toString()?(wn.background="rgba(0,0,0,0)",kn.background="rgba(0,0,0,0)",On.background="rgba(0,0,0,0)",Cn.background="rgba(0,0,0,0)",Pn.background="rgba(0,0,0,0)",Tn.background="rgba(0,0,0,0)",Mn.background="rgba(0,0,0,0)"):(In.background="rgba(0,0,0,0)",En.background="rgba(0,0,0,0)",_n.background="rgba(0,0,0,0)",Ln.background="rgba(0,0,0,0)",An.background="rgba(0,0,0,0)",Rn.background="rgba(0,0,0,0)",Sn.background="rgba(0,0,0,0)",Vn.background="rgba(0,0,0,0)"),e.background=_t.background);else{const i={key:n,value:t};Gt.push(i),e.background=_t.background}Wt=de(Y,Gt),Wt=ce(Wt,$t,zt),Ti(Wt)}function xn(e,t,n){const i=Ht.findIndex((e=>e.key===n));if(-1!==i)Ht[i].value==t?(Ht.splice(i,1),e.background="rgba(0,0,0,0)"):(Ht[i].value=t,"element"==n.toString()?(Qn.background="rgba(0,0,0,0)",Jn.background="rgba(0,0,0,0)",Xn.background="rgba(0,0,0,0)",Kn.background="rgba(0,0,0,0)",ei.background="rgba(0,0,0,0)"):(ti.background="rgba(0,0,0,0)",ni.background="rgba(0,0,0,0)",ii.background="rgba(0,0,0,0)",oi.background="rgba(0,0,0,0)",ai.background="rgba(0,0,0,0)",si.background="rgba(0,0,0,0)"),e.background=_t.background);else{const i={key:n,value:t};Ht.push(i),e.background=_t.background}Wt=de(J,Ht),Wt=ce(Wt,$t,zt),Ti(Wt)}function vn(e,t,n){const i=Ft.findIndex((e=>e.key===n));if(-1!==i)Ft[i].value==t?(Ft.splice(i,1),e.background="rgba(0,0,0,0)"):(Ft[i].value=t,"element"==n.toString()?(li.background="rgba(0,0,0,0)",di.background="rgba(0,0,0,0)",ci.background="rgba(0,0,0,0)",ui.background="rgba(0,0,0,0)",bi.background="rgba(0,0,0,0)",gi.background="rgba(0,0,0,0)"):(hi.background="rgba(0,0,0,0)",pi.background="rgba(0,0,0,0)",mi.background="rgba(0,0,0,0)",fi.background="rgba(0,0,0,0)",yi.background="rgba(0,0,0,0)"),e.background=_t.background);else{const i={key:n,value:t};Ft.push(i),e.background=_t.background}Wt=de(K,Ft),Wt=ce(Wt,$t,zt),Ti(Wt)}mn.height="40px",mn.width="40px",mn.left=-148,mn.thickness=0,mn.cornerRadius=5,Qt.addControl(mn),mn.isVisible=!1,mn.onPointerClickObservable.add((function(){const e=Ft.findIndex((e=>"rarity"===e.key));if(-1!==e)"5"==Ft[e].value?(Ft.splice(e,1),mn.background="rgba(0,0,0,0)"):(Ft[e].value="5",pn.background="rgba(0,0,0,0)",mn.background=_t.background);else{const e={key:"rarity",value:"5"};Ft.push(e),mn.background=_t.background}Wt=de(K,Ft),Wt=ce(Wt,$t,zt),Ti(Wt)}));const wn=k.$n.CreateImageOnlyButton("but","res/assets/HSR/element_fire.png");wn.height="40px",wn.width="40px",wn.left=52,wn.thickness=0,wn.cornerRadius=5,wn.isVisible=!1,Qt.addControl(wn),wn.onPointerClickObservable.add((function(){yn(wn,"Fire","element")})),wn.onPointerEnterObservable.add((function(){Xt.text="Fire"})),wn.onPointerOutObservable.add((function(){Xt.text=""}));const kn=k.$n.CreateImageOnlyButton("but","res/assets/HSR/element_ice.png");kn.height="40px",kn.width="40px",kn.left=92,kn.thickness=0,kn.cornerRadius=5,kn.isVisible=!1,Qt.addControl(kn),kn.onPointerClickObservable.add((function(){yn(kn,"Ice","element")})),kn.onPointerEnterObservable.add((function(){Xt.text="Ice"})),kn.onPointerOutObservable.add((function(){Xt.text=""}));const On=k.$n.CreateImageOnlyButton("but","res/assets/HSR/element_imaginary.png");On.height="40px",On.width="40px",On.left=132,On.thickness=0,On.cornerRadius=5,On.isVisible=!1,Qt.addControl(On),On.onPointerClickObservable.add((function(){yn(On,"Imaginary","element")})),On.onPointerEnterObservable.add((function(){Xt.text="Imaginary"})),On.onPointerOutObservable.add((function(){Xt.text=""}));const Cn=k.$n.CreateImageOnlyButton("but","res/assets/HSR/element_lightning.png");Cn.height="40px",Cn.width="40px",Cn.left=172,Cn.thickness=0,Cn.cornerRadius=5,Cn.isVisible=!1,Qt.addControl(Cn),Cn.onPointerClickObservable.add((function(){yn(Cn,"Lightning","element")})),Cn.onPointerEnterObservable.add((function(){Xt.text="Lightning"})),Cn.onPointerOutObservable.add((function(){Xt.text=""}));const Pn=k.$n.CreateImageOnlyButton("but","res/assets/HSR/element_physical.png");Pn.height="40px",Pn.width="40px",Pn.left=212,Pn.thickness=0,Pn.cornerRadius=5,Pn.isVisible=!1,Qt.addControl(Pn),Pn.onPointerClickObservable.add((function(){yn(Pn,"Physical","element")})),Pn.onPointerEnterObservable.add((function(){Xt.text="Physical"})),Pn.onPointerOutObservable.add((function(){Xt.text=""}));const Tn=k.$n.CreateImageOnlyButton("but","res/assets/HSR/element_quantum.png");Tn.height="40px",Tn.width="40px",Tn.left=252,Tn.thickness=0,Tn.cornerRadius=5,Tn.isVisible=!1,Qt.addControl(Tn),Tn.onPointerClickObservable.add((function(){yn(Tn,"Quantum","element")})),Tn.onPointerEnterObservable.add((function(){Xt.text="Quantum"})),Tn.onPointerOutObservable.add((function(){Xt.text=""}));const Mn=k.$n.CreateImageOnlyButton("but","res/assets/HSR/element_wind.png");Mn.height="40px",Mn.width="40px",Mn.left=292,Mn.thickness=0,Mn.cornerRadius=5,Mn.isVisible=!1,Qt.addControl(Mn),Mn.onPointerClickObservable.add((function(){yn(Mn,"Wind","element")})),Mn.onPointerEnterObservable.add((function(){Xt.text="Wind"})),Mn.onPointerOutObservable.add((function(){Xt.text=""}));const In=k.$n.CreateImageOnlyButton("but","res/assets/HSR/path_the_abundance.png");In.height="40px",In.width="40px",In.left=12,In.thickness=0,In.cornerRadius=5,In.isVisible=!1,Jt.addControl(In),In.onPointerClickObservable.add((function(){yn(In,"Abundance","weaponType")})),In.onPointerEnterObservable.add((function(){Xt.text="Abundance"})),In.onPointerOutObservable.add((function(){Xt.text=""}));const En=k.$n.CreateImageOnlyButton("but","res/assets/HSR/path_the_destruction.png");En.height="40px",En.width="40px",En.left=52,En.thickness=0,En.cornerRadius=5,En.isVisible=!1,Jt.addControl(En),En.onPointerClickObservable.add((function(){yn(En,"Destruction","weaponType")})),En.onPointerEnterObservable.add((function(){Xt.text="Destruction"})),En.onPointerOutObservable.add((function(){Xt.text=""}));const _n=k.$n.CreateImageOnlyButton("but","res/assets/HSR/path_the_erudition.png");_n.height="40px",_n.width="40px",_n.left=92,_n.thickness=0,_n.cornerRadius=5,_n.isVisible=!1,Jt.addControl(_n),_n.onPointerClickObservable.add((function(){yn(_n,"Erudition","weaponType")})),_n.onPointerEnterObservable.add((function(){Xt.text="Erudition"})),_n.onPointerOutObservable.add((function(){Xt.text=""}));const Ln=k.$n.CreateImageOnlyButton("but","res/assets/HSR/path_the_harmony.png");Ln.height="40px",Ln.width="40px",Ln.left=132,Ln.thickness=0,Ln.cornerRadius=5,Ln.isVisible=!1,Jt.addControl(Ln),Ln.onPointerClickObservable.add((function(){yn(Ln,"Harmony","weaponType")})),Ln.onPointerEnterObservable.add((function(){Xt.text="Harmony"})),Ln.onPointerOutObservable.add((function(){Xt.text=""}));const An=k.$n.CreateImageOnlyButton("but","res/assets/HSR/path_the_hunt.png");An.height="40px",An.width="40px",An.left=172,An.thickness=0,An.cornerRadius=5,An.isVisible=!1,Jt.addControl(An),An.onPointerClickObservable.add((function(){yn(An,"Hunt","weaponType")})),An.onPointerEnterObservable.add((function(){Xt.text="Hunt"})),An.onPointerOutObservable.add((function(){Xt.text=""}));const Rn=k.$n.CreateImageOnlyButton("but","res/assets/HSR/path_the_nihility.png");Rn.height="40px",Rn.width="40px",Rn.left=212,Rn.thickness=0,Rn.cornerRadius=5,Rn.isVisible=!1,Jt.addControl(Rn),Rn.onPointerClickObservable.add((function(){yn(Rn,"Nihility","weaponType")})),Rn.onPointerEnterObservable.add((function(){Xt.text="Nihility"})),Rn.onPointerOutObservable.add((function(){Xt.text=""}));const Sn=k.$n.CreateImageOnlyButton("but","res/assets/HSR/path_the_preservation.png");Sn.height="40px",Sn.width="40px",Sn.left=252,Sn.thickness=0,Sn.cornerRadius=5,Sn.isVisible=!1,Jt.addControl(Sn),Sn.onPointerClickObservable.add((function(){yn(Sn,"Preservation","weaponType")})),Sn.onPointerEnterObservable.add((function(){Xt.text="Preservation"})),Sn.onPointerOutObservable.add((function(){Xt.text=""}));const Vn=k.$n.CreateImageOnlyButton("but","res/assets/HSR/path_the_remembrance.png");function Nn(){wn.isVisible=!1,kn.isVisible=!1,On.isVisible=!1,Cn.isVisible=!1,Pn.isVisible=!1,Tn.isVisible=!1,Mn.isVisible=!1,In.isVisible=!1,En.isVisible=!1,_n.isVisible=!1,Ln.isVisible=!1,An.isVisible=!1,Rn.isVisible=!1,Sn.isVisible=!1,Vn.isVisible=!1,dn.isVisible=!1,bn.isVisible=!1}Vn.height="40px",Vn.width="40px",Vn.left=292,Vn.thickness=0,Vn.cornerRadius=5,Vn.isVisible=!1,Jt.addControl(Vn),Vn.onPointerClickObservable.add((function(){yn(Vn,"Remembrance","weaponType")})),Vn.onPointerEnterObservable.add((function(){Xt.text="Remembrance"})),Vn.onPointerOutObservable.add((function(){Xt.text=""}));const Dn=k.$n.CreateImageOnlyButton("but","res/assets/Genshin/element_anemo.png");Dn.height="40px",Dn.width="40px",Dn.left=52,Dn.thickness=0,Dn.cornerRadius=5,Qt.addControl(Dn),Dn.onPointerClickObservable.add((function(){fn(Dn,"Anemo","element")})),Dn.onPointerEnterObservable.add((function(){Xt.text="Anemo"})),Dn.onPointerOutObservable.add((function(){Xt.text=""}));const Bn=k.$n.CreateImageOnlyButton("but","res/assets/Genshin/element_geo.png");Bn.height="40px",Bn.width="40px",Bn.left=92,Bn.thickness=0,Bn.cornerRadius=5,Qt.addControl(Bn),Bn.onPointerClickObservable.add((function(){fn(Bn,"Geo","element")})),Bn.onPointerEnterObservable.add((function(){Xt.text="Geo"})),Bn.onPointerOutObservable.add((function(){Xt.text=""}));const Zn=k.$n.CreateImageOnlyButton("but","res/assets/Genshin/element_electro.png");Zn.height="40px",Zn.width="40px",Zn.left=132,Zn.thickness=0,Zn.cornerRadius=5,Qt.addControl(Zn),Zn.onPointerClickObservable.add((function(){fn(Zn,"Electro","element")})),Zn.onPointerEnterObservable.add((function(){Xt.text="Electro"})),Zn.onPointerOutObservable.add((function(){Xt.text=""}));const $n=k.$n.CreateImageOnlyButton("but","res/assets/Genshin/element_dendro.png");$n.height="40px",$n.width="40px",$n.left=172,$n.thickness=0,$n.cornerRadius=5,Qt.addControl($n),$n.onPointerClickObservable.add((function(){fn($n,"Dendro","element")})),$n.onPointerEnterObservable.add((function(){Xt.text="Dendro"})),$n.onPointerOutObservable.add((function(){Xt.text=""}));const zn=k.$n.CreateImageOnlyButton("but","res/assets/Genshin/element_hydro.png");zn.height="40px",zn.width="40px",zn.left=212,zn.thickness=0,zn.cornerRadius=5,Qt.addControl(zn),zn.onPointerClickObservable.add((function(){fn(zn,"Hydro","element")})),zn.onPointerEnterObservable.add((function(){Xt.text="Hydro"})),zn.onPointerOutObservable.add((function(){Xt.text=""}));const jn=k.$n.CreateImageOnlyButton("but","res/assets/Genshin/element_pyro.png");jn.height="40px",jn.width="40px",jn.left=252,jn.thickness=0,jn.cornerRadius=5,Qt.addControl(jn),jn.onPointerClickObservable.add((function(){fn(jn,"Pyro","element")})),jn.onPointerEnterObservable.add((function(){Xt.text="Pyro"})),jn.onPointerOutObservable.add((function(){Xt.text=""}));const Gn=k.$n.CreateImageOnlyButton("but","res/assets/Genshin/element_cryo.png");Gn.height="40px",Gn.width="40px",Gn.left=292,Gn.thickness=0,Gn.cornerRadius=5,Qt.addControl(Gn),Gn.onPointerClickObservable.add((function(){fn(Gn,"Cryo","element")})),Gn.onPointerEnterObservable.add((function(){Xt.text="Cryo"})),Gn.onPointerOutObservable.add((function(){Xt.text=""}));const Hn=k.$n.CreateImageOnlyButton("but","res/assets/Genshin/Sword.png");Hn.height="40px",Hn.width="40px",Hn.left=92,Hn.thickness=0,Hn.cornerRadius=5,Jt.addControl(Hn),Hn.onPointerClickObservable.add((function(){fn(Hn,"Sword","weaponType")})),Hn.onPointerEnterObservable.add((function(){Xt.text="Sword"})),Hn.onPointerOutObservable.add((function(){Xt.text=""}));const Fn=k.$n.CreateImageOnlyButton("but","res/assets/Genshin/Catalyst.png");Fn.height="40px",Fn.width="40px",Fn.left=132,Fn.thickness=0,Fn.cornerRadius=5,Jt.addControl(Fn),Fn.onPointerClickObservable.add((function(){fn(Fn,"Catalyst","weaponType")})),Fn.onPointerEnterObservable.add((function(){Xt.text="Catalyst"})),Fn.onPointerOutObservable.add((function(){Xt.text=""}));const Wn=k.$n.CreateImageOnlyButton("but","res/assets/Genshin/Bow.png");Wn.height="40px",Wn.width="40px",Wn.left=172,Wn.thickness=0,Wn.cornerRadius=5,Jt.addControl(Wn),Wn.onPointerClickObservable.add((function(){fn(Wn,"Bow","weaponType")})),Wn.onPointerEnterObservable.add((function(){Xt.text="Bow"})),Wn.onPointerOutObservable.add((function(){Xt.text=""}));const Un=k.$n.CreateImageOnlyButton("but","res/assets/Genshin/Claymore.png");Un.height="40px",Un.width="40px",Un.left=212,Un.thickness=0,Un.cornerRadius=5,Jt.addControl(Un),Un.onPointerClickObservable.add((function(){fn(Un,"Claymore","weaponType")})),Un.onPointerEnterObservable.add((function(){Xt.text="Claymore"})),Un.onPointerOutObservable.add((function(){Xt.text=""}));const qn=k.$n.CreateImageOnlyButton("but","res/assets/Genshin/Pole.png");function Yn(){cn.isVisible=!1,un.isVisible=!1,Dn.isVisible=!1,Bn.isVisible=!1,Zn.isVisible=!1,$n.isVisible=!1,zn.isVisible=!1,jn.isVisible=!1,Gn.isVisible=!1,Hn.isVisible=!1,Fn.isVisible=!1,Wn.isVisible=!1,Un.isVisible=!1,qn.isVisible=!1,ln.isVisible=!1}qn.height="40px",qn.width="40px",qn.left=252,qn.thickness=0,qn.cornerRadius=5,Jt.addControl(qn),qn.onPointerClickObservable.add((function(){fn(qn,"Polearm","weaponType")})),qn.onPointerEnterObservable.add((function(){Xt.text="Polearm"})),qn.onPointerOutObservable.add((function(){Xt.text=""}));const Qn=k.$n.CreateImageOnlyButton("but","res/assets/ZZZ/Icon_Electric.png");Qn.height="40px",Qn.width="40px",Qn.left=92,Qn.thickness=0,Qn.cornerRadius=5,Qn.isVisible=!1,Qt.addControl(Qn),Qn.onPointerClickObservable.add((function(){xn(Qn,"Electric","element")})),Qn.onPointerEnterObservable.add((function(){Xt.text="Electric"})),Qn.onPointerOutObservable.add((function(){Xt.text=""}));const Jn=k.$n.CreateImageOnlyButton("but","res/assets/ZZZ/Icon_Ether.png");Jn.height="40px",Jn.width="40px",Jn.left=132,Jn.thickness=0,Jn.cornerRadius=5,Jn.isVisible=!1,Qt.addControl(Jn),Jn.onPointerClickObservable.add((function(){xn(Jn,"Ether","element")})),Jn.onPointerEnterObservable.add((function(){Xt.text="Ether"})),Jn.onPointerOutObservable.add((function(){Xt.text=""}));const Xn=k.$n.CreateImageOnlyButton("but","res/assets/ZZZ/Icon_Fire.png");Xn.height="40px",Xn.width="40px",Xn.left=172,Xn.thickness=0,Xn.cornerRadius=5,Xn.isVisible=!1,Qt.addControl(Xn),Xn.onPointerClickObservable.add((function(){xn(Xn,"Fire","element")})),Xn.onPointerEnterObservable.add((function(){Xt.text="Fire"})),Xn.onPointerOutObservable.add((function(){Xt.text=""}));const Kn=k.$n.CreateImageOnlyButton("but","res/assets/ZZZ/Icon_Ice.png");Kn.height="40px",Kn.width="40px",Kn.left=212,Kn.thickness=0,Kn.cornerRadius=5,Kn.isVisible=!1,Qt.addControl(Kn),Kn.onPointerClickObservable.add((function(){xn(Kn,"Ice","element")})),Kn.onPointerEnterObservable.add((function(){Xt.text="Ice"})),Kn.onPointerOutObservable.add((function(){Xt.text=""}));const ei=k.$n.CreateImageOnlyButton("but","res/assets/ZZZ/Icon_Physical.png");ei.height="40px",ei.width="40px",ei.left=252,ei.thickness=0,ei.cornerRadius=5,ei.isVisible=!1,Qt.addControl(ei),ei.onPointerClickObservable.add((function(){xn(ei,"Physical","element")})),ei.onPointerEnterObservable.add((function(){Xt.text="Physical"})),ei.onPointerOutObservable.add((function(){Xt.text=""}));const ti=k.$n.CreateImageOnlyButton("but","res/assets/ZZZ/Icon_Anomaly.png");ti.height="40px",ti.width="40px",ti.left=92,ti.thickness=0,ti.cornerRadius=5,ti.isVisible=!1,Jt.addControl(ti),ti.onPointerClickObservable.add((function(){xn(ti,"Anomaly","weaponType")})),ti.onPointerEnterObservable.add((function(){Xt.text="Anomaly"})),ti.onPointerOutObservable.add((function(){Xt.text=""}));const ni=k.$n.CreateImageOnlyButton("but","res/assets/ZZZ/Icon_Attack.png");ni.height="40px",ni.width="40px",ni.left=132,ni.thickness=0,ni.cornerRadius=5,ni.isVisible=!1,Jt.addControl(ni),ni.onPointerClickObservable.add((function(){xn(ni,"Attack","weaponType")})),ni.onPointerEnterObservable.add((function(){Xt.text="Attack"})),ni.onPointerOutObservable.add((function(){Xt.text=""}));const ii=k.$n.CreateImageOnlyButton("but","res/assets/ZZZ/Icon_Defense.png");ii.height="40px",ii.width="40px",ii.left=172,ii.thickness=0,ii.cornerRadius=5,ii.isVisible=!1,Jt.addControl(ii),ii.onPointerClickObservable.add((function(){xn(ii,"Defense","weaponType")})),ii.onPointerEnterObservable.add((function(){Xt.text="Defense"})),ii.onPointerOutObservable.add((function(){Xt.text=""}));const oi=k.$n.CreateImageOnlyButton("but","res/assets/ZZZ/Icon_Stun.png");oi.height="40px",oi.width="40px",oi.left=212,oi.thickness=0,oi.cornerRadius=5,oi.isVisible=!1,Jt.addControl(oi),oi.onPointerClickObservable.add((function(){xn(oi,"Stun","weaponType")})),oi.onPointerEnterObservable.add((function(){Xt.text="Stun"})),oi.onPointerOutObservable.add((function(){Xt.text=""}));const ai=k.$n.CreateImageOnlyButton("but","res/assets/ZZZ/Icon_Support.png");ai.height="40px",ai.width="40px",ai.left=252,ai.thickness=0,ai.cornerRadius=5,ai.isVisible=!1,Jt.addControl(ai),ai.onPointerClickObservable.add((function(){xn(ai,"Support","weaponType")})),ai.onPointerEnterObservable.add((function(){Xt.text="Support"})),ai.onPointerOutObservable.add((function(){Xt.text=""}));const si=k.$n.CreateImageOnlyButton("but","res/assets/ZZZ/Icon_Rupture.png");function ri(){gn.isVisible=!1,hn.isVisible=!1,Qn.isVisible=!1,Jn.isVisible=!1,Xn.isVisible=!1,Kn.isVisible=!1,ei.isVisible=!1,ti.isVisible=!1,ni.isVisible=!1,ii.isVisible=!1,oi.isVisible=!1,ai.isVisible=!1,si.isVisible=!1,ln.isVisible=!1}si.height="40px",si.width="40px",si.left=292,si.thickness=0,si.cornerRadius=5,si.isVisible=!1,Jt.addControl(si),si.onPointerClickObservable.add((function(){xn(si,"Rupture","weaponType")})),si.onPointerEnterObservable.add((function(){Xt.text="Rupture"})),si.onPointerOutObservable.add((function(){Xt.text=""}));const li=k.$n.CreateImageOnlyButton("but","res/assets/WuWa/Aero.png");li.height="40px",li.width="40px",li.left=52,li.thickness=0,li.cornerRadius=5,Qt.addControl(li),li.onPointerClickObservable.add((function(){vn(li,"Aero","element")})),li.onPointerEnterObservable.add((function(){Xt.text="Aero"})),li.onPointerOutObservable.add((function(){Xt.text=""}));const di=k.$n.CreateImageOnlyButton("but","res/assets/WuWa/Spectro.png");di.height="40px",di.width="40px",di.left=92,di.thickness=0,di.cornerRadius=5,Qt.addControl(di),di.onPointerClickObservable.add((function(){vn(di,"Spectro","element")})),di.onPointerEnterObservable.add((function(){Xt.text="Spectro"})),di.onPointerOutObservable.add((function(){Xt.text=""}));const ci=k.$n.CreateImageOnlyButton("but","res/assets/WuWa/Electro.png");ci.height="40px",ci.width="40px",ci.left=132,ci.thickness=0,ci.cornerRadius=5,Qt.addControl(ci),ci.onPointerClickObservable.add((function(){vn(ci,"Electro","element")})),ci.onPointerEnterObservable.add((function(){Xt.text="Electro"})),ci.onPointerOutObservable.add((function(){Xt.text=""}));const ui=k.$n.CreateImageOnlyButton("but","res/assets/WuWa/Havoc.png");ui.height="40px",ui.width="40px",ui.left=172,ui.thickness=0,ui.cornerRadius=5,Qt.addControl(ui),ui.onPointerClickObservable.add((function(){vn(ui,"Havoc","element")})),ui.onPointerEnterObservable.add((function(){Xt.text="Havoc"})),ui.onPointerOutObservable.add((function(){Xt.text=""}));const bi=k.$n.CreateImageOnlyButton("but","res/assets/WuWa/Glacio.png");bi.height="40px",bi.width="40px",bi.left=212,bi.thickness=0,bi.cornerRadius=5,Qt.addControl(bi),bi.onPointerClickObservable.add((function(){vn(bi,"Glacio","element")})),bi.onPointerEnterObservable.add((function(){Xt.text="Glacio"})),bi.onPointerOutObservable.add((function(){Xt.text=""}));const gi=k.$n.CreateImageOnlyButton("but","res/assets/WuWa/Fusion.png");gi.height="40px",gi.width="40px",gi.left=252,gi.thickness=0,gi.cornerRadius=5,Qt.addControl(gi),gi.onPointerClickObservable.add((function(){vn(gi,"Fusion","element")})),gi.onPointerEnterObservable.add((function(){Xt.text="Fusion"})),gi.onPointerOutObservable.add((function(){Xt.text=""}));const hi=k.$n.CreateImageOnlyButton("but","res/assets/WuWa/Sword_Icon.png");hi.height="40px",hi.width="40px",hi.left=92,hi.thickness=0,hi.cornerRadius=5,Jt.addControl(hi),hi.onPointerClickObservable.add((function(){vn(hi,"Sword","weaponType")})),hi.onPointerEnterObservable.add((function(){Xt.text="Sword"})),hi.onPointerOutObservable.add((function(){Xt.text=""}));const pi=k.$n.CreateImageOnlyButton("but","res/assets/WuWa/Rectifier_Icon.png");pi.height="40px",pi.width="40px",pi.left=132,pi.thickness=0,pi.cornerRadius=5,Jt.addControl(pi),pi.onPointerClickObservable.add((function(){vn(pi,"Rectifier","weaponType")})),pi.onPointerEnterObservable.add((function(){Xt.text="Rectifier"})),pi.onPointerOutObservable.add((function(){Xt.text=""}));const mi=k.$n.CreateImageOnlyButton("but","res/assets/WuWa/Pistols_Icon.png");mi.height="40px",mi.width="40px",mi.left=172,mi.thickness=0,mi.cornerRadius=5,Jt.addControl(mi),mi.onPointerClickObservable.add((function(){vn(mi,"Pistols","weaponType")})),mi.onPointerEnterObservable.add((function(){Xt.text="Pistols"})),mi.onPointerOutObservable.add((function(){Xt.text=""}));const fi=k.$n.CreateImageOnlyButton("but","res/assets/WuWa/Gauntlets_Icon.png");fi.height="40px",fi.width="40px",fi.left=212,fi.thickness=0,fi.cornerRadius=5,Jt.addControl(fi),fi.onPointerClickObservable.add((function(){vn(fi,"Gauntlets","weaponType")})),fi.onPointerEnterObservable.add((function(){Xt.text="Gauntlets"})),fi.onPointerOutObservable.add((function(){Xt.text=""}));const yi=k.$n.CreateImageOnlyButton("but","res/assets/WuWa/Broadblade_Icon.png");function xi(){pn.isVisible=!1,mn.isVisible=!1,li.isVisible=!1,di.isVisible=!1,ci.isVisible=!1,ui.isVisible=!1,bi.isVisible=!1,gi.isVisible=!1,hi.isVisible=!1,pi.isVisible=!1,mi.isVisible=!1,fi.isVisible=!1,yi.isVisible=!1,ln.isVisible=!1,en.image.source="res/assets/search.png"}yi.height="40px",yi.width="40px",yi.left=252,yi.thickness=0,yi.cornerRadius=5,Jt.addControl(yi),yi.onPointerClickObservable.add((function(){vn(yi,"Broadblade","weaponType")})),yi.onPointerEnterObservable.add((function(){Xt.text="Broadblade"})),yi.onPointerOutObservable.add((function(){Xt.text=""})),xi(),ln.isVisible=!0;const vi=new k.oE("scrollName");vi.cornerRadiusX=15,vi.cornerRadiusY=15,vi.thickness=0,Vt.addControl(vi);let wi,ki,Oi=!1;vi.onPointerDownObservable.add((()=>{Oi=!0})),vi.onPointerUpObservable.add((()=>{Oi=!1}));let Ci=new k.xA,Pi=10;function Ti(e){Ci.dispose(),Ci=new k.xA,Pi=Math.ceil(e.length/5)+1,Ci.removeRowDefinition,Ci.color="black",Ci.width="680px",Ci.heightInPixels=Pi*Ci.widthInPixels/5,Ci.addColumnDefinition(.2),Ci.addColumnDefinition(.2),Ci.addColumnDefinition(.2),Ci.addColumnDefinition(.2),Ci.addColumnDefinition(.2);for(let e=0;e<Pi;e++)Ci.addRowDefinition(1/Pi);vi.addControl(Ci);let t=0;for(let n=0;n<Pi;n++)for(let i=0;i<5;i++)if(t>e.length-1){let e;"Genshin"==Ue||"None"==Ue?(e=k.$n.CreateImageOnlyButton("but",j+"gi/Genshin/Paimon.png"),e.onPointerEnterObservable.add((function(){Xt.text="Paimon"})),e.onPointerClickObservable.add((async function(){_t.isVisible=!_t.isVisible,"Paimon"!=We&&await Ei("Paimon")}))):"HSR"==Ue?(e=k.$n.CreateImageOnlyButton("but",j+"hsr/HSR/Pom-Pom.png"),e.onPointerEnterObservable.add((function(){Xt.text="Pom-Pom"})),e.onPointerClickObservable.add((async function(){_t.isVisible=!_t.isVisible,"Pom-Pom"!=We&&await Ei("Pom-Pom")}))):"ZZZ"==Ue?(e=k.$n.CreateImageOnlyButton("but",j+"zzz/ZZZ/Bangboo.png"),e.onPointerEnterObservable.add((function(){Xt.text="Bangboo"})),e.onPointerClickObservable.add((async function(){_t.isVisible=!_t.isVisible,"Bangboo"!=We&&await Ei("Bangboo")}))):(e=k.$n.CreateImageOnlyButton("but",j+"ww/WuWa/Abby.png"),e.onPointerEnterObservable.add((function(){Xt.text="Abby"})),e.onPointerClickObservable.add((async function(){_t.isVisible=!_t.isVisible,"Abby"!=We&&await Ei("Abby")}))),e.onPointerOutObservable.add((function(){Xt.text=""})),e.thickness=0,e.paddingBottom=e.paddingLeft=e.paddingRight=e.paddingTop=5,e.cornerRadius=10,Ci.addControl(e,n,i)}else{const o=e[t],a=new k.tN;a.cornerRadius=10,a.thickness=0,a.paddingBottom=a.paddingTop=a.paddingRight=a.paddingLeft=5,a.background="rgb(123,92,144)",5==o.rarity?a.background="rgb(146,109,69)":6==o.rarity&&(a.background="rgb(192,79,85)"),Ci.addControl(a,n,i);const s=k.$n.CreateImageOnlyButton("but",`${j}/${o.image}`);if(s.thickness=0,s.cornerRadius=10,s.paddingBottom=s.paddingTop=s.paddingRight=s.paddingLeft=5,Ci.addControl(s,n,i),s.onPointerEnterObservable.add((function(){Xt.text=o.name})),s.onPointerOutObservable.add((function(){Xt.text=""})),s.onPointerClickObservable.add((async function(){_t.isVisible=!_t.isVisible,(We!=o.name||je!=o.id&&1!=Ot)&&await Ei(o.name,o.id)})),te(ie,o.name)){const e=new k._V("but","res/assets/skin_icon.png");e.verticalAlignment=k.Ec.VERTICAL_ALIGNMENT_TOP,e.horizontalAlignment=k.Ec.HORIZONTAL_ALIGNMENT_RIGHT,e.paddingRight=e.paddingTop=10,e.widthInPixels=e.heightInPixels=Ci.widthInPixels/30,Ci.addControl(e,n,i)}t+=1}}Ti(Wt);const Mi={wasAnimationPlaying:!1,previousSeekTimeFrame:0,wasMuted:!1};let Ii=0;async function Ei(e,t){if(!e)return;Ee.isAnimationPlaying&&(Mi.wasAnimationPlaying=!0),Ee.pauseAnimation(),Mi.previousSeekTimeFrame=Ee.currentFrameTime,ze=We,We=e,It.text=We,null!=wt&&(wt.isVisible=!1),ue||Ie.stop(),tt.dispose(!1,!0),et&&et.dispose(!1,!0),Ve.dispose(),ve.restoreState(),Ee.unregister(he),Ee=new _.j(he),Ee.loggingEnabled=!0,Ee.register(he),Ee.setAudioPlayer(Se),Ve=new z(he,Ee,Se,ue),Ve.showPlayerControl();let n=0;if("None"==Ue&&(n=se(t),Ii=n),"Paimon"==We||"Pom-Pom"==We||"Bangboo"==We||"Abby"==We)Ot=!1,Ge=te(W,We),await _i(Ge);else if("Genshin"==Ue||1==n){const e=le(q,We);if(ze==We)if(e.length>0&&!Ot){Ge=e[0],Ot=!0,await _i(Ge);let t=!1;e.length>1&&(t=!0),kt(!0,t,Ge.name)}else if(e.length>0&&Ot&&e.length>1){let t=!0,n=0;for(let t=0;t<e.length;t++)Ge.id===e[t].id&&(n=t);const i=(n+1)%e.length;i==e.length-1&&(t=!1),n==e.length-1?(Ge=te(U,We),Ot=!1):(Ge=e[i],Ot=!0),await _i(Ge),kt(!0,t,Ge.name)}else e.length>0&&Ot&&(Ot=!1,Ge=te(U,We),await _i(Ge),kt(!0,!0,Ge.name));else Ot=!1,Ge=te(U,We),await _i(Ge),e.length>0&&kt(!0,!0,Ge.name)}else if("HSR"==Ue||2==n){const e=le(Q,We);if(ze==We&&je==Ge?.id)if(e.length>0&&!Ot){Ge=e[0],Ot=!0,await _i(Ge);let t=!1;e.length>1&&(t=!0),kt(!0,t,Ge.name)}else if(e.length>0&&Ot&&e.length>1){let t=!0,n=0;for(let t=0;t<e.length;t++)Ge.id===e[t].id&&(n=t);const i=(n+1)%e.length;i==e.length-1&&(t=!1),n==e.length-1?(Ge=te(Y,We),Ot=!1):(Ge=e[i],Ot=!0),await _i(Ge),kt(!0,t,Ge.name)}else e.length>0&&Ot&&(Ot=!1,Ge=te(Y,We),await _i(Ge),kt(!0,!0,Ge.name));else Ot=!1,Ge=re(Y,t),await _i(Ge),e.length>0&&kt(!0,!0,Ge.name)}else if("ZZZ"==Ue||3==n){const e=le(X,We);if(ze==We&&je==Ge?.id)if(e.length>0&&!Ot){Ge=e[0],Ot=!0,await _i(Ge);let t=!1;e.length>1&&(t=!0),kt(!0,t,Ge.name)}else if(e.length>0&&Ot&&e.length>1){let t=!0,n=0;for(let t=0;t<e.length;t++)Ge.id===e[t].id&&(n=t);const i=(n+1)%e.length;i==e.length-1&&(t=!1),n==e.length-1?(Ge=te(J,We),Ot=!1):(Ge=e[i],Ot=!0),await _i(Ge),kt(!0,t,Ge.name)}else e.length>0&&Ot&&(Ot=!1,Ge=te(J,We),await _i(Ge),kt(!0,!0,Ge.name));else Ot=!1,Ge=re(J,t),await _i(Ge),e.length>0&&kt(!0,!0,Ge.name)}else if("WuWa"==Ue||4==n){const e=le(ee,We);if(ze==We&&je==Ge?.id)if(e.length>0&&!Ot){Ge=e[0],Ot=!0,await _i(Ge);let t=!1;e.length>1&&(t=!0),kt(!0,t,Ge.name)}else if(e.length>0&&Ot&&e.length>1){let t=!0,n=0;for(let t=0;t<e.length;t++)Ge.id===e[t].id&&(n=t);const i=(n+1)%e.length;i==e.length-1&&(t=!1),n==e.length-1?(Ge=te(K,We),Ot=!1):(Ge=e[i],Ot=!0),await _i(Ge),kt(!0,t,Ge.name)}else e.length>0&&Ot&&(Ot=!1,Ge=te(K,We),await _i(Ge),kt(!0,!0,Ge.name));else Ot=!1,Ge=re(K,t),await _i(Ge),e.length>0&&kt(!0,!0,Ge.name)}else Ot=!1,Ge=te("Genshin"===Ue||1===n?U:"HSR"===Ue||2===n?Y:"ZZZ"===Ue||3===n?J:"WuWa"===Ue||4===n?K:[],We),await _i(Ge);Mi.wasAnimationPlaying?(Ee.seekAnimation(Mi.previousSeekTimeFrame,!0),Mi.wasAnimationPlaying=!1,Ee.isAnimationPlaying||Ee.playAnimation()):(Oe.target=new f.Pq(0,10*fe,1),Oe.setPosition(we),he.activeCameras[0]=Oe)}async function _i(e){if(t.displayLoadingUI(),null!=wt&&(wt.isEnabled=!1),vt.isEnabled=!1,Ze=[],De=[],je=e.id,!(e&&e.directory&&e.pmx))throw new Error("Chosen character or its properties are undefined");if(Ze.push((0,u.kS)(j+e.directory+"/"+e.pmx,he,{onProgress:e=>Be(2,`Loading model... ${e.loaded}/${e.total} (${Math.floor(100*e.loaded/e.total)}%)`),pluginOptions:{mmdmodel:{loggingEnabled:!0,materialBuilder:be}}})),"WuWa"==Ue?(He=!1,Tt.isVisible=!1):(He=!0,Tt.isVisible=!0),"WuWa"==Ue||"ZZZ"==Ue||"None"==Ue&&(4==Ii||3==Ii)?(He=!0,Fe="Universal"):"HSR"==Ue||"None"==Ue&&2==Ii?(He=!0,Fe="HSR"):("Genshin"==Ue||"None"==Ue&&1==Ii)&&(He=!0,Fe=e.element),He&&(ue||Ie.start(),Ze.push((0,u.kS)("res/stages/GenshinCharacterSphere/CharacterSphere_"+Fe+"V.pmx",he,{onProgress:e=>Be(3,`Loading stage... ${e.loaded}/${e.total} (${Math.floor(100*e.loaded/e.total)}%)`),pluginOptions:{mmdmodel:{loggingEnabled:!0,materialBuilder:ge}}}))),Ye=await Promise.all(Ze),he.onAfterRenderObservable.addOnce((()=>{t.hideLoadingUI(),setTimeout((()=>{null!=wt&&(wt.isEnabled=!0),vt.isEnabled=!0}),1500)})),He){const e=Ye[1];e.addAllToScene(),et=e.rootNodes[0],et.parent=ye}Qe=1.66,Je=69,Xe=new f.uq,Ke=Ye[0],Ke.addAllToScene(),tt=Ke.rootNodes[0],tt.parent=ye,Me.addShadowCaster(tt);for(const e of tt.metadata.meshes)e.receiveShadows=!0;st=Ee.createMmdModel(tt),lt=st.runtimeBones.find((e=>"頭"===e.name)),dt=st.runtimeBones.find((e=>"センター"===e.name)),ct=new f.uq,null!=lt&&null!=dt&&(st.addAnimation(rt),st.setAnimation("motion"),he.onBeforeDrawPhaseObservable.addOnce((()=>{lt.getWorldMatrixToRef(Xe).multiplyToRef(tt.getWorldMatrix(),Xe),Xe.getTranslationToRef(xe.position),xe.position.z=1,xe.position.x=0,Qe-=xe.position.y,Je=xe.position.y})),he.onBeforeRenderObservable.addOnce((()=>{dt.getWorldMatrixToRef(ct).multiplyToRef(tt.getWorldMatrix(),ct),ct.getTranslationToRef(Te.position),Te.position.y-=10*fe}))),Ee.setCamera(ve),ve.setAnimation("motion"),he.onAfterRenderObservable.addOnce((()=>{he.freezeMaterials();const t=he.meshes;for(let e=0,n=t.length;e<n;++e){const n=t[e];n.freezeWorldMatrix(),n.doNotSyncBoundingInfo=!0,n.isPickable=!1,n.doNotSyncBoundingInfo=!0,n.alwaysSelectAsActiveMesh=!0}if(he.skipPointerMovePicking=!0,he.skipPointerDownPicking=!0,he.skipPointerUpPicking=!0,he.skipFrustumClipping=!0,he.blockMaterialDirtyMechanism=!0,!i)try{o.countUp("phoshco",e.name.replace(/\./g,"")).catch((e=>{console.error("Failed count: ",e)}))}catch(e){console.error("Unexpected error during count: ",e)}}))}xe.position.x=ye.position.x,xe.position.y=ye.position.y,xe.position.z=ye.position.z,he.onBeforeAnimationsObservable.add((()=>{bt=ve.position.y/10,ft.text=`${he.activeCameras[0].name}`,xe.position.y=bt<Je&&0<bt?0-Qe*(bt/Je):bt<=0?0:0-Qe,ve.parent=xe}));const Li=new f.uq,Ai=new f.Pq;let Ri=new f.Pq;const Si=new f.Pq;he.onBeforeRenderObservable.add((()=>{const e=ve.rotation;f.uq.RotationYawPitchRollToRef(-e.y,-e.x,-e.z,Li),f.Pq.TransformNormalFromFloatsToRef(0,0,1,Li,Ai),Ri=ve.position.addToRef(f.Pq.TransformCoordinatesFromFloatsToRef(0,0,ve.distance,Li,Ri),Ri),null!=lt&&null!=dt&&lt.getWorldMatrixToRef(Xe).getTranslationToRef(Si).subtractToRef(Ri,Si)}));let Vi=-1/0;if(e.onclick=()=>{if(Et)return;const e=performance.now();300<e-Vi?Vi=e:(Vi=-1/0,he.activeCameras[0]===ve?(ut.depthOfFieldEnabled=!1,ke.setTarget(new f.Pq(0,10*fe,1)),ke.setPosition(we),he.activeCameras[0]=ke):(ut.depthOfFieldEnabled=!1,he.activeCameras[0]=ve),ft.text=`${he.activeCameras[0].name}`)},document.body.addEventListener("keydown",(function(e){"Space"!==e.code||_t.isVisible||(e.preventDefault(),he.activeCameras[0]===Oe&&(ut.depthOfFieldEnabled=!1,Ee.isAnimationPlaying||(he.activeCameras[0]=ve),ft.text=`${he.activeCameras[0].name}`),Ee.isAnimationPlaying?Ee.pauseAnimation():Ee.playAnimation())})),he.onPointerDown=function(e){At||(Lt=window.setTimeout((()=>{Rt=!1}),100)),function(e){Oi&&(wi=e.offsetY,ki=vi.verticalBar.value)}(e)},he.onPointerUp=function(e){At||(window.clearTimeout(Lt),Rt&&(_t.isVisible=!1),Rt=!0),Oi&&(wi=void 0)},he.onPointerMove=function(e){!function(e){if(!Oi)return;if(void 0===wi)return;if(void 0===ki)return;let t=e.offsetY-wi;ue&&(t*=3);const n=t/(Ci.heightInPixels-vi.heightInPixels);vi.verticalBar.value=ki-n}(e)},"Genshin"==qe){const e=le(q,We);if(e.length>0){const t=e[0];Ot=!1,kt(!0,!0,t.name)}}else if("HSR"==qe){qt();const e=le(Q,We);if(e.length>0){const t=e[0];Ot=!1,kt(!0,!0,t.name)}}else if("ZZZ"==qe){Yt();const e=le(X,We);if(e.length>0){const t=e[0];Ot=!1,kt(!0,!0,t.name)}}else if("WuWa"==qe){tn();const e=le(ee,We);if(e.length>0){const t=e[0];Ot=!1,kt(!0,!0,t.name)}}return he}}window.onload=()=>{const e=document.createElement("canvas");e.style.width="100%",e.style.height="100%",e.style.display="block",e.style.border="none",e.style.outline="none",document.body.appendChild(e);const t=new i.N(e,!1,{preserveDrawingBuffer:!1,stencil:!1,antialias:!0,alpha:!1,premultipliedAlpha:!1,powerPreference:"high-performance",doNotHandleTouchAction:!1,doNotHandleContextLost:!0,audioEngine:!1},!0);let n=window.location.pathname;console.log(n),n.endsWith("/")&&(n=n.slice(0,-1));const a=window.location.hostname.includes("localhost"),s=window.location.hostname.includes("github.io"),r=["model-viewer","docs"];let l="",d="";if(a)l="/",d=n.slice(1).replace(/\/$/,"")||"",console.log("Local: "+d);else if(s)for(const e of r)if(n.includes(e)){const t=n.indexOf(e)+e.length;l=n.substring(0,n.lastIndexOf("/")),d=n.slice(t+1).replace(/\/$/,"")||"",console.log("Online: "+d);break}d&&window.history.replaceState(null,"",l),o.Create({canvas:e,engine:t,sceneBuilder:new G},d).then((e=>e.run()))}}},o={};function a(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={exports:{}};return i[e](n,n.exports,a),n.exports}a.m=i,e=[],a.O=(t,n,i,o)=>{if(!n){var s=1/0;for(c=0;c<e.length;c++){for(var[n,i,o]=e[c],r=!0,l=0;l<n.length;l++)(!1&o||s>=o)&&Object.keys(a.O).every((e=>a.O[e](n[l])))?n.splice(l--,1):(r=!1,o<s&&(s=o));if(r){e.splice(c--,1);var d=i();void 0!==d&&(t=d)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[n,i,o]},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,n)=>(a.f[n](e,t),t)),[])),a.u=e=>(({71:"glslShaders",126:"wgslShaders"}[e]||e)+".bundle.js"),a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),t={},n="model-viewer:",a.l=(e,i,o,s)=>{if(t[e])t[e].push(i);else{var r,l;if(void 0!==o)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var u=d[c];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==n+o){r=u;break}}r||(l=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,a.nc&&r.setAttribute("nonce",a.nc),r.setAttribute("data-webpack",n+o),r.src=e),t[e]=[i];var b=(n,i)=>{r.onerror=r.onload=null,clearTimeout(g);var o=t[e];if(delete t[e],r.parentNode&&r.parentNode.removeChild(r),o&&o.forEach((e=>e(i))),n)return n(i)},g=setTimeout(b.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=b.bind(null,r.onerror),r.onload=b.bind(null,r.onload),l&&document.head.appendChild(r)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="",(()=>{var e={792:0};a.f.j=(t,n)=>{var i=a.o(e,t)?e[t]:void 0;if(0!==i)if(i)n.push(i[2]);else{var o=new Promise(((n,o)=>i=e[t]=[n,o]));n.push(i[2]=o);var s=a.p+a.u(t),r=new Error;a.l(s,(n=>{if(a.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;r.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",r.name="ChunkLoadError",r.type=o,r.request=s,i[1](r)}}),"chunk-"+t,t)}},a.O.j=t=>0===e[t];var t=(t,n)=>{var i,o,[s,r,l]=n,d=0;if(s.some((t=>0!==e[t]))){for(i in r)a.o(r,i)&&(a.m[i]=r[i]);if(l)var c=l(a)}for(t&&t(n);d<s.length;d++)o=s[d],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(c)},n=self.webpackChunkmodel_viewer=self.webpackChunkmodel_viewer||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var s=a.O(void 0,[903],(()=>a(3740)));s=a.O(s)})();