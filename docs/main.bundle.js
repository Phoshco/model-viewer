(()=>{"use strict";var e,t,n,i={3740:(e,t,n)=>{var i=n(93856);class o{_canvas;_engine;_scene;_onTick;constructor(e){this._canvas=e.canvas,this._engine=e.engine,this._scene=null,this._onTick=null}static async Create(e,t){const n=new o(e);return n._scene=await n._initialize(e.sceneBuilder,t),n._onTick=n._makeOnTick(),n}run(){const e=this._engine;window.addEventListener("resize",this._onResize),e.runRenderLoop(this._onTick)}dispose(){window.removeEventListener("resize",this._onResize),this._engine.dispose()}_onResize=()=>{this._engine.resize()};async _initialize(e,t){return await e.build(this._canvas,this._engine,t)}_makeOnTick(){const e=this._scene;return()=>e.render()}}n(19679),n(33832),n(28461),n(68028),n(7169),n(2380),n(26561),n(55218),n(28010),n(96524),n(42186),n(27696),n(37118);var a=n(93443),s=n(7839),r=n(17720),l=n(52046),d=n(71513),c=n(18595),u=n(15909),b=n(32033),g=n(5860),h=n(2093),p=n(7481),m=n(26041),f=n(79923),y=n(66423),x=n(97328),v=n(65202),w=n(32878),k=n(17159),O=n(60470),C=n(7561),P=n(8644),T=n(19269),I=n(70721),M=n(25736),E=n(58227),_=n(80715),A=(n(56717),n(59559),n(77727),n(41511),n(87812),n(68575),n(16286),n(64580),n(10513));const R=JSON.parse('[{"id":10000000,"name":"Paimon","weaponType":"Others","element":"Universal","gender":"Others","rarity":5,"directory":"res/chars/Genshin/Paimon","image":"Genshin/Paimon.png","pmx":"æ´¾è’™1.0.pmx"},{"id":10000001,"name":"Pom-Pom","weaponType":"Others","element":"Universal","gender":"Others","rarity":5,"directory":"res/chars/HSR/Pom-Pom","image":"HSR/Pom-Pom.png","pmx":"Pom-Pom.pmx"},{"id":10000002,"name":"Bangboo","weaponType":"Others","element":"Universal","gender":"Others","rarity":5,"directory":"res/chars/ZZZ/Bangboo","image":"ZZZ/Bangboo.png","pmx":"é‚¦å¸ƒ.pmx"},{"id":10000003,"name":"Abby","weaponType":"Others","element":"Universal","gender":"Others","rarity":5,"directory":"res/chars/WuWa/Abby","image":"WuWa/Abby.png","pmx":"Abby.pmx"}]'),L=JSON.parse('[{"name":"Specialist","audioPlayerFile":"res/cam_motion/Specialist (Never End ver.)/music001.mp3","camMotionFile":"res/cam_motion/Specialist (Never End ver.)/CameraMAIN2.bvmd","modelMotionFile":"res/cam_motion/Specialist (Never End ver.)/mmd_Specialist_motion.bvmd"},{"name":"Classic","audioPlayerFile":"res/cam_motion/Classic/MMDClassic.mp3","camMotionFile":"res/cam_motion/Classic/MMDClassicCamera.bvmd","modelMotionFile":"res/cam_motion/Classic/MMDClassicMotion.bvmd"},{"name":"Renai","audioPlayerFile":"res/cam_motion/æ‹ã‚µãƒ¼Fullãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã‚»ãƒƒãƒˆ/æ‹æ„›ã‚µãƒ¼ã‚­ãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³.mp3","camMotionFile":"res/cam_motion/æ‹ã‚µãƒ¼Fullãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã‚»ãƒƒãƒˆ/Camera for æ‹çˆ±å¾ªçŽ¯.bvmd","modelMotionFile":"res/cam_motion/æ‹ã‚µãƒ¼Fullãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã‚»ãƒƒãƒˆ/æ‹çˆ±å¾ªçŽ¯+.bvmd"},{"name":"105","audioPlayerFile":"res/cam_motion/çƒ­çˆ±105Cçš„ä½ /çƒ­çˆ±105Cçš„ä½ .mp3","camMotionFile":"res/cam_motion/çƒ­çˆ±105Cçš„ä½ /camera.bvmd","modelMotionFile":"res/cam_motion/çƒ­çˆ±105Cçš„ä½ /çƒ­çˆ±105â„ƒçš„ä½ .bvmd"}]');var S=n(32206);class N{loadingUIBackgroundColor;loadingUIText;constructor(e,t="Loading",n="black"){this._renderingCanvas=e,this._loadingText=t,this._loadingDivBackgroundColor=n,this._resizeLoadingUI=()=>{const e=this._renderingCanvas.getBoundingClientRect(),t=window.getComputedStyle(this._renderingCanvas).position;this._loadingDiv&&(this._loadingDiv.style.position="fixed"===t?"fixed":"absolute",this._loadingDiv.style.left=e.left+"px",this._loadingDiv.style.top=e.top+"px",this._loadingDiv.style.width=e.width+"px",this._loadingDiv.style.height=e.height+"px")}}displayLoadingUI(){if(this._loadingDiv)return;this._loadingDiv=document.createElement("div"),this._loadingDiv.id="babylonjsLoadingDiv",this._loadingDiv.style.opacity="0",this._loadingDiv.style.transition="opacity 1.5s ease",this._loadingDiv.style.pointerEvents="none",this._loadingDiv.style.display="grid",this._loadingDiv.style.gridTemplateRows="100%",this._loadingDiv.style.gridTemplateColumns="100%",this._loadingDiv.style.justifyItems="center",this._loadingDiv.style.alignItems="center",this.loadingTextDiv=document.createElement("div"),this.loadingTextDiv.style.position="absolute",this.loadingTextDiv.style.left="0",this.loadingTextDiv.style.top="50%",this.loadingTextDiv.style.marginTop="80px",this.loadingTextDiv.style.width="100%",this.loadingTextDiv.style.height="20px",this.loadingTextDiv.style.fontFamily="Arial",this.loadingTextDiv.style.fontSize="14px",this.loadingTextDiv.style.color="white",this.loadingTextDiv.style.textAlign="center",this.loadingTextDiv.style.zIndex="1",this.loadingTextDiv.innerHTML="Loading",this._loadingDiv.appendChild(this.loadingTextDiv),this.loadingTextDiv.innerHTML=this._loadingText,this._style=document.createElement("style"),this._style.type="text/css",this._style.innerHTML="@-webkit-keyframes spin1 {                    0% { -webkit-transform: rotate(0deg);}\n                    100% { -webkit-transform: rotate(360deg);}\n                }                @keyframes spin1 {                    0% { transform: rotate(0deg);}\n                    100% { transform: rotate(360deg);}\n                }",document.getElementsByTagName("head")[0].appendChild(this._style);const e=!!window.SVGSVGElement,t=new Image,n=["paimon_load","kururin","guinaifen","furina","bangboo"];t.src="res/assets/loads/"+n[Math.floor(Math.random()*n.length)]+".gif",t.style.width="150px",t.style.gridColumn="1",t.style.gridRow="1",t.style.top="50%",t.style.left="50%",t.style.transform="translate(-50%, -50%)",t.style.position="absolute";const i=document.createElement("div");i.style.width="300px",i.style.gridColumn="1",i.style.gridRow="1",i.style.top="50%",i.style.left="50%",i.style.transform="translate(-50%, -50%)",i.style.position="absolute";const o=new Image;if(o.src=N.DefaultSpinnerUrl?N.DefaultSpinnerUrl:e?"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzOTIgMzkyIj48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6I2UwNjg0Yjt9LmNscy0ye2ZpbGw6bm9uZTt9PC9zdHlsZT48L2RlZnM+PHRpdGxlPlNwaW5uZXJJY29uPC90aXRsZT48ZyBpZD0iTGF5ZXJfMiIgZGF0YS1uYW1lPSJMYXllciAyIj48ZyBpZD0iU3Bpbm5lciI+PHBhdGggY2xhc3M9ImNscy0xIiBkPSJNNDAuMjEsMTI2LjQzYzMuNy03LjMxLDcuNjctMTQuNDQsMTItMjEuMzJsMy4zNi01LjEsMy41Mi01YzEuMjMtMS42MywyLjQxLTMuMjksMy42NS00LjkxczIuNTMtMy4yMSwzLjgyLTQuNzlBMTg1LjIsMTg1LjIsMCwwLDEsODMuNCw2Ny40M2EyMDgsMjA4LDAsMCwxLDE5LTE1LjY2YzMuMzUtMi40MSw2Ljc0LTQuNzgsMTAuMjUtN3M3LjExLTQuMjgsMTAuNzUtNi4zMmM3LjI5LTQsMTQuNzMtOCwyMi41My0xMS40OSwzLjktMS43Miw3Ljg4LTMuMywxMi00LjY0YTEwNC4yMiwxMDQuMjIsMCwwLDEsMTIuNDQtMy4yMyw2Mi40NCw2Mi40NCwwLDAsMSwxMi43OC0xLjM5QTI1LjkyLDI1LjkyLDAsMCwxLDE5NiwyMS40NGE2LjU1LDYuNTUsMCwwLDEsMi4wNSw5LDYuNjYsNi42NiwwLDAsMS0xLjY0LDEuNzhsLS40MS4yOWEyMi4wNywyMi4wNywwLDAsMS01Ljc4LDMsMzAuNDIsMzAuNDIsMCwwLDEtNS42NywxLjYyLDM3LjgyLDM3LjgyLDAsMCwxLTUuNjkuNzFjLTEsMC0xLjkuMTgtMi44NS4yNmwtMi44NS4yNHEtNS43Mi41MS0xMS40OCwxLjFjLTMuODQuNC03LjcxLjgyLTExLjU4LDEuNGExMTIuMzQsMTEyLjM0LDAsMCwwLTIyLjk0LDUuNjFjLTMuNzIsMS4zNS03LjM0LDMtMTAuOTQsNC42NHMtNy4xNCwzLjUxLTEwLjYsNS41MUExNTEuNiwxNTEuNiwwLDAsMCw2OC41Niw4N0M2Ny4yMyw4OC40OCw2Niw5MCw2NC42NCw5MS41NnMtMi41MSwzLjE1LTMuNzUsNC43M2wtMy41NCw0LjljLTEuMTMsMS42Ni0yLjIzLDMuMzUtMy4zMyw1YTEyNywxMjcsMCwwLDAtMTAuOTMsMjEuNDksMS41OCwxLjU4LDAsMSwxLTMtMS4xNVM0MC4xOSwxMjYuNDcsNDAuMjEsMTI2LjQzWiIvPjxyZWN0IGNsYXNzPSJjbHMtMiIgd2lkdGg9IjM5MiIgaGVpZ2h0PSIzOTIiLz48L2c+PC9nPjwvc3ZnPg==":"https://cdn.babylonjs.com/Assets/loadingIcon.png",o.style.animation="spin1 0.75s infinite linear",o.style.webkitAnimation="spin1 0.75s infinite linear",o.style.transformOrigin="50% 50%",o.style.webkitTransformOrigin="50% 50%",!e){const e={w:16,h:18.5},n={w:30,h:30};t.style.width=`${e.w}vh`,t.style.height=`${e.h}vh`,t.style.left=`calc(50% - ${e.w/2}vh)`,t.style.top=`calc(50% - ${e.h/2}vh)`,o.style.width=`${n.w}vh`,o.style.height=`${n.h}vh`,o.style.left=`calc(50% - ${n.w/2}vh)`,o.style.top=`calc(50% - ${n.h/2}vh)`}i.appendChild(o),this._loadingDiv.appendChild(t),this._loadingDiv.appendChild(i),this._resizeLoadingUI(),window.addEventListener("resize",this._resizeLoadingUI),this._loadingDiv.style.backgroundColor=this._loadingDivBackgroundColor,document.body.appendChild(this._loadingDiv),this._loadingDiv.style.opacity="1"}hideLoadingUI(){this._loadingDiv&&(this._loadingDiv.style.opacity="0",this._loadingDiv.addEventListener("transitionend",(()=>{this.loadingTextDiv&&(this.loadingTextDiv.remove(),this.loadingTextDiv=null),this._loadingDiv&&(this._loadingDiv.remove(),this._loadingDiv=null),this._style&&(this._style.remove(),this._style=null),window.removeEventListener("resize",this._resizeLoadingUI)})))}set loadingUIText(e){this._loadingText=e,this.loadingTextDiv&&(this.loadingTextDiv.innerHTML=this._loadingText)}get loadingUIText(){return this._loadingText}get loadingUIBackgroundColor(){return this._loadingDivBackgroundColor}set loadingUIBackgroundColor(e){this._loadingDivBackgroundColor=e,this._loadingDiv&&(this._loadingDiv.style.backgroundColor=this._loadingDivBackgroundColor)}}S.$.DefaultLoadingScreenFactory=e=>new N(e);var V=n(70223),D=n(34769);class B{static _Instance;_app;_db;_closeTimer=null;_firebaseConfig={apiKey:"AIzaSyAdRgjvTfK_PhyVj6tBxyxDvduWkT2Mlsw",authDomain:"counter-13744.firebaseapp.com",databaseURL:"https://counter-13744-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"counter-13744",storageBucket:"counter-13744.firebasestorage.app",messagingSenderId:"377800074128",appId:"1:377800074128:web:5cf0541109ad7877d88915",measurementId:"G-ZDQ3JM7W1Z"};constructor(){this._app=(0,V.Wp)(this._firebaseConfig),this._db=(0,D.C3)(this._app)}static GetInstance(){return B._Instance&&B._Instance._app||(B._Instance=new B),B._Instance}async _closeInstance(){B._Instance=null}_resetCloseTimer(){this._closeTimer&&clearTimeout(this._closeTimer),this._closeTimer=setTimeout((()=>{this._closeInstance()}),5e3)}async countUp(e,t){try{const n=`${e}/${t}`,i=(0,D.KR)(this._db,`${n}/count`),o=await(0,D.Jt)(i),a=((o.exists()?o.val():0)||0)+1;await(0,D.hZ)(i,a);const s=new Date,r=s.getTime(),l=(0,D.KR)(this._db,`${n}/transactions/${r}`);await(0,D.hZ)(l,{datetime:s.toISOString(),change:"+1"}),console.log("Count: "+t+": "+a)}finally{this._resetCloseTimer()}}async countDown(e,t){try{const n=`${e}/${t}`,i=(0,D.KR)(this._db,n),o=(await(0,D.Jt)(i)).val()||{count:0,transactions:[]},a=Math.max((o.count||0)-1,0),s=new Date,r=s.getTime();await(0,D.hZ)(i,{count:a,transactions:{...o.transactions||{},[r]:{datetime:s.toISOString(),change:"-1"}}})}finally{this._resetCloseTimer()}}async setCount(e,t,n){try{if(n<0)return void console.error("Count value must be non-negative.");const i=`${e}/${t}`,o=(0,D.KR)(this._db,i),a=(await(0,D.Jt)(o)).val()||{transactions:[]},s=new Date,r=s.getTime();await(0,D.hZ)(o,{count:n,transactions:{...a.transactions||{},[r]:{datetime:s.toISOString(),change:`set ${n}`}}})}finally{this._resetCloseTimer()}}async deleteNamespaceName(e,t){try{const n=`${e}/${t}`,i=(0,D.KR)(this._db,n);await(0,D.TF)(i),console.log(`${e}/${t} has been deleted.`)}finally{this._resetCloseTimer()}}}var Z,$=n(24908);!function(e){e[e.Seconds=0]="Seconds",e[e.Frames=1]="Frames"}(Z||(Z={}));class z extends $.h{_isMobile;_speedlabel;constructor(e,t,n,i=!1){super(e,t,n),this._speedlabel=null,this._isMobile=i,this._mobileRemoval()}_mobileRemoval(){if(this._isMobile){const e=document.getElementById("plrc"),t=document.getElementById("sLa"),n=document.getElementById("sLi");e.removeChild(t),e.removeChild(n)}}_createPlayerControl(e,t,n){const i=e.ownerDocument,o=this._playerContainer=i.createElement("div");o.style.position="relative",o.style.bottom="120px",o.style.left="0",o.style.width="100%",o.style.height="120px",o.style.transform="translateY(50%)",o.style.transition="transform 0.5s",e.appendChild(o),o.onmouseenter=this._onPlayerControlMouseEnter,o.onmouseleave=this._onPlayerControlMouseLeave;{const a=i.createElement("div");a.style.position="absolute",a.style.bottom="0",a.style.left="0",a.style.width="100%",a.style.height="50%",a.style.boxSizing="border-box",a.style.background="linear-gradient(rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.6))",a.style.display="flex",a.style.flexDirection="column",o.appendChild(a);{const o=i.createElement("div");o.style.width="100%",o.style.boxSizing="border-box",o.style.display="flex",o.style.flexDirection="row",o.style.alignItems="center",a.appendChild(o);{const e=this._timeSlider=i.createElement("input");e.style.width="100%",e.style.height="4px",e.style.border="none",e.style.opacity="0.5",e.type="range",e.min="0",e.max=t.animationFrameTimeDuration.toString(),e.oninput=n=>{n.preventDefault(),t.seekAnimation(Number(e.value),!0)};{let n=!1;e.onmousedown=()=>{t.isAnimationPlaying&&(t.pauseAnimation(),n=!0)},e.onmouseup=()=>{n&&(t.playAnimation(),n=!1)}}o.appendChild(e)}const s=i.createElement("div");s.style.width="100%",s.style.flexGrow="1",s.style.padding="0 5px",s.style.boxSizing="border-box",s.style.display="flex",s.style.flexDirection="row",s.style.alignItems="space-between",a.appendChild(s);{const o=i.createElement("div");o.style.flex="1",o.style.display="flex",o.style.flexDirection="row",o.style.alignItems="center",s.appendChild(o);{const e=this._playButton=i.createElement("button");if(e.style.width="40px",e.style.border="none",e.style.backgroundColor="rgba(0, 0, 0, 0)",e.style.color="white",e.style.fontSize="18px",e.innerText=t.isAnimationPlaying?"âšâš":"â–¶",e.onclick=()=>{t.isAnimationPlaying?t.pauseAnimation():t.playAnimation()},o.appendChild(e),void 0!==n){const e=this._soundButton=i.createElement("button");e.style.width="35px",e.style.border="none",e.style.backgroundColor="rgba(0, 0, 0, 0)",e.style.color="white",e.style.fontSize="20px",e.innerText=n.muted?"ðŸ”‡":"ðŸ”Š",e.onclick=()=>{n.muted?n.unmute():n.mute()},o.appendChild(e);const t=this._volumeSlider=i.createElement("input");t.style.width="80px",t.style.height="4px",t.style.border="none",t.style.opacity="0.5",t.type="range",t.min="0",t.max="1",t.step="0.01",t.value=n.volume.toString(),t.oninput=()=>{n.volume=Number(t.value)},o.appendChild(t)}const a=this._currentFrameNumberSpan=i.createElement("span");a.style.width="40px",a.style.textAlign="right",a.style.color="white",a.innerText=this.displayTimeFormat===Z.Seconds?this._getFormattedTime(t.currentTime):Math.floor(t.currentFrameTime).toString(),o.appendChild(a);const s=this._endFrameNumberSpan=i.createElement("span");s.style.width="50px",s.style.textAlign="left",s.style.color="white",s.innerHTML="&nbsp;/&nbsp;"+(this.displayTimeFormat===Z.Seconds?this._getFormattedTime(t.animationDuration):Math.floor(t.animationFrameTimeDuration).toString()),o.appendChild(s)}const a=i.createElement("div");a.style.flex="1",a.style.display="flex",a.style.flexDirection="row",a.style.alignItems="center",a.style.justifyContent="flex-end",a.id="plrc",s.appendChild(a);{const n=this._speedlabel=i.createElement("label");n.style.width="40px",n.style.textAlign="center",n.style.color="white",n.innerText="1.00x",n.id="sLa",a.appendChild(n);const o=this._speedSlider=i.createElement("input");o.style.width="80px",o.style.height="4px",o.style.border="none",o.style.opacity="0.5",o.type="range",o.min="0.07",o.max="1",o.step="0.01",o.id="sLi",o.value=t.timeScale.toString(),o.oninput=()=>{t.timeScale=Number(o.value),n.innerText=t.timeScale.toFixed(2)+"x"},a.appendChild(o);const s=this._fullscreenButton=i.createElement("button");s.style.width="40px",s.style.border="none",s.style.color="white",s.style.backgroundColor="rgba(0, 0, 0, 0)",s.style.fontSize="20px",s.innerHTML='<img src="res/assets/maximise.png" alt="Fullscreen" style="width: 100%; height: 100%;">',s.onclick=()=>{i.fullscreenElement?i.exitFullscreen():e.requestFullscreen()},a.appendChild(s)}}}}}}const j="https://phoshco.github.io/";class H{async build(e,t,n){I.n.OverrideEngineCreateEffect(t);const i=window.location.hostname.includes("localhost"),o=B.GetInstance(),S=await(await fetch(`${j}gi/genshin.json`)).json(),V=await(await fetch(`${j}gi/skins.json`)).json(),D=await(await fetch(`${j}hsr/hsr.json`)).json(),Z=await(await fetch(`${j}hsr/skins.json`)).json(),$=await(await fetch(`${j}zzz/zzz.json`)).json(),H=await(await fetch(`${j}zzz/skins.json`)).json(),G=await(await fetch(`${j}ww/wuwa.json`)).json(),F=await(await fetch(`${j}ww/skins.json`)).json(),W=await(await fetch(`${j}hna/hna.json`)).json(),U=await(await fetch(`${j}hna/skins.json`)).json(),q=R,Y=S,Q=V,J=D,X=Z,K=$,ee=H,te=G,ne=F,ie=W,oe=U;Y.sort(((e,t)=>t.id-e.id)),Q.sort(((e,t)=>t.id-e.id)),X.sort(((e,t)=>t.id-e.id)),ee.sort(((e,t)=>t.id-e.id)),ne.sort(((e,t)=>t.id-e.id)),J.sort(((e,t)=>t.id-e.id)),K.sort(((e,t)=>t.id-e.id)),te.sort(((e,t)=>t.id-e.id)),ie.sort(((e,t)=>t.id-e.id)),oe.sort(((e,t)=>t.id-e.id));const ae=(e,t)=>e.find((e=>e.name===t)),se=[...Y,...J,...K,...te,...ie],re=[...Q,...X,...ee,...ne,...oe],le=new A.A({fields:["name"],storeFields:["id","name"],searchOptions:{fuzzy:.2,prefix:!0}});le.addAll(se);const de=e=>e.toLowerCase().replace(/[^a-z]/g,""),ce=e=>{const t=Math.abs(e).toString();return parseInt(t[0],10)},ue=(e,t)=>e.find((e=>e.id===t)),be=(e,t)=>he(e.filter((e=>e.name===t)),"name",!1);function ge(e,t){return e.filter((e=>t.every((t=>String(e[t.key]).includes(t.value)))))}function he(e,t,n=!0){return e.slice().sort(((e,i)=>{const o=e[t],a=i[t];if("number"==typeof o&&"number"==typeof a)return n?o-a:a-o;{const e=String(o),t=String(a);return n?t.localeCompare(e):e.localeCompare(t)}}))}const pe=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);(0,T.R)();const me=new C.c;me.afterBuildSingleMaterial=e=>{e.forceDepthWrite=!0;const t=e.diffuseTexture;t&&(t.hasAlpha=!0,e.useAlphaFromDiffuseTexture=!0),e.transparencyMode===g.i.MATERIAL_ALPHABLEND&&(e.transparencyMode=g.i.MATERIAL_ALPHATESTANDBLEND,e.alphaCutOff=.01)};const fe=new C.c;fe.afterBuildSingleMaterial=e=>{e.forceDepthWrite=!0;const t=e.diffuseTexture;e.specularColor=m.v9.Black(),t&&(t.hasAlpha=!0,e.useAlphaFromDiffuseTexture=!0),e.transparencyMode===g.i.MATERIAL_ALPHABLEND&&(e.transparencyMode=g.i.MATERIAL_ALPHATESTANDBLEND,e.alphaCutOff=.01)};const ye=new w.Z(t);let xe=!0;window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?(xe=!0,ye.clearColor=new m.ov(.001,.001,.001,1)):ye.clearColor=new m.ov(1,1,1,1);const ve=k.vs.CreateFullscreenUI("UI");ve.layer.layerMask=268435456,ve.idealWidth=1e3,ve.idealHeight=1e3,ve.useSmallestIdeal=!0;const we=.09,ke=new x.V("mmdRoot",ye);ke.scaling.scaleInPlace(we),ke.position.z=1;const Oe=new x.V("mmdRoot",ye);Oe.scaling.scaleInPlace(we),Oe.position.z=1;const Ce=new E.A("mmdCamera",new f.Pq(0,10,0),ye);Ce.maxZ=5e3,Ce.minZ=.1,Ce.parent=ke,Ce.layerMask=1;const Pe=new f.Pq(0,10,-20).scaleInPlace(we),Te=new s.Lq("arcRotateCamera",0,0,2.25,new f.Pq(0,10*we,1),ye);Te.maxZ=100,Te.minZ=.1,Te.setPosition(Pe),Te.attachControl(e,!1),Te.inertia=.8,Te.speed=.36,Te.zoomToMouseLocation=!0,Te.wheelDeltaPercentage=.1,Te.upperRadiusLimit=9,Te.lowerRadiusLimit=.09,pe&&(Te.pinchDeltaPercentage=.002),Te.layerMask=1;const Ie=new s.Lq("stillCamera",0,0,2.25,new f.Pq(0,10*we,1),ye);Ie.maxZ=100,Ie.minZ=.1,Ie.setPosition(Pe),Ie.attachControl(e,!1),Ie.inertia=.8,Ie.speed=.36,Ie.zoomToMouseLocation=!0,Ie.wheelDeltaPercentage=.1,Ie.upperRadiusLimit=9,Ie.lowerRadiusLimit=.09,pe&&(Ie.pinchDeltaPercentage=.002),Ie.layerMask=1;const Me=new s.Lq("guiCamera",Math.PI/2+Math.PI/7,Math.PI/2,100,new f.Pq(0,20,0),ye);Me.layerMask=268435456;const Ee=new d.g("HemisphericLight",new f.Pq(0,1,0),ye);Ee.intensity=.4,Ee.specular=new m.v9(0,0,0),Ee.groundColor=new m.v9(1,1,1);const _e=new l.Z("DirectionalLight",new f.Pq(.5,-1,1),ye);_e.intensity=.8,_e.autoCalcShadowZBounds=!1,_e.autoUpdateExtends=!1,_e.shadowMaxZ=20*we,_e.shadowMinZ=-15*we,_e.orthoTop=18*we,_e.orthoBottom=-.27,_e.orthoLeft=-10*we,_e.orthoRight=10*we,_e.shadowOrthoScale=0;const Ae=new c.o(1024,_e,!0);Ae.usePercentageCloserFiltering=!0,Ae.forceBackFacesOnly=!0,Ae.filteringQuality=c.o.QUALITY_MEDIUM,Ae.frustumEdgeFalloff=.1;const Re=new a.okU("particles",2e3,ye);let Le,Se;Re.particleTexture=new p.g("res/assets/flare.png",ye),Re.emitter=f.Pq.Zero(),Re.minEmitBox=new f.Pq(-25,-15,-25),Re.maxEmitBox=new f.Pq(25,10,25),Re.color1=new m.ov(1,1,1,.9),Re.color2=new m.ov(.5,.5,.5,.9),Re.colorDead=new m.ov(.1,.1,.1,0),Re.minSize=.1,Re.maxSize=.4,Re.minLifeTime=.3,Re.maxLifeTime=1.5,Re.emitRate=40,Re.blendMode=a.okU.BLENDMODE_ONEONE,Re.gravity=new f.Pq(0,-9.81,0),Re.direction1=new f.Pq(-7,8,3),Re.direction2=new f.Pq(7,8,-3),Re.minAngularSpeed=0,Re.maxAngularSpeed=Math.PI,Re.minEmitPower=1,Re.maxEmitPower=3,Re.updateSpeed=.005,Re.renderingGroupId=1;let Ne=L[Math.floor(Math.random()*L.length)].name,Ve=L.find((e=>e.name===Ne)).audioPlayerFile,De=L.find((e=>e.name===Ne)).camMotionFile,Be=L.find((e=>e.name===Ne)).modelMotionFile,Ze=new M.A(ye);Ze.preservesPitch=!1,Ze.source=Ve,Le=new _.j(ye),Le.loggingEnabled=!0,Le.register(ye),Le.setAudioPlayer(Ze);let $e=new z(ye,Le,Ze,pe);$e.showPlayerControl();const ze=new N(e);t.loadingScreen=ze,t.displayLoadingUI();let je=[];const He=(e,t)=>{je[e]=t,ze.loadingTextDiv.innerHTML="<br/><br/><br/><br/>"+je.join("<br/><br/>")};let Ge=[];const Fe=new P.P(ye);Fe.loggingEnabled=!0;const We=async(e,t,n)=>{try{return await Fe.loadAsync(e,t,n)}catch(e){return void console.warn("BVMD load failed, continuing without motion:",e?.message||e)}};Ge.push(We("motion",De,(e=>He(0,`Loading camera... ${e.loaded}/${e.total} (${Math.floor(100*e.loaded/e.total)}%)`)))),Ge.push(We("motion",Be,(e=>He(1,`Loading motion... ${e.loaded}/${e.total} (${Math.floor(100*e.loaded/e.total)}%)`))));let Ue,qe,Ye,Qe=!0,Je="Pyro",Xe=n,Ke="Genshin",et=Ke;if([Ye,et]=(e=>{const t=de(e),n=le.search(t);let a,s;if(console.log(n),n.length>0){const e=ce(n[0].id);if(1==e?(a=ae(Y,n[0].name),s="Genshin"):2==e?(a=ae(J,n[0].name),s="HSR"):3==e?(a=ae(K,n[0].name),s="ZZZ"):4==e?(a=ae(te,n[0].name),s="WuWa"):(a=ae(ie,n[0].name),s="HNA"),!i)try{o.countUp("phoshco",a.name.replace(/\./g,"")).catch((e=>{console.error("Failed count: ",e)}))}catch(e){console.error("Unexpected error during count: ",e)}}else a=ae(Y,"Hu Tao"),s="Genshin";return[a,s]})(Xe),Xe=Ye.name,qe=Ye.id,Je=Ye.element,"HSR"==et?Je="HSR":"Genshin"!=et&&(Je="Universal"),!(Ye&&Ye.directory&&Ye.pmx))throw new Error("Chosen character or its properties are undefined");Ge.push((0,u.kS)(j+Ye.directory+"/"+Ye.pmx,ye,{onProgress:e=>He(2,`Loading model... ${e.loaded}/${e.total} (${Math.floor(100*e.loaded/e.total)}%)`),pluginOptions:{mmdmodel:{loggingEnabled:!0,materialBuilder:me}}})),Ge.push((async()=>{He(3,"Loading physics engine..."),He(3,"Loading physics engine... Done")})()),Qe&&(pe||Re.start(),Ge.push((0,u.kS)("res/stages/GenshinCharacterSphere/CharacterSphere_"+Je+"V.pmx",ye,{onProgress:e=>He(4,`Loading stage... ${e.loaded}/${e.total} (${Math.floor(100*e.loaded/e.total)}%)`),pluginOptions:{mmdmodel:{loggingEnabled:!0,materialBuilder:fe}}})));let tt=await Promise.all(Ge);ye.onAfterRenderObservable.addOnce((()=>t.hideLoadingUI())),ye.activeCameras=[Ie,Me];let nt=1.66,it=69,ot=new f.uq,at=tt[2];at.addAllToScene();let st,rt=at.rootNodes[0];if(rt.parent=ke,Qe){const e=tt[4];e.addAllToScene(),st=e.rootNodes[0],st.parent=ke}Ae.addShadowCaster(rt);for(const e of rt.metadata.meshes)e.receiveShadows=!0;const lt=(0,y.km)("ground1",{width:50,height:50,subdivisions:2,updatable:!1},ye);lt.receiveShadows=!0;const dt=new h.F("GroundMaterial",ye);dt.diffuseColor=new m.v9(.14,.14,.14),dt.specularPower=128;const ct=dt.reflectionTexture=new a.B2G("MirrorTexture",50,ye,!0);ct.mirrorPlane=a.Zcv.FromPositionAndNormal(lt.position,lt.getFacetNormal(0).scale(-1)),ct.renderList=[...rt.metadata.meshes],ct.level=.45,ct.adaptiveBlurKernel=16;const ut=new O.w("shadowOnly",ye);ut.activeLight=_e,ut.alpha=.4,lt.material=ut,lt.receiveShadows=!0,lt.parent=ke;let bt,gt=Le.createMmdModel(rt),ht=tt[1],pt=gt.runtimeBones.find((e=>"é ­"===e.name)),mt=gt.runtimeBones.find((e=>"ã‚»ãƒ³ã‚¿ãƒ¼"===e.name)),ft=new f.uq;if(null!=pt&&null!=mt){if(ht){const e=gt.createRuntimeAnimation(ht);gt.setRuntimeAnimation(e)}ye.onBeforeDrawPhaseObservable.addOnce((()=>{pt.getWorldMatrixToRef(ot).multiplyToRef(rt.getWorldMatrix(),ot),ot.getTranslationToRef(Oe.position),nt-=Oe.position.y,it=Oe.position.y})),ye.onBeforeRenderObservable.addOnce((()=>{mt.getWorldMatrixToRef(ft).multiplyToRef(rt.getWorldMatrix(),ft),ft.getTranslationToRef(_e.position),_e.position.y-=10*we}))}tt[0]&&(bt=Ce.createRuntimeAnimation(tt[0]),Ce.setRuntimeAnimation(bt)),Ce.storeState(),Le.addAnimatable(Ce),ye.onAfterRenderObservable.addOnce((()=>{ye.freezeMaterials(),null!=Mt&&(Mt.isEnabled=!0);const e=ye.meshes;for(let t=0,n=e.length;t<n;++t){const n=e[t];n.freezeWorldMatrix(),n.doNotSyncBoundingInfo=!0,n.isPickable=!1,n.doNotSyncBoundingInfo=!0,n.alwaysSelectAsActiveMesh=!0}if(ye.skipPointerMovePicking=!0,ye.skipPointerDownPicking=!0,ye.skipPointerUpPicking=!0,ye.skipFrustumClipping=!0,ye.blockMaterialDirtyMechanism=!0,Ze.mute(),!i)try{o.countUp("phoshco","hoyo").catch((e=>{console.error("Failed count: ",e)}))}catch(e){console.error("Unexpected error during count: ",e)}}));const yt=new v.e("default",!0,ye,[Ce,Te,Ie]);yt.samples=4,yt.chromaticAberrationEnabled=!0,yt.chromaticAberration.aberrationAmount=1,yt.fxaaEnabled=!0,yt.imageProcessing.toneMappingEnabled=!1,yt.imageProcessing.toneMappingType=b.p.TONEMAPPING_ACES,yt.imageProcessing.vignetteWeight=.5,yt.imageProcessing.vignetteStretch=.5,yt.imageProcessing.vignetteColor=new m.ov(0,0,0,0),yt.imageProcessing.vignetteEnabled=!0,yt.depthOfFieldEnabled=!1;let xt=69;const vt=new r.Wd("","res/stages/hoyo.png",ye,!0,new m.ov(1,1,1,1)),wt=new p.g("res/stages/hoyo.png",ye,!0),kt=new p.g("res/stages/hoyo_dark.png",ye,!0);xe&&(vt.texture=kt),new ResizeObserver((()=>{const t=e.width/e.height;t>1?(vt.scale.y=t,vt.scale.x=1,wt.uScale=1,wt.vScale=1/vt.scale.y,wt.uOffset=0,wt.vOffset=.5*(1-wt.vScale),kt.uScale=1,kt.vScale=1/vt.scale.y,kt.uOffset=0,kt.vOffset=.5*(1-kt.vScale)):(vt.scale.y=1,vt.scale.x=1/t,wt.uScale=1/vt.scale.x,wt.vScale=1,wt.uOffset=.5*(1-wt.uScale),wt.vOffset=0,kt.uScale=1/vt.scale.x,kt.vScale=1,kt.uOffset=.5*(1-kt.uScale),kt.vOffset=0)})).observe(e),vt.render;const Ot=new k.VJ;Ot.widthInPixels=100,Ot.heightInPixels=50,Ot.left=0,Ot.text="lol",Ot.fontSize=16,Ot.textHorizontalAlignment=k.Ec.HORIZONTAL_ALIGNMENT_LEFT,Ot.horizontalAlignment=k.Ec.HORIZONTAL_ALIGNMENT_RIGHT,Ot.verticalAlignment=k.Ec.VERTICAL_ALIGNMENT_BOTTOM,Ot.color="black",ve.addControl(Ot),Ot.isVisible=!1;const Ct=new k.VJ;Ct.widthInPixels=100,Ct.heightInPixels=50,Ct.left=0,Ct.text=`${ye.activeCameras[0].name}`,Ct.fontSize=16,Ct.textHorizontalAlignment=k.Ec.HORIZONTAL_ALIGNMENT_LEFT,Ct.horizontalAlignment=k.Ec.HORIZONTAL_ALIGNMENT_RIGHT,Ct.verticalAlignment=k.Ec.VERTICAL_ALIGNMENT_TOP,Ct.color="black",ve.addControl(Ct),Ct.isVisible=!1;const Pt=new k.VJ;Pt.resizeToFit=!0,Pt.top=0,Pt.left=0,Pt.paddingTop=10,Pt.paddingRight=10,Pt.text="Double click / tap to change camera mode.",Pt.fontSize=pe?25:16,Pt.textHorizontalAlignment=k.Ec.HORIZONTAL_ALIGNMENT_CENTER,Pt.horizontalAlignment=k.Ec.HORIZONTAL_ALIGNMENT_RIGHT,Pt.verticalAlignment=k.Ec.VERTICAL_ALIGNMENT_TOP,Pt.color="grey",ve.addControl(Pt),Pt.isVisible=!0;const Tt=pe?"100px":"50px",It=k.$n.CreateImageOnlyButton("but","res/assets/menu.png");let Mt;function Et(e=!1,t,n){null!=Mt&&Mt.dispose(),Mt=new k.$n,Mt=k.$n.CreateImageOnlyButton("but","res/assets/alter.png"),xe&&(Mt.image.source="res/assets/alter_light.png"),Mt.horizontalAlignment=k.Ec.HORIZONTAL_ALIGNMENT_LEFT,Mt.left=pe?"110px":"60px",Mt.verticalAlignment=k.Ec.VERTICAL_ALIGNMENT_TOP,Mt.top=pe?"110px":"60px",Mt.width=Tt,Mt.height=Tt,Mt.thickness=0,ve.addControl(Mt),Mt.isVisible=e,null!=t&&n&&(Mt.isEnabled=!1,Mt.onPointerClickObservable.addOnce((async function(){ji(n),_t=t,Dt.isVisible&&(Dt.isVisible=!1)})))}It.horizontalAlignment=k.Ec.HORIZONTAL_ALIGNMENT_LEFT,It.left="10px",It.verticalAlignment=k.Ec.VERTICAL_ALIGNMENT_TOP,It.top="10px",It.width=Tt,It.height=Tt,It.thickness=0,ve.addControl(It),It.onPointerClickObservable.add((function(){Dt.isVisible=!Dt.isVisible,It.isVisible&&$e.hidePlayerControl()}));let _t=!1;const At=k.$n.CreateImageOnlyButton("but","res/assets/dark_mode.png");function Rt(){xe?(ye.clearColor=new m.ov(1,1,1,1),vt.texture=wt,At.image.source="res/assets/dark_mode.png",St.image.source="res/assets/note.png",null!=Mt&&(Mt.image.source="res/assets/alter.png"),Nt.color="black"):(vt.texture=kt,At.image.source="res/assets/light_mode.png",St.image.source="res/assets/note_light.png",null!=Mt&&(Mt.image.source="res/assets/alter_light.png"),Nt.color="white"),vt.render,xe=!xe}xe&&(At.image.source="res/assets/light_mode.png"),At.horizontalAlignment=k.Ec.HORIZONTAL_ALIGNMENT_LEFT,At.left=pe?"110px":"60px",At.verticalAlignment=k.Ec.VERTICAL_ALIGNMENT_TOP,At.top="10px",At.width=Tt,At.height=Tt,At.thickness=0,Qe&&(At.isEnabled=!1),ve.addControl(At),At.onPointerClickObservable.add(Rt);const Lt=k.$n.CreateImageOnlyButton("but","res/assets/paimon.png");Lt.horizontalAlignment=k.Ec.HORIZONTAL_ALIGNMENT_LEFT,Lt.left="10px",Lt.verticalAlignment=k.Ec.VERTICAL_ALIGNMENT_TOP,Lt.top=pe?"110px":"60px",Lt.width=Tt,Lt.height=Tt,Lt.thickness=0,ve.addControl(Lt),"WuWa"==et&&(Lt.isVisible=!1),Lt.onPointerClickObservable.add((function(){Qe?(st.setEnabled(!1),pe||Re.stop(),At.isEnabled=!0):"Genshin"!=Ke&&"HSR"!=Ke&&"ZZZ"!=Ke&&"HNA"!=Ke||Qe||(st.setEnabled(!0),pe||Re.start(),At.isEnabled=!1,xe||Rt()),Qe=!Qe}));const St=k.$n.CreateImageOnlyButton("but","res/assets/note.png");St.horizontalAlignment=k.Ec.HORIZONTAL_ALIGNMENT_LEFT,St.left="10px",St.verticalAlignment=k.Ec.VERTICAL_ALIGNMENT_TOP,St.top=pe?"210px":"110px",St.width=Tt,St.height=Tt,St.thickness=0,ve.addControl(St),xe&&(St.image.source="res/assets/note_light.png"),St.onPointerClickObservable.add((function(){const e=L.findIndex((e=>e.name===Ne)),n=(e+1)%L.length;Ne=L[n].name,Ve=L.find((e=>e.name===Ne)).audioPlayerFile,De=L.find((e=>e.name===Ne)).camMotionFile,Be=L.find((e=>e.name===Ne)).modelMotionFile,async function(){Le.pauseAnimation(),Ce.storeState(),Le.seekAnimation(0,!0);const e=Ze.volume;if(Ze.dispose(),Ze=new M.A(ye),Ze.preservesPitch=!1,Ze.source=Ve,Le.setAudioPlayer(Ze),$e.dispose(),Ze.volume=e,$e=new z(ye,Le,Ze,pe),$e.showPlayerControl(),je=[],t.displayLoadingUI(),Ge=[],Ge.push(We("motion",De,(e=>He(0,`Loading camera... ${e.loaded}/${e.total} (${Math.floor(100*e.loaded/e.total)}%)`)))),Ge.push(We("motion",Be,(e=>He(1,`Loading motion... ${e.loaded}/${e.total} (${Math.floor(100*e.loaded/e.total)}%)`)))),tt=await Promise.all(Ge),ht=tt[1],ht){const e=gt.createRuntimeAnimation(ht);gt.setRuntimeAnimation(e)}tt[0]&&(bt=Ce.createRuntimeAnimation(tt[0]),Ce.setRuntimeAnimation(bt)),Ce.restoreState(),Ce.position.addToRef(f.Pq.TransformCoordinatesFromFloatsToRef(0,0,Ce.distance,Gi,Wi),Wi),Le.addAnimatable(Ce),t.hideLoadingUI()}()}));const Nt=new k.VJ;Nt.heightInPixels=pe?100:50,Nt.left=pe?"220px":"120px",Nt.top="10px",Nt.text=Xe,Nt.fontSize=pe?40:20,Nt.textHorizontalAlignment=k.Ec.HORIZONTAL_ALIGNMENT_LEFT,Nt.horizontalAlignment=k.Ec.HORIZONTAL_ALIGNMENT_LEFT,Nt.verticalAlignment=k.Ec.VERTICAL_ALIGNMENT_TOP,Nt.color=xe?"white":"black",ve.addControl(Nt),Nt.isVisible=!0;let Vt=!1;const Dt=new k.tN("charPanel");Dt.width="720px",Dt.height="920px",Dt.background="rgb(44,48,50)",Dt.cornerRadius=20,Dt.thickness=3,Dt.color="black",ve.addControl(Dt),Dt.isVisible=!1,Dt.onIsVisibleChangedObservable.add((()=>{Dt.isVisible||(Vt=!1,Ie.attachControl(e,!1),Te.attachControl(e,!1))})),Dt.onPointerEnterObservable.add((function(){Ie.detachControl(),Te.detachControl(),Vt=!0})),Dt.onPointerOutObservable.add((function(){Ie.attachControl(e,!1),Te.attachControl(e,!1),Vt=!1}));let Bt,Zt=!1;Dt.onPointerDownObservable.add((()=>{Zt=!0})),Dt.onPointerUpObservable.add((()=>{setTimeout((()=>{Zt=!1}),100)}));let $t=!0;const zt=new k.tN;zt.width="700px",zt.height="900px",zt.thickness=0,zt.cornerRadius=15,zt.background=Dt.background,Dt.addControl(zt);const jt=new k.Pc;jt.width="700px",jt.height="900px",zt.addControl(jt);const Ht=new k.tN;Ht.width="700px",Ht.height="150px",Ht.thickness=0,jt.addControl(Ht);const Gt=k.$n.CreateSimpleButton("but","Genshin Impact");Gt.fontSize=10,Gt.width="175px",Gt.height="50px",Gt.color="white",Gt.background="rgb(64,68,70)",Gt.disabledColor=Dt.background,Gt.thickness=0,Gt.left=-262.5,Gt.top=-50,Gt.cornerRadiusX=Gt.cornerRadiusY=15,Ht.addControl(Gt);const Ft=k.$n.CreateSimpleButton("but","Honkai: Star Rail");Ft.fontSize=10,Ft.width="175px",Ft.height="50px",Ft.color="white",Ft.background=Dt.background,Ft.disabledColor=Dt.background,Ft.thickness=0,Ft.left=-87.5,Ft.top=-50,Ft.cornerRadiusX=Ft.cornerRadiusY=15,Ht.addControl(Ft);const Wt=k.$n.CreateSimpleButton("but","Zenless Zone Zero");Wt.fontSize=10,Wt.width="175px",Wt.height="50px",Wt.color="white",Wt.background=Dt.background,Wt.disabledColor=Dt.background,Wt.thickness=0,Wt.left=87.5,Wt.top=-50,Wt.cornerRadiusX=Wt.cornerRadiusY=15,Ht.addControl(Wt);const Ut=k.$n.CreateSimpleButton("but","Honkai: Nexus Anima");Ut.fontSize=10,Ut.width="175px",Ut.height="50px",Ut.color="white",Ut.background=Dt.background,Ut.disabledColor=Dt.background,Ut.thickness=0,Ut.left=262.5,Ut.top=-50,Ut.cornerRadiusX=Ut.cornerRadiusY=15,Ht.addControl(Ut);let qt,Yt=!1;const Qt=[{key:"id",value:"1000"}],Jt=[{key:"id",value:"2000"}],Xt=[{key:"id",value:"3000"}],Kt=[{key:"id",value:"4000"}],en=[{key:"id",value:"5000"}];let tn;function nn(){"Genshin"!=Ke&&(Gt.background="rgb(64,68,70)","HSR"==Ke?(Ft.background=Dt.background,qn()):"ZZZ"==Ke?(Wt.background=Dt.background,vi()):"WuWa"==Ke?Ri():(Ut.background=Dt.background,li()),Ke="Genshin",tn=ge(Y,Qt),tn=he(tn,qt,Yt),vn.isVisible=!0,wn.isVisible=!0,Yn.isVisible=!0,Qn.isVisible=!0,Jn.isVisible=!0,Xn.isVisible=!0,Kn.isVisible=!0,ei.isVisible=!0,ti.isVisible=!0,ni.isVisible=!0,ii.isVisible=!0,oi.isVisible=!0,ai.isVisible=!0,si.isVisible=!0,yn.isVisible=!0,Zi(tn))}function on(){"HSR"!=Ke&&(Ft.background="rgb(64,68,70)","Genshin"==Ke?(Gt.background=Dt.background,ri()):"ZZZ"==Ke?(Wt.background=Dt.background,vi()):"WuWa"==Ke?Ri():(Ut.background=Dt.background,li()),Ke="HSR","id"==qt?xn.image.source="res/assets/release.png":"name"==qt&&(xn.image.source="res/assets/alphabet.png"),tn=ge(J,Jt),tn=he(tn,qt,Yt),Ln.isVisible=!0,Sn.isVisible=!0,Nn.isVisible=!0,Vn.isVisible=!0,Dn.isVisible=!0,Bn.isVisible=!0,Zn.isVisible=!0,$n.isVisible=!0,zn.isVisible=!0,jn.isVisible=!0,Hn.isVisible=!0,Gn.isVisible=!0,Fn.isVisible=!0,Wn.isVisible=!0,Un.isVisible=!0,xn.isVisible=!0,kn.isVisible=!0,Zi(tn))}function an(){"ZZZ"!=Ke&&(Wt.background="rgb(64,68,70)","Genshin"==Ke?(Gt.background=Dt.background,ri()):"HSR"==Ke?(qn(),Ft.background=Dt.background):"WuWa"==Ke?Ri():(Ut.background=Dt.background,li()),Ke="ZZZ",tn=ge(K,Xt),tn=he(tn,qt,Yt),On.isVisible=!0,Cn.isVisible=!0,di.isVisible=!0,ci.isVisible=!0,ui.isVisible=!0,bi.isVisible=!0,gi.isVisible=!0,hi.isVisible=!0,pi.isVisible=!0,mi.isVisible=!0,fi.isVisible=!0,yi.isVisible=!0,xi.isVisible=!0,yn.isVisible=!0,Zi(tn))}function sn(){"HNA"!=Ke&&(Ut.background="rgb(64,68,70)","Genshin"==Ke?(Gt.background=Dt.background,ri()):"HSR"==Ke?(qn(),Ft.background=Dt.background):"ZZZ"==Ke?(Wt.background=Dt.background,vi()):"WuWa"==Ke&&Ri(),Ke="HNA",tn=ge(ie,en),tn=he(tn,qt,Yt),In.isVisible=!0,Mn.isVisible=!0,yn.isVisible=!0,Zi(tn))}tn=ge(Y,Qt),qt="id",Gt.onPointerClickObservable.add((function(){nn()})),Ft.onPointerClickObservable.add((function(){on()})),Wt.onPointerClickObservable.add((function(){an()})),Ut.onPointerClickObservable.add((function(){sn()}));const rn=new k.tN;rn.width="700px",rn.height="50px",rn.thickness=0,rn.top=0,rn.background="rgb(64,68,70)",Ht.addControl(rn);const ln=new k.tN;ln.width="700px",ln.height="50px",ln.thickness=0,ln.top=50,ln.background="rgb(64,68,70)",ln.cornerRadiusW=ln.cornerRadiusZ=15,Ht.addControl(ln);const dn=new k.VJ;dn.width="150px",dn.height="40px",dn.color="white",dn.left=-48,dn.text="",dn.textHorizontalAlignment=k.Ec.HORIZONTAL_ALIGNMENT_LEFT,rn.addControl(dn);const cn=new k.tN;cn.width="300px",cn.height="40px",cn.background=Dt.background,cn.cornerRadius=15,cn.left=-190,cn.thickness=0,ln.addControl(cn);const un=k.$n.CreateImageOnlyButton("but","res/assets/search.png");function bn(){"WuWa"!=Ke&&("Genshin"==Ke?(Gt.background=Dt.background,ri()):"HSR"==Ke?(qn(),Ft.background=Dt.background):"ZZZ"==Ke?(Wt.background=Dt.background,vi()):"HNA"==Ke&&(Ut.background=Dt.background,li()),Ke="WuWa",tn=ge(te,Kt),tn=he(tn,qt,Yt),Pn.isVisible=!0,Tn.isVisible=!0,wi.isVisible=!0,ki.isVisible=!0,Oi.isVisible=!0,Ci.isVisible=!0,Pi.isVisible=!0,Ti.isVisible=!0,Ii.isVisible=!0,Mi.isVisible=!0,Ei.isVisible=!0,_i.isVisible=!0,Ai.isVisible=!0,yn.isVisible=!0,Zi(tn))}un.height="40px",un.width="40px",un.left=-130,un.thickness=0,un.cornerRadius=5,cn.addControl(un),un.onPointerClickObservable.add((function(){bn()})),un.onPointerEnterObservable.add((function(){un.image.source="res/assets/tacet.png"})),un.onPointerOutObservable.add((function(){un.image.source="res/assets/search.png"})),un.onPointerEnterObservable.add((function(){dn.text="Wuthering Waves"})),un.onPointerOutObservable.add((function(){dn.text=""}));const gn=new k.Sm;gn.placeholderText="Search all characters...",gn.placeholderColor="rgb(64,68,70)",gn.thickness=0,gn.background=cn.background,gn.width="220px",gn.color="white",gn.focusedBackground=gn.background,gn.promptMessage="Search for character:",cn.addControl(gn);let hn,pn="None";gn.onTextChangedObservable.add((function(){""==gn.text?(Gt.isEnabled=!0,Ft.isEnabled=!0,Wt.isEnabled=!0,fn.isVisible=!0,"Genshin"==pn?nn():"HSR"==pn?on():"ZZZ"==pn?an():"WuWa"==pn?bn():"HNA"==pn&&sn(),pn="None"):("None"==pn&&(pn=Ke,fn.isVisible=!1,Gt.background=Dt.background,Gt.isEnabled=!1,Ft.background=Dt.background,Ft.isEnabled=!1,Wt.background=Dt.background,Wt.isEnabled=!1,ri(),qn(),vi(),Ri(),li()),Ke="None",hn=(e=>{const t=de(e),n=le.search(t),i=[];for(let e=0;e<n.length;e++){const t=ce(n[e].id);1==t?i.push(ae(Y,n[e].name)):2==t?i.push(ae(J,n[e].name)):3==t?i.push(ae(K,n[e].name)):4==t?i.push(ae(te,n[e].name)):i.push(ae(ie,n[e].name))}return i})(gn.text),Zi(hn))}));const mn=k.$n.CreateImageOnlyButton("but","res/assets/clear.png");mn.height="40px",mn.width="40px",mn.left=130,mn.thickness=0,mn.cornerRadius=5,cn.addControl(mn),mn.onPointerClickObservable.add((function(){gn.text=""}));const fn=k.$n.CreateImageOnlyButton("but","res/assets/descending.png");fn.height="40px",fn.width="40px",fn.left=-328,fn.thickness=0,rn.addControl(fn),fn.onPointerClickObservable.add((()=>{Yt?(fn.image.source="res/assets/descending.png",tn=he(tn,qt,!1),Zi(tn)):(fn.image.source="res/assets/ascending.png",tn=he(tn,qt,!0),Zi(tn)),Yt=!Yt}));const yn=k.$n.CreateSimpleButton("but"," Release ");yn.height="40px",yn.width="90px",yn.left=-258,yn.background=Dt.background,yn.color="white",yn.cornerRadius=15,yn.thickness=0,rn.addControl(yn),yn.onPointerClickObservable.add((()=>{null!=yn.textBlock&&("id"==qt?(qt="name",xn.image.source="res/assets/release.png",yn.textBlock.text=" Name "):(qt="id",xn.image.source="res/assets/alphabet.png",yn.textBlock.text=" Release "),tn=he(tn,qt,Yt),Zi(tn))}));const xn=k.$n.CreateImageOnlyButton("but","res/assets/release.png");xn.height="40px",xn.width="40px",xn.left=-278,xn.thickness=0,rn.addControl(xn),xn.onPointerClickObservable.add((()=>{"id"==qt?(qt="name",xn.image.source="res/assets/alphabet.png",yn.textBlock.text=" Name "):(qt="id",xn.image.source="res/assets/release.png",yn.textBlock.text=" Release "),tn=he(tn,qt,Yt),Zi(tn)})),xn.isVisible=!1;const vn=k.$n.CreateImageOnlyButton("but","res/assets/Genshin/rarity_4.png");vn.height="40px",vn.width="40px",vn.left=-188,vn.thickness=0,vn.cornerRadius=5,rn.addControl(vn),vn.onPointerClickObservable.add((function(){const e=Qt.findIndex((e=>"rarity"===e.key));if(-1!==e)"4"==Qt[e].value?(Qt.splice(e,1),vn.background="rgba(0,0,0,0)"):(Qt[e].value="4",wn.background="rgba(0,0,0,0)",vn.background=Dt.background);else{const e={key:"rarity",value:"4"};Qt.push(e),vn.background=Dt.background}tn=ge(Y,Qt),tn=he(tn,qt,Yt),Zi(tn)}));const wn=k.$n.CreateImageOnlyButton("but","res/assets/Genshin/rarity_5.png");wn.height="40px",wn.width="40px",wn.left=-148,wn.thickness=0,wn.cornerRadius=5,rn.addControl(wn),wn.onPointerClickObservable.add((function(){const e=Qt.findIndex((e=>"rarity"===e.key));if(-1!==e)"5"==Qt[e].value?(Qt.splice(e,1),wn.background="rgba(0,0,0,0)"):(Qt[e].value="5",vn.background="rgba(0,0,0,0)",wn.background=Dt.background);else{const e={key:"rarity",value:"5"};Qt.push(e),wn.background=Dt.background}tn=ge(Y,Qt),tn=he(tn,qt,Yt),Zi(tn)}));const kn=k.$n.CreateImageOnlyButton("but","res/assets/HSR/rarity_5.png");kn.height="40px",kn.width="40px",kn.left=-238,kn.thickness=0,kn.cornerRadius=5,rn.addControl(kn),kn.isVisible=!1,kn.onPointerClickObservable.add((function(){const e=Jt.findIndex((e=>"rarity"===e.key));if(-1!==e)"4"==Jt[e].value?(Jt.splice(e,1),kn.background="rgba(0,0,0,0)",kn.image.source="res/assets/HSR/rarity_5.png"):(Jt[e].value="4",kn.background=Dt.background,kn.image.source="res/assets/HSR/rarity_4.png");else{const e={key:"rarity",value:"5"};Jt.push(e),kn.background=Dt.background}tn=ge(J,Jt),tn=he(tn,qt,Yt),Zi(tn)}));const On=k.$n.CreateImageOnlyButton("but","res/assets/ZZZ/Icon_AgentRank_A.png");On.height="40px",On.width="40px",On.left=-188,On.thickness=0,On.cornerRadius=5,rn.addControl(On),On.isVisible=!1,On.onPointerClickObservable.add((function(){const e=Xt.findIndex((e=>"rarity"===e.key));if(-1!==e)"4"==Xt[e].value?(Xt.splice(e,1),On.background="rgba(0,0,0,0)"):(Xt[e].value="4",Cn.background="rgba(0,0,0,0)",On.background=Dt.background);else{const e={key:"rarity",value:"4"};Xt.push(e),On.background=Dt.background}tn=ge(K,Xt),tn=he(tn,qt,Yt),Zi(tn)}));const Cn=k.$n.CreateImageOnlyButton("but","res/assets/ZZZ/Icon_AgentRank_S.png");Cn.height="40px",Cn.width="40px",Cn.left=-148,Cn.thickness=0,Cn.cornerRadius=5,rn.addControl(Cn),Cn.isVisible=!1,Cn.onPointerClickObservable.add((function(){const e=Xt.findIndex((e=>"rarity"===e.key));if(-1!==e)"5"==Xt[e].value?(Xt.splice(e,1),Cn.background="rgba(0,0,0,0)"):(Xt[e].value="5",On.background="rgba(0,0,0,0)",Cn.background=Dt.background);else{const e={key:"rarity",value:"5"};Xt.push(e),Cn.background=Dt.background}tn=ge(K,Xt),tn=he(tn,qt,Yt),Zi(tn)}));const Pn=k.$n.CreateImageOnlyButton("but","res/assets/WuWa/rarity_4.png");Pn.height="40px",Pn.width="40px",Pn.left=-188,Pn.thickness=0,Pn.cornerRadius=5,rn.addControl(Pn),Pn.isVisible=!1,Pn.onPointerClickObservable.add((function(){const e=Kt.findIndex((e=>"rarity"===e.key));if(-1!==e)"4"==Kt[e].value?(Kt.splice(e,1),Pn.background="rgba(0,0,0,0)"):(Kt[e].value="4",Tn.background="rgba(0,0,0,0)",Pn.background=Dt.background);else{const e={key:"rarity",value:"4"};Kt.push(e),Pn.background=Dt.background}tn=ge(te,Kt),tn=he(tn,qt,Yt),Zi(tn)}));const Tn=k.$n.CreateImageOnlyButton("but","res/assets/WuWa/rarity_5.png");Tn.height="40px",Tn.width="40px",Tn.left=-148,Tn.thickness=0,Tn.cornerRadius=5,rn.addControl(Tn),Tn.isVisible=!1,Tn.onPointerClickObservable.add((function(){const e=Kt.findIndex((e=>"rarity"===e.key));if(-1!==e)"5"==Kt[e].value?(Kt.splice(e,1),Tn.background="rgba(0,0,0,0)"):(Kt[e].value="5",Pn.background="rgba(0,0,0,0)",Tn.background=Dt.background);else{const e={key:"rarity",value:"5"};Kt.push(e),Tn.background=Dt.background}tn=ge(te,Kt),tn=he(tn,qt,Yt),Zi(tn)}));const In=k.$n.CreateImageOnlyButton("but","res/assets/HNA/rarity_4.png");In.height="40px",In.width="40px",In.left=-188,In.thickness=0,In.cornerRadius=5,rn.addControl(In),In.isVisible=!1,In.onPointerClickObservable.add((function(){const e=en.findIndex((e=>"rarity"===e.key));if(-1!==e)"4"==en[e].value?(en.splice(e,1),In.background="rgba(0,0,0,0)"):(en[e].value="4",Mn.background="rgba(0,0,0,0)",In.background=Dt.background);else{const e={key:"rarity",value:"4"};en.push(e),In.background=Dt.background}tn=ge(ie,en),tn=he(tn,qt,Yt),Zi(tn)}));const Mn=k.$n.CreateImageOnlyButton("but","res/assets/HNA/rarity_5.png");function En(e,t,n){const i=Qt.findIndex((e=>e.key===n));if(-1!==i)Qt[i].value==t?(Qt.splice(i,1),e.background="rgba(0,0,0,0)"):(Qt[i].value=t,"element"==n.toString()?(Yn.background="rgba(0,0,0,0)",Qn.background="rgba(0,0,0,0)",Jn.background="rgba(0,0,0,0)",Xn.background="rgba(0,0,0,0)",Kn.background="rgba(0,0,0,0)",ei.background="rgba(0,0,0,0)",ti.background="rgba(0,0,0,0)"):(ni.background="rgba(0,0,0,0)",ii.background="rgba(0,0,0,0)",oi.background="rgba(0,0,0,0)",ai.background="rgba(0,0,0,0)",si.background="rgba(0,0,0,0)"),e.background=Dt.background);else{const i={key:n,value:t};Qt.push(i),e.background=Dt.background}tn=ge(Y,Qt),tn=he(tn,qt,Yt),Zi(tn)}function _n(e,t,n){const i=Jt.findIndex((e=>e.key===n));if(-1!==i)Jt[i].value==t?(Jt.splice(i,1),e.background="rgba(0,0,0,0)"):(Jt[i].value=t,"element"==n.toString()?(Ln.background="rgba(0,0,0,0)",Sn.background="rgba(0,0,0,0)",Nn.background="rgba(0,0,0,0)",Vn.background="rgba(0,0,0,0)",Dn.background="rgba(0,0,0,0)",Bn.background="rgba(0,0,0,0)",Zn.background="rgba(0,0,0,0)"):($n.background="rgba(0,0,0,0)",zn.background="rgba(0,0,0,0)",jn.background="rgba(0,0,0,0)",Hn.background="rgba(0,0,0,0)",Gn.background="rgba(0,0,0,0)",Fn.background="rgba(0,0,0,0)",Wn.background="rgba(0,0,0,0)",Un.background="rgba(0,0,0,0)"),e.background=Dt.background);else{const i={key:n,value:t};Jt.push(i),e.background=Dt.background}tn=ge(J,Jt),tn=he(tn,qt,Yt),Zi(tn)}function An(e,t,n){const i=Xt.findIndex((e=>e.key===n));if(-1!==i)Xt[i].value==t?(Xt.splice(i,1),e.background="rgba(0,0,0,0)"):(Xt[i].value=t,"element"==n.toString()?(di.background="rgba(0,0,0,0)",ci.background="rgba(0,0,0,0)",ui.background="rgba(0,0,0,0)",bi.background="rgba(0,0,0,0)",gi.background="rgba(0,0,0,0)"):(hi.background="rgba(0,0,0,0)",pi.background="rgba(0,0,0,0)",mi.background="rgba(0,0,0,0)",fi.background="rgba(0,0,0,0)",yi.background="rgba(0,0,0,0)",xi.background="rgba(0,0,0,0)"),e.background=Dt.background);else{const i={key:n,value:t};Xt.push(i),e.background=Dt.background}tn=ge(K,Xt),tn=he(tn,qt,Yt),Zi(tn)}function Rn(e,t,n){const i=Kt.findIndex((e=>e.key===n));if(-1!==i)Kt[i].value==t?(Kt.splice(i,1),e.background="rgba(0,0,0,0)"):(Kt[i].value=t,"element"==n.toString()?(wi.background="rgba(0,0,0,0)",ki.background="rgba(0,0,0,0)",Oi.background="rgba(0,0,0,0)",Ci.background="rgba(0,0,0,0)",Pi.background="rgba(0,0,0,0)",Ti.background="rgba(0,0,0,0)"):(Ii.background="rgba(0,0,0,0)",Mi.background="rgba(0,0,0,0)",Ei.background="rgba(0,0,0,0)",_i.background="rgba(0,0,0,0)",Ai.background="rgba(0,0,0,0)"),e.background=Dt.background);else{const i={key:n,value:t};Kt.push(i),e.background=Dt.background}tn=ge(te,Kt),tn=he(tn,qt,Yt),Zi(tn)}Mn.height="40px",Mn.width="40px",Mn.left=-148,Mn.thickness=0,Mn.cornerRadius=5,rn.addControl(Mn),Mn.isVisible=!1,Mn.onPointerClickObservable.add((function(){const e=en.findIndex((e=>"rarity"===e.key));if(-1!==e)"5"==en[e].value?(en.splice(e,1),Mn.background="rgba(0,0,0,0)"):(en[e].value="5",In.background="rgba(0,0,0,0)",Mn.background=Dt.background);else{const e={key:"rarity",value:"5"};en.push(e),Mn.background=Dt.background}tn=ge(ie,en),tn=he(tn,qt,Yt),Zi(tn)}));const Ln=k.$n.CreateImageOnlyButton("but","res/assets/HSR/element_fire.png");Ln.height="40px",Ln.width="40px",Ln.left=52,Ln.thickness=0,Ln.cornerRadius=5,Ln.isVisible=!1,rn.addControl(Ln),Ln.onPointerClickObservable.add((function(){_n(Ln,"Fire","element")})),Ln.onPointerEnterObservable.add((function(){dn.text="Fire"})),Ln.onPointerOutObservable.add((function(){dn.text=""}));const Sn=k.$n.CreateImageOnlyButton("but","res/assets/HSR/element_ice.png");Sn.height="40px",Sn.width="40px",Sn.left=92,Sn.thickness=0,Sn.cornerRadius=5,Sn.isVisible=!1,rn.addControl(Sn),Sn.onPointerClickObservable.add((function(){_n(Sn,"Ice","element")})),Sn.onPointerEnterObservable.add((function(){dn.text="Ice"})),Sn.onPointerOutObservable.add((function(){dn.text=""}));const Nn=k.$n.CreateImageOnlyButton("but","res/assets/HSR/element_imaginary.png");Nn.height="40px",Nn.width="40px",Nn.left=132,Nn.thickness=0,Nn.cornerRadius=5,Nn.isVisible=!1,rn.addControl(Nn),Nn.onPointerClickObservable.add((function(){_n(Nn,"Imaginary","element")})),Nn.onPointerEnterObservable.add((function(){dn.text="Imaginary"})),Nn.onPointerOutObservable.add((function(){dn.text=""}));const Vn=k.$n.CreateImageOnlyButton("but","res/assets/HSR/element_lightning.png");Vn.height="40px",Vn.width="40px",Vn.left=172,Vn.thickness=0,Vn.cornerRadius=5,Vn.isVisible=!1,rn.addControl(Vn),Vn.onPointerClickObservable.add((function(){_n(Vn,"Lightning","element")})),Vn.onPointerEnterObservable.add((function(){dn.text="Lightning"})),Vn.onPointerOutObservable.add((function(){dn.text=""}));const Dn=k.$n.CreateImageOnlyButton("but","res/assets/HSR/element_physical.png");Dn.height="40px",Dn.width="40px",Dn.left=212,Dn.thickness=0,Dn.cornerRadius=5,Dn.isVisible=!1,rn.addControl(Dn),Dn.onPointerClickObservable.add((function(){_n(Dn,"Physical","element")})),Dn.onPointerEnterObservable.add((function(){dn.text="Physical"})),Dn.onPointerOutObservable.add((function(){dn.text=""}));const Bn=k.$n.CreateImageOnlyButton("but","res/assets/HSR/element_quantum.png");Bn.height="40px",Bn.width="40px",Bn.left=252,Bn.thickness=0,Bn.cornerRadius=5,Bn.isVisible=!1,rn.addControl(Bn),Bn.onPointerClickObservable.add((function(){_n(Bn,"Quantum","element")})),Bn.onPointerEnterObservable.add((function(){dn.text="Quantum"})),Bn.onPointerOutObservable.add((function(){dn.text=""}));const Zn=k.$n.CreateImageOnlyButton("but","res/assets/HSR/element_wind.png");Zn.height="40px",Zn.width="40px",Zn.left=292,Zn.thickness=0,Zn.cornerRadius=5,Zn.isVisible=!1,rn.addControl(Zn),Zn.onPointerClickObservable.add((function(){_n(Zn,"Wind","element")})),Zn.onPointerEnterObservable.add((function(){dn.text="Wind"})),Zn.onPointerOutObservable.add((function(){dn.text=""}));const $n=k.$n.CreateImageOnlyButton("but","res/assets/HSR/path_the_abundance.png");$n.height="40px",$n.width="40px",$n.left=12,$n.thickness=0,$n.cornerRadius=5,$n.isVisible=!1,ln.addControl($n),$n.onPointerClickObservable.add((function(){_n($n,"Abundance","weaponType")})),$n.onPointerEnterObservable.add((function(){dn.text="Abundance"})),$n.onPointerOutObservable.add((function(){dn.text=""}));const zn=k.$n.CreateImageOnlyButton("but","res/assets/HSR/path_the_destruction.png");zn.height="40px",zn.width="40px",zn.left=52,zn.thickness=0,zn.cornerRadius=5,zn.isVisible=!1,ln.addControl(zn),zn.onPointerClickObservable.add((function(){_n(zn,"Destruction","weaponType")})),zn.onPointerEnterObservable.add((function(){dn.text="Destruction"})),zn.onPointerOutObservable.add((function(){dn.text=""}));const jn=k.$n.CreateImageOnlyButton("but","res/assets/HSR/path_the_erudition.png");jn.height="40px",jn.width="40px",jn.left=92,jn.thickness=0,jn.cornerRadius=5,jn.isVisible=!1,ln.addControl(jn),jn.onPointerClickObservable.add((function(){_n(jn,"Erudition","weaponType")})),jn.onPointerEnterObservable.add((function(){dn.text="Erudition"})),jn.onPointerOutObservable.add((function(){dn.text=""}));const Hn=k.$n.CreateImageOnlyButton("but","res/assets/HSR/path_the_harmony.png");Hn.height="40px",Hn.width="40px",Hn.left=132,Hn.thickness=0,Hn.cornerRadius=5,Hn.isVisible=!1,ln.addControl(Hn),Hn.onPointerClickObservable.add((function(){_n(Hn,"Harmony","weaponType")})),Hn.onPointerEnterObservable.add((function(){dn.text="Harmony"})),Hn.onPointerOutObservable.add((function(){dn.text=""}));const Gn=k.$n.CreateImageOnlyButton("but","res/assets/HSR/path_the_hunt.png");Gn.height="40px",Gn.width="40px",Gn.left=172,Gn.thickness=0,Gn.cornerRadius=5,Gn.isVisible=!1,ln.addControl(Gn),Gn.onPointerClickObservable.add((function(){_n(Gn,"Hunt","weaponType")})),Gn.onPointerEnterObservable.add((function(){dn.text="Hunt"})),Gn.onPointerOutObservable.add((function(){dn.text=""}));const Fn=k.$n.CreateImageOnlyButton("but","res/assets/HSR/path_the_nihility.png");Fn.height="40px",Fn.width="40px",Fn.left=212,Fn.thickness=0,Fn.cornerRadius=5,Fn.isVisible=!1,ln.addControl(Fn),Fn.onPointerClickObservable.add((function(){_n(Fn,"Nihility","weaponType")})),Fn.onPointerEnterObservable.add((function(){dn.text="Nihility"})),Fn.onPointerOutObservable.add((function(){dn.text=""}));const Wn=k.$n.CreateImageOnlyButton("but","res/assets/HSR/path_the_preservation.png");Wn.height="40px",Wn.width="40px",Wn.left=252,Wn.thickness=0,Wn.cornerRadius=5,Wn.isVisible=!1,ln.addControl(Wn),Wn.onPointerClickObservable.add((function(){_n(Wn,"Preservation","weaponType")})),Wn.onPointerEnterObservable.add((function(){dn.text="Preservation"})),Wn.onPointerOutObservable.add((function(){dn.text=""}));const Un=k.$n.CreateImageOnlyButton("but","res/assets/HSR/path_the_remembrance.png");function qn(){Ln.isVisible=!1,Sn.isVisible=!1,Nn.isVisible=!1,Vn.isVisible=!1,Dn.isVisible=!1,Bn.isVisible=!1,Zn.isVisible=!1,$n.isVisible=!1,zn.isVisible=!1,jn.isVisible=!1,Hn.isVisible=!1,Gn.isVisible=!1,Fn.isVisible=!1,Wn.isVisible=!1,Un.isVisible=!1,xn.isVisible=!1,kn.isVisible=!1}Un.height="40px",Un.width="40px",Un.left=292,Un.thickness=0,Un.cornerRadius=5,Un.isVisible=!1,ln.addControl(Un),Un.onPointerClickObservable.add((function(){_n(Un,"Remembrance","weaponType")})),Un.onPointerEnterObservable.add((function(){dn.text="Remembrance"})),Un.onPointerOutObservable.add((function(){dn.text=""}));const Yn=k.$n.CreateImageOnlyButton("but","res/assets/Genshin/element_anemo.png");Yn.height="40px",Yn.width="40px",Yn.left=52,Yn.thickness=0,Yn.cornerRadius=5,rn.addControl(Yn),Yn.onPointerClickObservable.add((function(){En(Yn,"Anemo","element")})),Yn.onPointerEnterObservable.add((function(){dn.text="Anemo"})),Yn.onPointerOutObservable.add((function(){dn.text=""}));const Qn=k.$n.CreateImageOnlyButton("but","res/assets/Genshin/element_geo.png");Qn.height="40px",Qn.width="40px",Qn.left=92,Qn.thickness=0,Qn.cornerRadius=5,rn.addControl(Qn),Qn.onPointerClickObservable.add((function(){En(Qn,"Geo","element")})),Qn.onPointerEnterObservable.add((function(){dn.text="Geo"})),Qn.onPointerOutObservable.add((function(){dn.text=""}));const Jn=k.$n.CreateImageOnlyButton("but","res/assets/Genshin/element_electro.png");Jn.height="40px",Jn.width="40px",Jn.left=132,Jn.thickness=0,Jn.cornerRadius=5,rn.addControl(Jn),Jn.onPointerClickObservable.add((function(){En(Jn,"Electro","element")})),Jn.onPointerEnterObservable.add((function(){dn.text="Electro"})),Jn.onPointerOutObservable.add((function(){dn.text=""}));const Xn=k.$n.CreateImageOnlyButton("but","res/assets/Genshin/element_dendro.png");Xn.height="40px",Xn.width="40px",Xn.left=172,Xn.thickness=0,Xn.cornerRadius=5,rn.addControl(Xn),Xn.onPointerClickObservable.add((function(){En(Xn,"Dendro","element")})),Xn.onPointerEnterObservable.add((function(){dn.text="Dendro"})),Xn.onPointerOutObservable.add((function(){dn.text=""}));const Kn=k.$n.CreateImageOnlyButton("but","res/assets/Genshin/element_hydro.png");Kn.height="40px",Kn.width="40px",Kn.left=212,Kn.thickness=0,Kn.cornerRadius=5,rn.addControl(Kn),Kn.onPointerClickObservable.add((function(){En(Kn,"Hydro","element")})),Kn.onPointerEnterObservable.add((function(){dn.text="Hydro"})),Kn.onPointerOutObservable.add((function(){dn.text=""}));const ei=k.$n.CreateImageOnlyButton("but","res/assets/Genshin/element_pyro.png");ei.height="40px",ei.width="40px",ei.left=252,ei.thickness=0,ei.cornerRadius=5,rn.addControl(ei),ei.onPointerClickObservable.add((function(){En(ei,"Pyro","element")})),ei.onPointerEnterObservable.add((function(){dn.text="Pyro"})),ei.onPointerOutObservable.add((function(){dn.text=""}));const ti=k.$n.CreateImageOnlyButton("but","res/assets/Genshin/element_cryo.png");ti.height="40px",ti.width="40px",ti.left=292,ti.thickness=0,ti.cornerRadius=5,rn.addControl(ti),ti.onPointerClickObservable.add((function(){En(ti,"Cryo","element")})),ti.onPointerEnterObservable.add((function(){dn.text="Cryo"})),ti.onPointerOutObservable.add((function(){dn.text=""}));const ni=k.$n.CreateImageOnlyButton("but","res/assets/Genshin/Sword.png");ni.height="40px",ni.width="40px",ni.left=92,ni.thickness=0,ni.cornerRadius=5,ln.addControl(ni),ni.onPointerClickObservable.add((function(){En(ni,"Sword","weaponType")})),ni.onPointerEnterObservable.add((function(){dn.text="Sword"})),ni.onPointerOutObservable.add((function(){dn.text=""}));const ii=k.$n.CreateImageOnlyButton("but","res/assets/Genshin/Catalyst.png");ii.height="40px",ii.width="40px",ii.left=132,ii.thickness=0,ii.cornerRadius=5,ln.addControl(ii),ii.onPointerClickObservable.add((function(){En(ii,"Catalyst","weaponType")})),ii.onPointerEnterObservable.add((function(){dn.text="Catalyst"})),ii.onPointerOutObservable.add((function(){dn.text=""}));const oi=k.$n.CreateImageOnlyButton("but","res/assets/Genshin/Bow.png");oi.height="40px",oi.width="40px",oi.left=172,oi.thickness=0,oi.cornerRadius=5,ln.addControl(oi),oi.onPointerClickObservable.add((function(){En(oi,"Bow","weaponType")})),oi.onPointerEnterObservable.add((function(){dn.text="Bow"})),oi.onPointerOutObservable.add((function(){dn.text=""}));const ai=k.$n.CreateImageOnlyButton("but","res/assets/Genshin/Claymore.png");ai.height="40px",ai.width="40px",ai.left=212,ai.thickness=0,ai.cornerRadius=5,ln.addControl(ai),ai.onPointerClickObservable.add((function(){En(ai,"Claymore","weaponType")})),ai.onPointerEnterObservable.add((function(){dn.text="Claymore"})),ai.onPointerOutObservable.add((function(){dn.text=""}));const si=k.$n.CreateImageOnlyButton("but","res/assets/Genshin/Pole.png");function ri(){vn.isVisible=!1,wn.isVisible=!1,Yn.isVisible=!1,Qn.isVisible=!1,Jn.isVisible=!1,Xn.isVisible=!1,Kn.isVisible=!1,ei.isVisible=!1,ti.isVisible=!1,ni.isVisible=!1,ii.isVisible=!1,oi.isVisible=!1,ai.isVisible=!1,si.isVisible=!1,yn.isVisible=!1}function li(){In.isVisible=!1,Mn.isVisible=!1,yn.isVisible=!1}si.height="40px",si.width="40px",si.left=252,si.thickness=0,si.cornerRadius=5,ln.addControl(si),si.onPointerClickObservable.add((function(){En(si,"Polearm","weaponType")})),si.onPointerEnterObservable.add((function(){dn.text="Polearm"})),si.onPointerOutObservable.add((function(){dn.text=""}));const di=k.$n.CreateImageOnlyButton("but","res/assets/ZZZ/Icon_Electric.png");di.height="40px",di.width="40px",di.left=92,di.thickness=0,di.cornerRadius=5,di.isVisible=!1,rn.addControl(di),di.onPointerClickObservable.add((function(){An(di,"Electric","element")})),di.onPointerEnterObservable.add((function(){dn.text="Electric"})),di.onPointerOutObservable.add((function(){dn.text=""}));const ci=k.$n.CreateImageOnlyButton("but","res/assets/ZZZ/Icon_Ether.png");ci.height="40px",ci.width="40px",ci.left=132,ci.thickness=0,ci.cornerRadius=5,ci.isVisible=!1,rn.addControl(ci),ci.onPointerClickObservable.add((function(){An(ci,"Ether","element")})),ci.onPointerEnterObservable.add((function(){dn.text="Ether"})),ci.onPointerOutObservable.add((function(){dn.text=""}));const ui=k.$n.CreateImageOnlyButton("but","res/assets/ZZZ/Icon_Fire.png");ui.height="40px",ui.width="40px",ui.left=172,ui.thickness=0,ui.cornerRadius=5,ui.isVisible=!1,rn.addControl(ui),ui.onPointerClickObservable.add((function(){An(ui,"Fire","element")})),ui.onPointerEnterObservable.add((function(){dn.text="Fire"})),ui.onPointerOutObservable.add((function(){dn.text=""}));const bi=k.$n.CreateImageOnlyButton("but","res/assets/ZZZ/Icon_Ice.png");bi.height="40px",bi.width="40px",bi.left=212,bi.thickness=0,bi.cornerRadius=5,bi.isVisible=!1,rn.addControl(bi),bi.onPointerClickObservable.add((function(){An(bi,"Ice","element")})),bi.onPointerEnterObservable.add((function(){dn.text="Ice"})),bi.onPointerOutObservable.add((function(){dn.text=""}));const gi=k.$n.CreateImageOnlyButton("but","res/assets/ZZZ/Icon_Physical.png");gi.height="40px",gi.width="40px",gi.left=252,gi.thickness=0,gi.cornerRadius=5,gi.isVisible=!1,rn.addControl(gi),gi.onPointerClickObservable.add((function(){An(gi,"Physical","element")})),gi.onPointerEnterObservable.add((function(){dn.text="Physical"})),gi.onPointerOutObservable.add((function(){dn.text=""}));const hi=k.$n.CreateImageOnlyButton("but","res/assets/ZZZ/Icon_Anomaly.png");hi.height="40px",hi.width="40px",hi.left=92,hi.thickness=0,hi.cornerRadius=5,hi.isVisible=!1,ln.addControl(hi),hi.onPointerClickObservable.add((function(){An(hi,"Anomaly","weaponType")})),hi.onPointerEnterObservable.add((function(){dn.text="Anomaly"})),hi.onPointerOutObservable.add((function(){dn.text=""}));const pi=k.$n.CreateImageOnlyButton("but","res/assets/ZZZ/Icon_Attack.png");pi.height="40px",pi.width="40px",pi.left=132,pi.thickness=0,pi.cornerRadius=5,pi.isVisible=!1,ln.addControl(pi),pi.onPointerClickObservable.add((function(){An(pi,"Attack","weaponType")})),pi.onPointerEnterObservable.add((function(){dn.text="Attack"})),pi.onPointerOutObservable.add((function(){dn.text=""}));const mi=k.$n.CreateImageOnlyButton("but","res/assets/ZZZ/Icon_Defense.png");mi.height="40px",mi.width="40px",mi.left=172,mi.thickness=0,mi.cornerRadius=5,mi.isVisible=!1,ln.addControl(mi),mi.onPointerClickObservable.add((function(){An(mi,"Defense","weaponType")})),mi.onPointerEnterObservable.add((function(){dn.text="Defense"})),mi.onPointerOutObservable.add((function(){dn.text=""}));const fi=k.$n.CreateImageOnlyButton("but","res/assets/ZZZ/Icon_Stun.png");fi.height="40px",fi.width="40px",fi.left=212,fi.thickness=0,fi.cornerRadius=5,fi.isVisible=!1,ln.addControl(fi),fi.onPointerClickObservable.add((function(){An(fi,"Stun","weaponType")})),fi.onPointerEnterObservable.add((function(){dn.text="Stun"})),fi.onPointerOutObservable.add((function(){dn.text=""}));const yi=k.$n.CreateImageOnlyButton("but","res/assets/ZZZ/Icon_Support.png");yi.height="40px",yi.width="40px",yi.left=252,yi.thickness=0,yi.cornerRadius=5,yi.isVisible=!1,ln.addControl(yi),yi.onPointerClickObservable.add((function(){An(yi,"Support","weaponType")})),yi.onPointerEnterObservable.add((function(){dn.text="Support"})),yi.onPointerOutObservable.add((function(){dn.text=""}));const xi=k.$n.CreateImageOnlyButton("but","res/assets/ZZZ/Icon_Rupture.png");function vi(){On.isVisible=!1,Cn.isVisible=!1,di.isVisible=!1,ci.isVisible=!1,ui.isVisible=!1,bi.isVisible=!1,gi.isVisible=!1,hi.isVisible=!1,pi.isVisible=!1,mi.isVisible=!1,fi.isVisible=!1,yi.isVisible=!1,xi.isVisible=!1,yn.isVisible=!1}xi.height="40px",xi.width="40px",xi.left=292,xi.thickness=0,xi.cornerRadius=5,xi.isVisible=!1,ln.addControl(xi),xi.onPointerClickObservable.add((function(){An(xi,"Rupture","weaponType")})),xi.onPointerEnterObservable.add((function(){dn.text="Rupture"})),xi.onPointerOutObservable.add((function(){dn.text=""}));const wi=k.$n.CreateImageOnlyButton("but","res/assets/WuWa/Aero.png");wi.height="40px",wi.width="40px",wi.left=52,wi.thickness=0,wi.cornerRadius=5,rn.addControl(wi),wi.onPointerClickObservable.add((function(){Rn(wi,"Aero","element")})),wi.onPointerEnterObservable.add((function(){dn.text="Aero"})),wi.onPointerOutObservable.add((function(){dn.text=""}));const ki=k.$n.CreateImageOnlyButton("but","res/assets/WuWa/Spectro.png");ki.height="40px",ki.width="40px",ki.left=92,ki.thickness=0,ki.cornerRadius=5,rn.addControl(ki),ki.onPointerClickObservable.add((function(){Rn(ki,"Spectro","element")})),ki.onPointerEnterObservable.add((function(){dn.text="Spectro"})),ki.onPointerOutObservable.add((function(){dn.text=""}));const Oi=k.$n.CreateImageOnlyButton("but","res/assets/WuWa/Electro.png");Oi.height="40px",Oi.width="40px",Oi.left=132,Oi.thickness=0,Oi.cornerRadius=5,rn.addControl(Oi),Oi.onPointerClickObservable.add((function(){Rn(Oi,"Electro","element")})),Oi.onPointerEnterObservable.add((function(){dn.text="Electro"})),Oi.onPointerOutObservable.add((function(){dn.text=""}));const Ci=k.$n.CreateImageOnlyButton("but","res/assets/WuWa/Havoc.png");Ci.height="40px",Ci.width="40px",Ci.left=172,Ci.thickness=0,Ci.cornerRadius=5,rn.addControl(Ci),Ci.onPointerClickObservable.add((function(){Rn(Ci,"Havoc","element")})),Ci.onPointerEnterObservable.add((function(){dn.text="Havoc"})),Ci.onPointerOutObservable.add((function(){dn.text=""}));const Pi=k.$n.CreateImageOnlyButton("but","res/assets/WuWa/Glacio.png");Pi.height="40px",Pi.width="40px",Pi.left=212,Pi.thickness=0,Pi.cornerRadius=5,rn.addControl(Pi),Pi.onPointerClickObservable.add((function(){Rn(Pi,"Glacio","element")})),Pi.onPointerEnterObservable.add((function(){dn.text="Glacio"})),Pi.onPointerOutObservable.add((function(){dn.text=""}));const Ti=k.$n.CreateImageOnlyButton("but","res/assets/WuWa/Fusion.png");Ti.height="40px",Ti.width="40px",Ti.left=252,Ti.thickness=0,Ti.cornerRadius=5,rn.addControl(Ti),Ti.onPointerClickObservable.add((function(){Rn(Ti,"Fusion","element")})),Ti.onPointerEnterObservable.add((function(){dn.text="Fusion"})),Ti.onPointerOutObservable.add((function(){dn.text=""}));const Ii=k.$n.CreateImageOnlyButton("but","res/assets/WuWa/Sword_Icon.png");Ii.height="40px",Ii.width="40px",Ii.left=92,Ii.thickness=0,Ii.cornerRadius=5,ln.addControl(Ii),Ii.onPointerClickObservable.add((function(){Rn(Ii,"Sword","weaponType")})),Ii.onPointerEnterObservable.add((function(){dn.text="Sword"})),Ii.onPointerOutObservable.add((function(){dn.text=""}));const Mi=k.$n.CreateImageOnlyButton("but","res/assets/WuWa/Rectifier_Icon.png");Mi.height="40px",Mi.width="40px",Mi.left=132,Mi.thickness=0,Mi.cornerRadius=5,ln.addControl(Mi),Mi.onPointerClickObservable.add((function(){Rn(Mi,"Rectifier","weaponType")})),Mi.onPointerEnterObservable.add((function(){dn.text="Rectifier"})),Mi.onPointerOutObservable.add((function(){dn.text=""}));const Ei=k.$n.CreateImageOnlyButton("but","res/assets/WuWa/Pistols_Icon.png");Ei.height="40px",Ei.width="40px",Ei.left=172,Ei.thickness=0,Ei.cornerRadius=5,ln.addControl(Ei),Ei.onPointerClickObservable.add((function(){Rn(Ei,"Pistols","weaponType")})),Ei.onPointerEnterObservable.add((function(){dn.text="Pistols"})),Ei.onPointerOutObservable.add((function(){dn.text=""}));const _i=k.$n.CreateImageOnlyButton("but","res/assets/WuWa/Gauntlets_Icon.png");_i.height="40px",_i.width="40px",_i.left=212,_i.thickness=0,_i.cornerRadius=5,ln.addControl(_i),_i.onPointerClickObservable.add((function(){Rn(_i,"Gauntlets","weaponType")})),_i.onPointerEnterObservable.add((function(){dn.text="Gauntlets"})),_i.onPointerOutObservable.add((function(){dn.text=""}));const Ai=k.$n.CreateImageOnlyButton("but","res/assets/WuWa/Broadblade_Icon.png");function Ri(){Pn.isVisible=!1,Tn.isVisible=!1,wi.isVisible=!1,ki.isVisible=!1,Oi.isVisible=!1,Ci.isVisible=!1,Pi.isVisible=!1,Ti.isVisible=!1,Ii.isVisible=!1,Mi.isVisible=!1,Ei.isVisible=!1,_i.isVisible=!1,Ai.isVisible=!1,yn.isVisible=!1,un.image.source="res/assets/search.png"}Ai.height="40px",Ai.width="40px",Ai.left=252,Ai.thickness=0,Ai.cornerRadius=5,ln.addControl(Ai),Ai.onPointerClickObservable.add((function(){Rn(Ai,"Broadblade","weaponType")})),Ai.onPointerEnterObservable.add((function(){dn.text="Broadblade"})),Ai.onPointerOutObservable.add((function(){dn.text=""})),Ri(),yn.isVisible=!0;const Li=new k.oE("scrollName");Li.cornerRadiusX=15,Li.cornerRadiusY=15,Li.thickness=0,jt.addControl(Li);let Si,Ni,Vi=!1;Li.onPointerDownObservable.add((()=>{Vi=!0})),Li.onPointerUpObservable.add((()=>{Vi=!1}));let Di=new k.xA,Bi=10;function Zi(e){Di.dispose(),Di=new k.xA,Bi=Math.ceil(e.length/5)+1,Di.removeRowDefinition,Di.color="black",Di.width="680px",Di.heightInPixels=Bi*Di.widthInPixels/5,Di.addColumnDefinition(.2),Di.addColumnDefinition(.2),Di.addColumnDefinition(.2),Di.addColumnDefinition(.2),Di.addColumnDefinition(.2);for(let e=0;e<Bi;e++)Di.addRowDefinition(1/Bi);Li.addControl(Di);let t=0;for(let n=0;n<Bi;n++)for(let i=0;i<5;i++)if(t>e.length-1){let e;"Genshin"==Ke||"None"==Ke?(e=k.$n.CreateImageOnlyButton("but",j+"gi/Genshin/Paimon.png"),e.onPointerEnterObservable.add((function(){dn.text="Paimon"})),e.onPointerClickObservable.add((async function(){Dt.isVisible=!Dt.isVisible,"Paimon"!=Xe&&await ji("Paimon")}))):"HSR"==Ke?(e=k.$n.CreateImageOnlyButton("but",j+"hsr/HSR/Pom-Pom.png"),e.onPointerEnterObservable.add((function(){dn.text="Pom-Pom"})),e.onPointerClickObservable.add((async function(){Dt.isVisible=!Dt.isVisible,"Pom-Pom"!=Xe&&await ji("Pom-Pom")}))):"ZZZ"==Ke?(e=k.$n.CreateImageOnlyButton("but",j+"zzz/ZZZ/Bangboo.png"),e.onPointerEnterObservable.add((function(){dn.text="Bangboo"})),e.onPointerClickObservable.add((async function(){Dt.isVisible=!Dt.isVisible,"Bangboo"!=Xe&&await ji("Bangboo")}))):"WuWa"==Ke?(e=k.$n.CreateImageOnlyButton("but",j+"ww/WuWa/Abby.png"),e.onPointerEnterObservable.add((function(){dn.text="Abby"})),e.onPointerClickObservable.add((async function(){Dt.isVisible=!Dt.isVisible,"Abby"!=Xe&&await ji("Abby")}))):(e=k.$n.CreateImageOnlyButton("but","res/assets/HNA/Puddlipup.png"),e.onPointerEnterObservable.add((function(){dn.text="Puddlipup"})),e.onPointerClickObservable.add((async function(){}))),e.onPointerOutObservable.add((function(){dn.text=""})),e.thickness=0,e.paddingBottom=e.paddingLeft=e.paddingRight=e.paddingTop=5,e.cornerRadius=10,Di.addControl(e,n,i)}else{const o=e[t],a=new k.tN;a.cornerRadius=10,a.thickness=0,a.paddingBottom=a.paddingTop=a.paddingRight=a.paddingLeft=5,a.background="rgb(123,92,144)",5==o.rarity?a.background="rgb(146,109,69)":6==o.rarity&&(a.background="rgb(192,79,85)"),Di.addControl(a,n,i);const s=k.$n.CreateImageOnlyButton("but",`${j}/${o.image}`);if(s.thickness=0,s.cornerRadius=10,s.paddingBottom=s.paddingTop=s.paddingRight=s.paddingLeft=5,Di.addControl(s,n,i),s.onPointerEnterObservable.add((function(){dn.text=o.name})),s.onPointerOutObservable.add((function(){dn.text=""})),s.onPointerClickObservable.add((async function(){Dt.isVisible=!Dt.isVisible,(Xe!=o.name||qe!=o.id&&1!=_t)&&await ji(o.name,o.id)})),ae(re,o.name)){const e=new k._V("but","res/assets/skin_icon.png");e.verticalAlignment=k.Ec.VERTICAL_ALIGNMENT_TOP,e.horizontalAlignment=k.Ec.HORIZONTAL_ALIGNMENT_RIGHT,e.paddingRight=e.paddingTop=10,e.widthInPixels=e.heightInPixels=Di.widthInPixels/30,Di.addControl(e,n,i)}t+=1}}Zi(tn);const $i={wasAnimationPlaying:!1,previousSeekTimeFrame:0,wasMuted:!1};let zi=0;async function ji(e,t){if(!e)return;Le.isAnimationPlaying&&($i.wasAnimationPlaying=!0),Le.pauseAnimation(),$i.previousSeekTimeFrame=Le.currentFrameTime,Ue=Xe,Xe=e,Nt.text=Xe,null!=Mt&&(Mt.isVisible=!1),pe||Re.stop(),rt.dispose(!1,!0),st&&st.dispose(!1,!0),$e.dispose(),Ce.restoreState(),Le.unregister(ye),Le=new _.j(ye),Le.loggingEnabled=!0,Le.register(ye),Le.setAudioPlayer(Ze),Le.setAudioPlayer(Ze),$e=new z(ye,Le,Ze,pe),$e.showPlayerControl();let n=0;if("None"==Ke&&(n=ce(t),zi=n),"Paimon"==Xe||"Pom-Pom"==Xe||"Bangboo"==Xe||"Abby"==Xe)_t=!1,Ye=ae(q,Xe),await Hi(Ye);else if("Genshin"==Ke||1==n){const e=be(Q,Xe);if(Ue==Xe)if(e.length>0&&!_t){Ye=e[0],_t=!0,await Hi(Ye);let t=!1;e.length>1&&(t=!0),Et(!0,t,Ye.name)}else if(e.length>0&&_t&&e.length>1){let t=!0,n=0;for(let t=0;t<e.length;t++)Ye.id===e[t].id&&(n=t);const i=(n+1)%e.length;i==e.length-1&&(t=!1),n==e.length-1?(Ye=ae(Y,Xe),_t=!1):(Ye=e[i],_t=!0),await Hi(Ye),Et(!0,t,Ye.name)}else e.length>0&&_t&&(_t=!1,Ye=ae(Y,Xe),await Hi(Ye),Et(!0,!0,Ye.name));else _t=!1,Ye=ae(Y,Xe),await Hi(Ye),e.length>0&&Et(!0,!0,Ye.name)}else if("HSR"==Ke||2==n){const e=be(X,Xe);if(Ue==Xe&&qe==Ye?.id)if(e.length>0&&!_t){Ye=e[0],_t=!0,await Hi(Ye);let t=!1;e.length>1&&(t=!0),Et(!0,t,Ye.name)}else if(e.length>0&&_t&&e.length>1){let t=!0,n=0;for(let t=0;t<e.length;t++)Ye.id===e[t].id&&(n=t);const i=(n+1)%e.length;i==e.length-1&&(t=!1),n==e.length-1?(Ye=ae(J,Xe),_t=!1):(Ye=e[i],_t=!0),await Hi(Ye),Et(!0,t,Ye.name)}else e.length>0&&_t&&(_t=!1,Ye=ae(J,Xe),await Hi(Ye),Et(!0,!0,Ye.name));else _t=!1,Ye=ue(J,t),await Hi(Ye),e.length>0&&Et(!0,!0,Ye.name)}else if("ZZZ"==Ke||3==n){const e=be(ee,Xe);if(Ue==Xe&&qe==Ye?.id)if(e.length>0&&!_t){Ye=e[0],_t=!0,await Hi(Ye);let t=!1;e.length>1&&(t=!0),Et(!0,t,Ye.name)}else if(e.length>0&&_t&&e.length>1){let t=!0,n=0;for(let t=0;t<e.length;t++)Ye.id===e[t].id&&(n=t);const i=(n+1)%e.length;i==e.length-1&&(t=!1),n==e.length-1?(Ye=ae(K,Xe),_t=!1):(Ye=e[i],_t=!0),await Hi(Ye),Et(!0,t,Ye.name)}else e.length>0&&_t&&(_t=!1,Ye=ae(K,Xe),await Hi(Ye),Et(!0,!0,Ye.name));else _t=!1,Ye=ue(K,t),await Hi(Ye),e.length>0&&Et(!0,!0,Ye.name)}else if("WuWa"==Ke||4==n){const e=be(ne,Xe);if(Ue==Xe&&qe==Ye?.id)if(e.length>0&&!_t){Ye=e[0],_t=!0,await Hi(Ye);let t=!1;e.length>1&&(t=!0),Et(!0,t,Ye.name)}else if(e.length>0&&_t&&e.length>1){let t=!0,n=0;for(let t=0;t<e.length;t++)Ye.id===e[t].id&&(n=t);const i=(n+1)%e.length;i==e.length-1&&(t=!1),n==e.length-1?(Ye=ae(te,Xe),_t=!1):(Ye=e[i],_t=!0),await Hi(Ye),Et(!0,t,Ye.name)}else e.length>0&&_t&&(_t=!1,Ye=ae(te,Xe),await Hi(Ye),Et(!0,!0,Ye.name));else _t=!1,Ye=ue(te,t),await Hi(Ye),e.length>0&&Et(!0,!0,Ye.name)}else if("HNA"==Ke||5==n){const e=be(oe,Xe);if(Ue==Xe&&qe==Ye?.id)if(e.length>0&&!_t){Ye=e[0],_t=!0,await Hi(Ye);let t=!1;e.length>1&&(t=!0),Et(!0,t,Ye.name)}else if(e.length>0&&_t&&e.length>1){let t=!0,n=0;for(let t=0;t<e.length;t++)Ye.id===e[t].id&&(n=t);const i=(n+1)%e.length;i==e.length-1&&(t=!1),n==e.length-1?(Ye=ae(oe,Xe),_t=!1):(Ye=e[i],_t=!0),await Hi(Ye),Et(!0,t,Ye.name)}else e.length>0&&_t&&(_t=!1,Ye=ae(ie,Xe),await Hi(Ye),Et(!0,!0,Ye.name));else _t=!1,Ye=ue(ie,t),await Hi(Ye),e.length>0&&Et(!0,!0,Ye.name)}else _t=!1,Ye=ae("Genshin"===Ke||1===n?Y:"HSR"===Ke||2===n?J:"ZZZ"===Ke||3===n?K:"WuWa"===Ke||4===n?te:"HNA"===Ke||5===n?ie:[],Xe),await Hi(Ye);$i.wasAnimationPlaying?(Le.seekAnimation($i.previousSeekTimeFrame,!0),$i.wasAnimationPlaying=!1,Le.isAnimationPlaying||Le.playAnimation()):(Ie.target=new f.Pq(0,10*we,1),Ie.setPosition(Pe),ye.activeCameras[0]=Ie)}async function Hi(e){if(t.displayLoadingUI(),null!=Mt&&(Mt.isEnabled=!1),It.isEnabled=!1,Ge=[],je=[],qe=e.id,Le||(Le=new _.j(ye),Le.loggingEnabled=!0,Le.register(ye),Le.setAudioPlayer(Ze)),!(e&&e.directory&&e.pmx))throw new Error("Chosen character or its properties are undefined");if(Ge.push((0,u.kS)(j+e.directory+"/"+e.pmx,ye,{onProgress:e=>He(2,`Loading model... ${e.loaded}/${e.total} (${Math.floor(100*e.loaded/e.total)}%)`),pluginOptions:{mmdmodel:{loggingEnabled:!0,materialBuilder:me}}})),"WuWa"==Ke?(Qe=!1,Lt.isVisible=!1):(Qe=!0,Lt.isVisible=!0),"WuWa"==Ke||"ZZZ"==Ke||"None"==Ke&&(4==zi||3==zi)?(Qe=!0,Je="Universal"):"HSR"==Ke||"HNA"==Ke||"None"==Ke&&(2==zi||5==zi)?(Qe=!0,Je="HSR"):("Genshin"==Ke||"None"==Ke&&1==zi)&&(Qe=!0,Je=e.element),Qe&&(pe||Re.start(),Ge.push((0,u.kS)("res/stages/GenshinCharacterSphere/CharacterSphere_"+Je+"V.pmx",ye,{onProgress:e=>He(3,`Loading stage... ${e.loaded}/${e.total} (${Math.floor(100*e.loaded/e.total)}%)`),pluginOptions:{mmdmodel:{loggingEnabled:!0,materialBuilder:fe}}}))),tt=await Promise.all(Ge),ye.onAfterRenderObservable.addOnce((()=>{t.hideLoadingUI(),setTimeout((()=>{null!=Mt&&(Mt.isEnabled=!0),It.isEnabled=!0}),1500)})),Qe){const e=tt[1];e.addAllToScene(),st=e.rootNodes[0],st.parent=ke}nt=1.66,it=69,ot=new f.uq,at=tt[0],at.addAllToScene(),rt=at.rootNodes[0],rt.parent=ke,Ae.addShadowCaster(rt);for(const e of rt.metadata.meshes)e.receiveShadows=!0;if(gt=Le.createMmdModel(rt),pt=gt.runtimeBones.find((e=>"é ­"===e.name)),mt=gt.runtimeBones.find((e=>"ã‚»ãƒ³ã‚¿ãƒ¼"===e.name)),ft=new f.uq,null!=pt&&null!=mt){if(ht){const e=gt.createRuntimeAnimation(ht);gt.setRuntimeAnimation(e)}ye.onBeforeDrawPhaseObservable.addOnce((()=>{pt.getWorldMatrixToRef(ot).multiplyToRef(rt.getWorldMatrix(),ot),ot.getTranslationToRef(Oe.position),Oe.position.z=1,Oe.position.x=0,nt-=Oe.position.y,it=Oe.position.y})),ye.onBeforeRenderObservable.addOnce((()=>{mt.getWorldMatrixToRef(ft).multiplyToRef(rt.getWorldMatrix(),ft),ft.getTranslationToRef(_e.position),_e.position.y-=10*we}))}Ce.setRuntimeAnimation(bt),Le.addAnimatable(Ce),ye.onAfterRenderObservable.addOnce((()=>{ye.freezeMaterials();const t=ye.meshes;for(let e=0,n=t.length;e<n;++e){const n=t[e];n.freezeWorldMatrix(),n.doNotSyncBoundingInfo=!0,n.isPickable=!1,n.doNotSyncBoundingInfo=!0,n.alwaysSelectAsActiveMesh=!0}if(ye.skipPointerMovePicking=!0,ye.skipPointerDownPicking=!0,ye.skipPointerUpPicking=!0,ye.skipFrustumClipping=!0,ye.blockMaterialDirtyMechanism=!0,!i)try{o.countUp("phoshco",e.name.replace(/\./g,"")).catch((e=>{console.error("Failed count: ",e)}))}catch(e){console.error("Unexpected error during count: ",e)}}))}Oe.position.x=ke.position.x,Oe.position.y=ke.position.y,Oe.position.z=ke.position.z,ye.onBeforeAnimationsObservable.add((()=>{xt=Ce.position.y/10,Ct.text=`${ye.activeCameras[0].name}`,Oe.position.y=xt<it&&0<xt?0-nt*(xt/it):xt<=0?0:0-nt,Ce.parent=Oe}));const Gi=new f.uq,Fi=new f.Pq;let Wi=new f.Pq;const Ui=new f.Pq;ye.onBeforeRenderObservable.add((()=>{const e=Ce.rotation;f.uq.RotationYawPitchRollToRef(-e.y,-e.x,-e.z,Gi),f.Pq.TransformNormalFromFloatsToRef(0,0,1,Gi,Fi),Wi=Ce.position.addToRef(f.Pq.TransformCoordinatesFromFloatsToRef(0,0,Ce.distance,Gi,Wi),Wi),null!=pt&&null!=mt&&pt.getWorldMatrixToRef(ot).getTranslationToRef(Ui).subtractToRef(Wi,Ui)}));let qi=-1/0;if(e.onclick=()=>{if(Vt)return;const e=performance.now();300<e-qi?qi=e:(qi=-1/0,ye.activeCameras[0]===Ce?(yt.depthOfFieldEnabled=!1,Te.setTarget(new f.Pq(0,10*we,1)),Te.setPosition(Pe),ye.activeCameras[0]=Te):(yt.depthOfFieldEnabled=!1,ye.activeCameras[0]=Ce),Ct.text=`${ye.activeCameras[0].name}`)},document.body.addEventListener("keydown",(function(e){"Space"!==e.code||Dt.isVisible||(e.preventDefault(),ye.activeCameras[0]===Ie&&(yt.depthOfFieldEnabled=!1,Le.isAnimationPlaying||(ye.activeCameras[0]=Ce),Ct.text=`${ye.activeCameras[0].name}`),Le.isAnimationPlaying?Le.pauseAnimation():Le.playAnimation())})),ye.onPointerDown=function(e){Zt||(Bt=window.setTimeout((()=>{$t=!1}),100)),function(e){Vi&&(Si=e.offsetY,Ni=Li.verticalBar.value)}(e)},ye.onPointerUp=function(e){Zt||(window.clearTimeout(Bt),$t&&(Dt.isVisible=!1),$t=!0),Vi&&(Si=void 0)},ye.onPointerMove=function(e){!function(e){if(!Vi)return;if(void 0===Si)return;if(void 0===Ni)return;let t=e.offsetY-Si;pe&&(t*=3);const n=t/(Di.heightInPixels-Li.heightInPixels);Li.verticalBar.value=Ni-n}(e)},"Genshin"==et){const e=be(Q,Xe);if(e.length>0){const t=e[0];_t=!1,Et(!0,!0,t.name)}}else if("HSR"==et){on();const e=be(X,Xe);if(e.length>0){const t=e[0];_t=!1,Et(!0,!0,t.name)}}else if("ZZZ"==et){an();const e=be(ee,Xe);if(e.length>0){const t=e[0];_t=!1,Et(!0,!0,t.name)}}else if("WuWa"==et){bn();const e=be(ne,Xe);if(e.length>0){const t=e[0];_t=!1,Et(!0,!0,t.name)}}else if("HNA"==et){sn();const e=be(oe,Xe);if(e.length>0){const t=e[0];_t=!1,Et(!0,!0,t.name)}}return ye}}window.onload=()=>{const e=document.createElement("canvas");e.style.width="100%",e.style.height="100%",e.style.display="block",e.style.border="none",e.style.outline="none",document.body.appendChild(e);const t=new i.N(e,!1,{preserveDrawingBuffer:!1,stencil:!1,antialias:!0,alpha:!1,premultipliedAlpha:!1,powerPreference:"high-performance",doNotHandleTouchAction:!1,doNotHandleContextLost:!0,audioEngine:!1},!0);let n=window.location.pathname;console.log(n),n.endsWith("/")&&(n=n.slice(0,-1));const a=window.location.hostname.includes("localhost"),s=window.location.hostname.includes("github.io"),r=["model-viewer","docs"];let l="",d="";if(a)l="/",d=n.slice(1).replace(/\/$/,"")||"",console.log("Local: "+d);else if(s)for(const e of r)if(n.includes(e)){const t=n.indexOf(e)+e.length;l=n.substring(0,n.lastIndexOf("/")),d=n.slice(t+1).replace(/\/$/,"")||"",console.log("Online: "+d);break}d&&window.history.replaceState(null,"",l),o.Create({canvas:e,engine:t,sceneBuilder:new H},d).then((e=>e.run()))}}},o={};function a(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={exports:{}};return i[e](n,n.exports,a),n.exports}a.m=i,e=[],a.O=(t,n,i,o)=>{if(!n){var s=1/0;for(c=0;c<e.length;c++){for(var[n,i,o]=e[c],r=!0,l=0;l<n.length;l++)(!1&o||s>=o)&&Object.keys(a.O).every((e=>a.O[e](n[l])))?n.splice(l--,1):(r=!1,o<s&&(s=o));if(r){e.splice(c--,1);var d=i();void 0!==d&&(t=d)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[n,i,o]},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,n)=>(a.f[n](e,t),t)),[])),a.u=e=>(({71:"glslShaders",126:"wgslShaders"}[e]||e)+".bundle.js"),a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),t={},n="model-viewer:",a.l=(e,i,o,s)=>{if(t[e])t[e].push(i);else{var r,l;if(void 0!==o)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var u=d[c];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==n+o){r=u;break}}r||(l=!0,(r=document.createElement("script")).charset="utf-8",a.nc&&r.setAttribute("nonce",a.nc),r.setAttribute("data-webpack",n+o),r.src=e),t[e]=[i];var b=(n,i)=>{r.onerror=r.onload=null,clearTimeout(g);var o=t[e];if(delete t[e],r.parentNode&&r.parentNode.removeChild(r),o&&o.forEach((e=>e(i))),n)return n(i)},g=setTimeout(b.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=b.bind(null,r.onerror),r.onload=b.bind(null,r.onload),l&&document.head.appendChild(r)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="",(()=>{a.b="undefined"!=typeof document&&document.baseURI||self.location.href;var e={792:0};a.f.j=(t,n)=>{var i=a.o(e,t)?e[t]:void 0;if(0!==i)if(i)n.push(i[2]);else{var o=new Promise(((n,o)=>i=e[t]=[n,o]));n.push(i[2]=o);var s=a.p+a.u(t),r=new Error;a.l(s,(n=>{if(a.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;r.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",r.name="ChunkLoadError",r.type=o,r.request=s,i[1](r)}}),"chunk-"+t,t)}},a.O.j=t=>0===e[t];var t=(t,n)=>{var i,o,[s,r,l]=n,d=0;if(s.some((t=>0!==e[t]))){for(i in r)a.o(r,i)&&(a.m[i]=r[i]);if(l)var c=l(a)}for(t&&t(n);d<s.length;d++)o=s[d],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(c)},n=self.webpackChunkmodel_viewer=self.webpackChunkmodel_viewer||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var s=a.O(void 0,[838,973],(()=>a(3740)));s=a.O(s)})();